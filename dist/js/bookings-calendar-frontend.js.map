{"version":3,"sources":["webpack://wc-bookings-availability.[name]/webpack/bootstrap","webpack://wc-bookings-availability.[name]/external {\"this\":[\"wp\",\"element\"]}","webpack://wc-bookings-availability.[name]/./node_modules/prop-types/index.js","webpack://wc-bookings-availability.[name]/external {\"this\":[\"wp\",\"i18n\"]}","webpack://wc-bookings-availability.[name]/external \"moment\"","webpack://wc-bookings-availability.[name]/./assets/js/includes/date-utils.js","webpack://wc-bookings-availability.[name]/external {\"this\":[\"wp\",\"components\"]}","webpack://wc-bookings-availability.[name]/external \"lodash\"","webpack://wc-bookings-availability.[name]/./node_modules/@babel/runtime/helpers/slicedToArray.js","webpack://wc-bookings-availability.[name]/./assets/js/components/icons/list-alt.js","webpack://wc-bookings-availability.[name]/./assets/js/components/icons/calendar-alt.js","webpack://wc-bookings-availability.[name]/./assets/js/components/icons/checkbox-checked.js","webpack://wc-bookings-availability.[name]/./assets/js/components/icons/checkbox-unchecked.js","webpack://wc-bookings-availability.[name]/./assets/js/components/icons/radio-selected.js","webpack://wc-bookings-availability.[name]/./assets/js/components/icons/radio-unselected.js","webpack://wc-bookings-availability.[name]/./assets/js/components/icons/trending-flat.js","webpack://wc-bookings-availability.[name]/./assets/js/components/icons/keyboard-arrow-right.js","webpack://wc-bookings-availability.[name]/./assets/js/components/icons/index.js","webpack://wc-bookings-availability.[name]/./assets/js/includes/misc-utils.js","webpack://wc-bookings-availability.[name]/external {\"this\":[\"wp\",\"apiFetch\"]}","webpack://wc-bookings-availability.[name]/./assets/js/blocks/common-context/context.js","webpack://wc-bookings-availability.[name]/./node_modules/@babel/runtime/helpers/extends.js","webpack://wc-bookings-availability.[name]/./node_modules/@babel/runtime/helpers/defineProperty.js","webpack://wc-bookings-availability.[name]/./assets/js/blocks/bookings-calendar/context/context.js","webpack://wc-bookings-availability.[name]/external {\"this\":[\"wp\",\"url\"]}","webpack://wc-bookings-availability.[name]/./assets/js/blocks/products-context/context.js","webpack://wc-bookings-availability.[name]/./node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack://wc-bookings-availability.[name]/./node_modules/classnames/index.js","webpack://wc-bookings-availability.[name]/./assets/js/blocks/availability-context/context.js","webpack://wc-bookings-availability.[name]/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://wc-bookings-availability.[name]/./node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack://wc-bookings-availability.[name]/./node_modules/@wordpress/date/build-module/index.js","webpack://wc-bookings-availability.[name]/./assets/js/components/book-button/index.js","webpack://wc-bookings-availability.[name]/./assets/js/components/event-calendar-item/popover.js","webpack://wc-bookings-availability.[name]/./assets/js/components/event-calendar-item/index.js","webpack://wc-bookings-availability.[name]/./assets/js/components/event-calendar/index.js","webpack://wc-bookings-availability.[name]/./assets/js/components/event-calendar/container.js","webpack://wc-bookings-availability.[name]/./assets/js/blocks/bookings-schedule/context/context.js","webpack://wc-bookings-availability.[name]/./assets/js/blocks/availability-context/availability-state.js","webpack://wc-bookings-availability.[name]/./assets/js/components/event-item/index.js","webpack://wc-bookings-availability.[name]/./assets/js/components/event-item/empty.js","webpack://wc-bookings-availability.[name]/./assets/js/components/page-loader/index.js","webpack://wc-bookings-availability.[name]/./assets/js/components/event-table/index.js","webpack://wc-bookings-availability.[name]/./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack://wc-bookings-availability.[name]/./node_modules/@babel/runtime/helpers/createClass.js","webpack://wc-bookings-availability.[name]/./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack://wc-bookings-availability.[name]/./node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack://wc-bookings-availability.[name]/./node_modules/@babel/runtime/helpers/inherits.js","webpack://wc-bookings-availability.[name]/./assets/js/blocks/common-context/common-state.js","webpack://wc-bookings-availability.[name]/./assets/js/blocks/products-context/products-state.js","webpack://wc-bookings-availability.[name]/./assets/js/blocks/bookings-schedule/style.scss?183e","webpack://wc-bookings-availability.[name]/./node_modules/moment-timezone/moment-timezone.js","webpack://wc-bookings-availability.[name]/external {\"this\":[\"wp\",\"viewport\"]}","webpack://wc-bookings-availability.[name]/./node_modules/memorize-one/dist/index.js","webpack://wc-bookings-availability.[name]/./node_modules/prop-types/factoryWithThrowingShims.js","webpack://wc-bookings-availability.[name]/./node_modules/prop-types/lib/ReactPropTypesSecret.js","webpack://wc-bookings-availability.[name]/./node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack://wc-bookings-availability.[name]/./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack://wc-bookings-availability.[name]/./node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack://wc-bookings-availability.[name]/external \"moment-timezone\"","webpack://wc-bookings-availability.[name]/./node_modules/@babel/runtime/helpers/typeof.js","webpack://wc-bookings-availability.[name]/./node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack://wc-bookings-availability.[name]/./assets/js/components/page-loader/style.scss?8492","webpack://wc-bookings-availability.[name]/./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack://wc-bookings-availability.[name]/./node_modules/@babel/runtime/helpers/iterableToArray.js","webpack://wc-bookings-availability.[name]/./node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack://wc-bookings-availability.[name]/./node_modules/moment-timezone/moment-timezone-utils.js","webpack://wc-bookings-availability.[name]/./node_modules/moment-timezone/index.js","webpack://wc-bookings-availability.[name]/./node_modules/json-cycle/cycle.js","webpack://wc-bookings-availability.[name]/./assets/js/components/book-button/style.scss?c5fd","webpack://wc-bookings-availability.[name]/./assets/js/blocks/bookings-calendar/context/calendar-state.js","webpack://wc-bookings-availability.[name]/./assets/js/blocks/bookings-calendar/style.scss?a344","webpack://wc-bookings-availability.[name]/./assets/js/blocks/bookings-calendar/frontend.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","this","DATE_RANGES","TODAY","THIS_WEEK","THIS_MONTH","CUSTOM","CONVERT_DIRECTIONS","LOCAL_TO_SERVER","SERVER_TO_LOCAL","DATE_RANGE_TYPE_LABELS","__","DATE_RANGE_OPTIONS","label","DATE_RANGE_OPTIONS_CAL","DATE_QUERY_FORMAT","getDateLimits","dateRangeType","intervalOffset","currentDate","minDate","moment","startOf","toDate","maxDate","intervalDays","add","setDate","endOf","minDisplayDate","startOfWeek","parseInt","wc_bookings_availability_args","start_of_week","_minDate","day","startDayOffset","endDayOffset","getDate","addTimeIfToday","isSame","format","isCustom","getReadableDateRangeString","getTime","getDateRangeTypeString","getDateQueryLimits","formatDateQueryLimits","getDayOfWeek","getCalStartEndTime","today","Date","todayDay","isoWeekday","wpStartOfWeek","weekStart","subtract","weekEnd","calendarWeekStartEndTime","date","monthStart","startColumn","startTime","monthEnd","endColumn","endTime","currentMonth","calendarMonthStartEndTime","getHumanReadableDate","formatDuration","product","endDate","formattedDuration","durationPeriodSeparator","duration","durationUnit","startDate","startDateDay","startDateMonth","timeFormat","time_format_moment","getDisplayTimezone","endDateDay","endDateMonth","days","sprintf","_n","min_duration","duration_type","max_duration","months","startOfDuration","endOfDuration","getNoSlotsInRangeMessage","getErrorLoadingSlotsInRangeMessage","convertDate","convertDirection","offsetHours","referenceDate","timezone_conversion","referenceTime","clientOffset","utcOffset","tz","server_timezone","serverOffset","getClientServerTimezoneOffsetHours","localizedDate","localizeDate","guess","getIsRestrictedDay","has_restricted_days","restricted_days","day_of_week","undefined","arrayWithHoles","iterableToArrayLimit","nonIterableRest","arr","icon","xmlns","width","height","viewBox","fill","SCREEN","ALL_PRODUCTS","PRODUCTS_SCREEN","CATEGORIES_SCREEN","RESOURCES_SCREEN","screenOptions","DEFAULT_PAGE_SIZE","attributesDictionary","common","categoryIds","type","default","source","selector","attribute","currentScreen","productIds","resourceIds","showDateNav","calendar","showSoldOut","example","schedule","infiniteScrollEnabled","slotsPerPage","showEmptyDates","getAttributesDefFor","blockName","decodeAttributesFor","attributes","attributesDef","decodedAttributes","keys","createContext","_extends","assign","target","arguments","length","apply","obj","configurable","writable","arrayWithoutHoles","iterableToArray","nonIterableSpread","hasOwn","classNames","classes","arg","argType","push","Array","isArray","inner","join","memo","stylesInDom","isOldIE","Boolean","window","document","all","atob","getTarget","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","e","listToStyles","list","options","styles","newStyles","item","id","base","part","css","media","sourceMap","parts","addStylesToDom","domStyle","j","refs","addStyle","insertStyleElement","style","createElement","nonce","forEach","setAttribute","insert","Error","appendChild","textStore","replaceText","index","replacement","filter","applyToSingletonTag","remove","styleSheet","cssText","cssNode","createTextNode","childNodes","removeChild","insertBefore","singleton","singletonCounter","update","styleIndex","btoa","concat","unescape","encodeURIComponent","JSON","stringify","firstChild","parentNode","removeStyleElement","newObj","newList","mayRemove","_i","_domStyle","self","ReferenceError","WP_ZONE","VALID_UTC_OFFSET","settings","l10n","locale","monthsShort","weekdays","weekdaysShort","meridiem","am","pm","AM","PM","relative","future","past","ss","mm","h","hh","dd","M","MM","y","yy","formats","time","datetime","datetimeAbbreviated","timezone","offset","string","setupWPTimezone","pack","abbrs","untils","offsets","formatMap","D","N","S","momentDate","num","replace","w","z","W","F","daysInMonth","L","isLeapYear","Y","a","A","B","timezoned","seconds","minutes","hours","g","G","H","u","v","I","isDST","O","P","T","Z","sign","substring","split","U","dateFormat","char","dateValue","newFormat","buildMoment","dateMoment","isUTCOffset","test","BookButton","props","buttonText","useState","loading","setLoading","availability","hasPersons","hasResources","permalink","durationType","isPreview","showDetails","buttonClassName","className","href","onClick","location","productId","apiFetch","url","ajax_url","nonces","add_booking_to_cart","then","data","booked","checkout_url","link","disabled","propTypes","PropTypes","array","isRequired","bool","EventCalendarItemPopover","productName","price","formattedDate","bookButtonProps","availableSlots","available","isSameOrAfter","isAfter","isNotPast","reduce","sum","slot","position","focusOnMount","colSpan","renderEventTime","EventCalendarItem","useContext","calendarContext","showPopover","setShowPopover","linkRef","useRef","priceHtml","price_html","has_persons","has_resources","isSoldOut","getIsSoldOut","now","isPastDate","some","isSameOrBefore","isBefore","onMouseEnter","current","focus","onMouseLeave","preventDefault","ref","number","EventCalendar","selectedDate","setSelectedDate","productsContext","requestProducts","getProducts","products","productsRequesting","productsError","availabilityContext","availabilityRequesting","getAvailability","requestAvailability","availabilityError","hasResultsForQuery","commonContext","resetOffset","isSmallViewport","startEndTimes","queryMinDate","queryMaxDate","isError","isRequesting","availabilityQuery","productsQuery","useEffect","count","memorize","_dateRangeType","_isSmallViewport","transformAvailabilityForMonthView","transformAvailabilityForWeekView","filterAvailability","renderCalendarWeekDays","weekAvailability","calendarItems","time_format","hour","hourRow","hourStyle","gridColumn","gridRow","formatTime","hourKey","hourColumnMarkup","start","end","column","hourDateKey","hourDateStyle","slots","loadMore","hourMarkup","productsWithAvailabilityOnDayHour","map","productAvailability","calendarClass","numOfWeeks","diff","calendarContainerClass","weekView","shift","header","dayNumber","renderHeader","calendarDays","dayString","headerKey","headerClass","role","tabIndex","onKeyDown","renderCalendarWeekDaysSmallViewport","headerStyle","dayStyle","rowsPerDay","rowIndex","dayKey","dayMarkup","dayClassName","productsWithAvailabilityOnDay","renderCalendarMonthDays","remainingRecords","isLastPage","forceDateFromProps","defaultProps","node","dayAvailability","transform","result","availabilityByDays","mapValues","sort","b","availabilityByHour","withViewportMatch","CalendarContainer","gotoCurrent","gotoNext","gotoPrev","dateRangeString","dateRangeTypeString","Slot","getJsonString","query","serializeQueryArgs","omit","AvailabilityState","setAvailability","setAvailabilityRequesting","setAvailabilityError","records","pages","page","Provider","getAvailabilityCount","getRemainingRecordsCount","recordsCount","getAvailabilityTotalRecords","getPastTimes","pageSize","queryArgs","product_ids","category_ids","resource_ids","min_date","max_date","limit","get_past_times","hide_unavailable","path","addQueryArgs","pickBy","identity","requestedAvailability","_query","queryKey","newPage","newAvailability","merge","has","storeAvailability","src","product_id","duration_unit","serverDate","error","highestPageForQuery","Math","max","children","EventItem","addSubheader","placeholder","availableData","isAvailable","listClassName","dangerouslySetInnerHTML","__html","isBookable","shape","resources","title","EmptyEventItem","PageLoader","onScroll","scrollTriggerRef","createRef","addEventListener","prevProps","isLoading","removeEventListener","scrollTriggerIsInViewport","scrollTrigger","top","getBoundingClientRect","innerHeight","loadMoreClick","Component","func","EventTable","setPage","firstRender","pageLoader","productContext","scheduleContext","previousProps","usePreviousProps","forcedDate","dateRange","hasResults","useLayoutEffect","loadMoreSlots","previousDate","shownAvailability","placeholderAvailability","slice","eventItems","placeHolderCount","min","placeHolderProduct","cost","momentPreviousDate","addSubHeader","renderEvents","instance","Constructor","TypeError","_defineProperties","descriptor","protoProps","staticProps","_typeof","assertThisInitialized","_getPrototypeOf","setPrototypeOf","getPrototypeOf","__proto__","subClass","superClass","constructor","CommonState","newProps","isFrontend","setOffset","onShowDateNavUpdate","setAttributes","onShowEmptyDatesUpdate","ProductsState","setProducts","setProductsRequesting","setProductsError","include","per_page","_locale","_products","productsObj","transformProductsListToObject","content","locals","root","factory","cachedGuess","zones","links","names","guesses","version","logError","momentVersion","major","minor","charCodeToInt","charCode","unpackBase60","whole","fractional","multiplier","out","charCodeAt","arrayToInt","mapIndices","indices","unpack","round","Infinity","intToUntil","population","Zone","packedString","_set","OffsetAt","at","timeString","toTimeString","abbr","match","getTimezoneOffset","ZoneScore","zone","offsetScore","abbrScore","findChange","low","high","mid","sortZoneScores","localeCompare","addToGuesses","guessesForUserOffsets","guessesOffset","offsetsLength","filteredGuesses","rebuildGuess","intlName","Intl","DateTimeFormat","resolvedOptions","timeZone","normalizeName","zoneScore","change","next","startYear","getFullYear","last","userOffsets","zoneScores","getZone","scoreOffsetAt","toLowerCase","addZone","packed","normalized","caller","addLink","aliases","alias","normal0","normal1","needsOffset","isUnixTimestamp","_f","_a","_tzm","message","console","input","args","utc","isMoment","parse","unpacked","_index","timestamp","offsetNext","offsetPrev","moveAmbiguousForward","moveInvalidForward","mom","offsetAt","abs","dataVersion","_zones","_links","_names","load","zoneExists","didShowError","ignoreCache","old","fn","abbrWrap","_z","resetZoneWrap","defaultZone","updateOffset","keepTime","_isUTC","_d","zoneName","zoneAbbr","local","setDefault","momentProperties","toString","ex","Map","argstr","set","ReactPropTypesSecret","emptyFunction","emptyFunctionWithReset","resetWarningCache","shim","propName","componentName","propFullName","secret","err","getShim","ReactPropTypes","symbol","any","arrayOf","element","elementType","instanceOf","objectOf","oneOf","oneOfType","exact","checkPropTypes","_arr","_e","_s","iterator","done","_typeof2","_setPrototypeOf","arr2","iter","from","BASE60","EPSILON","packBase60","precision","output","absolute","floor","fraction","buffer","packBase60Fraction","packUntils","packAbbrsAndOffsets","packPopulation","exponent","String","pow","validatePackData","arraysAreEqual","zonesAreEqual","createLinks","groupLeaders","group","foundGroup","groups","unshift","findAndCreateLinks","filterYears","untilYear","startI","endI","getUTCFullYear","findStartAndEndIndex","filterLinkPack","inputZones","outputZones","decycle","objects","paths","derez","nu","_value","toJSON","Function","$ref","retrocycle","$","px","rez","eval","replacer","space","reviver","CalendarState","onTimeRangeUpdate","onShowSoldOutTimesUpdate","bookingsContainersHTML","getElementsByClassName","bookingsContainerHTML","dataset","render"],"mappings":"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","file":"js/bookings-calendar-frontend.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 88);\n","(function() { module.exports = this[\"wp\"][\"element\"]; }());","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","(function() { module.exports = this[\"wp\"][\"i18n\"]; }());","(function() { module.exports = this[\"moment\"]; }());","/**\n * Date constants and utility functions.\n *\n * @author WooCommerce\n * @since  1.0.0\n */\n\n/**\n * External dependencies\n */\nimport moment from 'moment';\nimport 'moment-timezone';\nimport { sprintf, __, _n } from '@wordpress/i18n';\n\n/**\n * Options for what range of dates to display on event list.\n *\n * @since 1.0.0\n */\nexport const DATE_RANGES = {\n\tTODAY: 'today',\n\tTHIS_WEEK: 'this-week',\n\tTHIS_MONTH: 'this-month',\n\tCUSTOM: 'custom',\n};\n\n/**\n * Convert directions\n *\n * @since 1.0.0\n */\nexport const CONVERT_DIRECTIONS = {\n\tLOCAL_TO_SERVER: 'LOCAL_TO_SERVER',\n\tSERVER_TO_LOCAL: 'SERVER_TO_LOCAL',\n};\n\n/**\n * Date range labels.\n *\n * @since 1.0.0\n */\nexport const DATE_RANGE_TYPE_LABELS = {\n\tTODAY: __( 'Today', 'woocommerce-bookings-availability' ),\n\tTHIS_WEEK: __( 'This week', 'woocommerce-bookings-availability' ),\n\tTHIS_MONTH: __( 'This month', 'woocommerce-bookings-availability' ),\n};\n\n/**\n * Option labels for each date range type.\n *\n * @since 1.0.0\n */\nexport const DATE_RANGE_OPTIONS = [\n\t{ value: DATE_RANGES.TODAY, label: DATE_RANGE_TYPE_LABELS.TODAY },\n\t{ value: DATE_RANGES.THIS_WEEK, label: DATE_RANGE_TYPE_LABELS.THIS_WEEK },\n\t{ value: DATE_RANGES.THIS_MONTH, label: DATE_RANGE_TYPE_LABELS.THIS_MONTH },\n];\n\n/**\n * Option labels for each date range type for calendar.\n *\n * @since 1.0.0\n */\nexport const DATE_RANGE_OPTIONS_CAL = [\n\t{ value: DATE_RANGES.THIS_WEEK, label: DATE_RANGE_TYPE_LABELS.THIS_WEEK },\n\t{ value: DATE_RANGES.THIS_MONTH, label: DATE_RANGE_TYPE_LABELS.THIS_MONTH },\n];\n\n/**\n * String format for date query.\n */\nexport const DATE_QUERY_FORMAT = 'YYYY-MM-DD[T]HH:mm:ss';\n\n/**\n * Find the date min and max for a given date range type.\n *\n * Calculates the date min/max relative to the current day when necessary.\n * For week range, will start from the startOfWeek day and calculate onwards.\n *\n * @since 1.0.0\n *\n * @param {string} dateRangeType    String value for a date range (from DATE_RANGE array).\n * @param {int}    [intervalOffset] Optional offset for the date range.\n * @param {int}    currentDate \t\tValue to denote if there is a current date to use.\n *\n * @return {Object} minDate and maxDate Date objects\n */\nexport function getDateLimits( dateRangeType, intervalOffset = 0, currentDate = 1 ) {\n\tlet minDate = moment().startOf( 'day' ).toDate();\n\tlet maxDate = moment().startOf( 'day' ).toDate();\n\tlet intervalDays = 1;\n\n\tif ( DATE_RANGES.THIS_MONTH === dateRangeType ) {\n\t\tminDate = moment( minDate ).add( intervalOffset, 'months' ).toDate();\n\t\tminDate.setDate( currentDate );\n\t\tmaxDate = moment( minDate ).endOf( 'month' ).toDate();\n\t}\n\n\tlet minDisplayDate = minDate;\n\n\tif ( DATE_RANGES.THIS_WEEK === dateRangeType ) {\n\t\tintervalDays = 7;\n\t\tconst startOfWeek = parseInt( wc_bookings_availability_args.start_of_week, 10 );\n\t\tconst _minDate = moment().day( ( intervalDays * intervalOffset ) + startOfWeek ).startOf( 'day' );\n\t\tif ( minDate < _minDate ) {\n\t\t\tminDate = _minDate.toDate();\n\t\t}\n\t\tmaxDate = moment( minDate ).endOf( 'week' ).toDate();\n\t\tminDisplayDate = moment( minDate ).startOf( 'week' ).toDate();\n\t}\n\n\tif ( DATE_RANGES.TODAY === dateRangeType ) {\n\t\tconst startDayOffset = intervalDays * intervalOffset;\n\t\tconst endDayOffset = ( intervalDays * ( intervalOffset + 1 ) ) - 1;\n\t\tminDate.setDate( minDate.getDate() + startDayOffset );\n\t\tmaxDate.setDate( maxDate.getDate() + endDayOffset );\n\t}\n\n\treturn {\n\t\tminDisplayDate,\n\t\tminDate,\n\t\tmaxDate,\n\t};\n}\n\n/**\n * Add time if the date is today.\n *\n * The date can then be used to provide more detailed availability when calling the API.\n *\n * @since import moment from 'moment';\n *\n * @param {Date}  minDate Date.\n *\n * @return {Date} minDate with current time if it is today.\n */\nexport function addTimeIfToday( minDate ) {\n\tif ( minDate && moment( minDate ).isSame( moment(), 'day' ) ) {\n\t\treturn moment().format( DATE_QUERY_FORMAT );\n\t}\n\n\treturn minDate;\n}\n\n/**\n * Check if date is a custom type or not.\n *\n * @since 1.0.0\n *\n * @param {string} dateRangeType String value for a date range (from DATE_RANGE array).\n *\n * @return {boolean} True if using a custom date range.\n */\nexport function isCustom( dateRangeType ) {\n\treturn DATE_RANGES.CUSTOM === dateRangeType;\n}\n\n/**\n * Get date range as a human readable string.\n *\n * @since 1.0.0\n *\n * @param {string} dateRangeType    String value for a date range (from DATE_RANGE array).\n * @param {int}    [intervalOffset] Optional offset for the date range.\n *\n * @return {String} Human readable string representing the date range.\n */\nexport function getReadableDateRangeString( dateRangeType, intervalOffset = 0 ) {\n\tconst { minDisplayDate, minDate, maxDate } = getDateLimits( dateRangeType, intervalOffset );\n\n\tif ( DATE_RANGES.THIS_MONTH === dateRangeType ) {\n\t\treturn moment( minDate ).format( 'MMMM YYYY' );\n\t}\n\n\tif ( minDate.getTime() === maxDate.getTime() ) {\n\t\treturn moment( minDate ).format( 'MMM DD, YYYY' );\n\t}\n\n\treturn moment( minDisplayDate ).format( 'MMM DD - ' ) + moment( maxDate ).format( 'MMM DD, YYYY' );\n}\n\n/**\n * Get date range type as header navigation title.\n *\n * @since 1.0.0\n *\n * @param {string} dateRangeType String value for a date range (from DATE_RANGE array).\n *\n * @return {String} Human readable string representing the date range type.\n */\nexport function getDateRangeTypeString( dateRangeType ) {\n\tswitch ( dateRangeType ) {\n\t\tcase DATE_RANGES.TODAY:\n\t\t\treturn DATE_RANGE_TYPE_LABELS.TODAY;\n\t\tcase DATE_RANGES.THIS_MONTH:\n\t\t\treturn DATE_RANGE_TYPE_LABELS.THIS_MONTH;\n\t\tcase DATE_RANGES.THIS_WEEK:\n\t\tdefault:\n\t\t\treturn DATE_RANGE_TYPE_LABELS.THIS_WEEK;\n\t}\n}\n\n/**\n * Get date range as a min/max in 'YYYY-MM-DD' format.\n *\n * @since 1.0.0\n *\n * @param {string} dateRangeType    String value for a date range (from DATE_RANGE array).\n * @param {int}    [intervalOffset] Optional offset for the date range.\n * @param {int}    [currentDate]    Optional current date.\n *\n * @return {Object} minDate and maxDate in 'YYYY-MM-DD' format.\n */\nexport function getDateQueryLimits( dateRangeType, intervalOffset = 0, currentDate = 1 ) {\n\tconst { minDate, maxDate } = getDateLimits( dateRangeType, intervalOffset, currentDate );\n\n\treturn formatDateQueryLimits( minDate, maxDate );\n}\n\n/**\n * Format dates according to date query format.\n *\n * @param {object} minDate          Min date\n * @param {object} maxDate          Max date\n *\n * @return {Object} minDate and maxDate in DATE_QUERY_FORMAT format.\n */\nexport function formatDateQueryLimits( minDate, maxDate ) {\n\treturn {\n\t\tminDate: moment( minDate ).format( DATE_QUERY_FORMAT ),\n\t\tmaxDate: moment( maxDate ).endOf( 'day' ).format( DATE_QUERY_FORMAT ),\n\t};\n}\n\n/**\n *  Gets the day of the week.\n *\n * @since 1.0.0\n *\n * @param {int} day The selected start of week.\n *\n * @return {string} The processed day.\n */\nexport function getDayOfWeek( day ) {\n\treturn moment().day( day ).format( 'ddd' );\n}\n\n/**\n *  Gets the calendar month view start time.\n *\n * @since 1.0.0\n * @param {string} dateRangeType  String value for a date range (from DATE_RANGE array).\n * @param {int}    intervalOffset Optional offset for the date range.\n * @return {object} { minDate, maxDate }.\n */\nexport function getCalStartEndTime( dateRangeType, intervalOffset ) {\n\tswitch ( dateRangeType ) {\n\t\tcase DATE_RANGES.THIS_WEEK:\n\t\t\treturn calendarWeekStartEndTime( intervalOffset );\n\n\t\tcase DATE_RANGES.THIS_MONTH:\n\t\tdefault:\n\t\t\treturn calendarMonthStartEndTime( intervalOffset );\n\t}\n}\n\nfunction calendarWeekStartEndTime( intervalOffset ) {\n\tconst today = moment( new Date() ).add( intervalOffset * 7, 'day' );\n\tconst todayDay = today.isoWeekday();\n\n\tconst wpStartOfWeek = parseInt( wc_bookings_availability_args.start_of_week, 10 );\n\t// Change WP format to ISO. ISO 1..7, 1=Monday vs. WordPress 0..7, 0=Sunday.\n\tconst startOfWeek = wpStartOfWeek === 0 ? 7 : wpStartOfWeek;\n\n\tlet weekStart = null;\n\tif ( todayDay > startOfWeek ) {\n\t\tweekStart = moment( today ).subtract( todayDay - startOfWeek, 'day' );\n\t} else if ( todayDay < startOfWeek ) {\n\t\tweekStart = moment( today ).subtract( 7 - ( startOfWeek - todayDay ), 'day' );\n\t} else {\n\t\tweekStart = today;\n\t}\n\n\tconst weekEnd = moment( weekStart ).add( 6, 'day' );\n\n\treturn {\n\t\tminDate: weekStart.startOf( 'day' ),\n\t\tmaxDate: weekEnd.endOf( 'day' ),\n\t};\n}\n\nfunction calendarMonthStartEndTime( intervalOffset ) {\n\tconst date = moment( new Date() ).add( intervalOffset, 'month' );\n\n\tconst wpStartOfWeek = parseInt( wc_bookings_availability_args.start_of_week, 10 );\n\t// Change WP format to ISO. ISO 1..7, 1=Monday vs. WordPress 0..7, 0=Sunday.\n\tconst startOfWeek = wpStartOfWeek === 0 ? 7 : wpStartOfWeek;\n\tconst monthStart = date.startOf( 'month' );\n\tconst monthStartOfWeekDay = monthStart.isoWeekday();\n\t/*\n\t * Calculate column where the month start will be placed.\n\t * This calculates true modulo ( never negative ).\n\t */\n\tconst startColumn = ( 7 + ( ( monthStartOfWeekDay - startOfWeek ) % 7 ) ) % 7;\n\t/*\n\t * Calculate start time: how many days from the previous month we need to include,\n\t * in order to have calendar without empty days in the first row.\n\t */\n\tconst startTime = moment( monthStart ).subtract( startColumn, 'day' );\n\n\tconst monthEnd = date.endOf( 'month' );\n\tconst monthEndOfWeekDay = monthEnd.isoWeekday();\n\tconst endColumn = ( 7 + ( ( monthEndOfWeekDay - startOfWeek ) % 7 ) ) % 7;\n\t/*\n\t * Calculate end date: how many days from the next month we need to include.\n\t * We want to have calendar without empty days in the last row.\n\t */\n\tconst endTime = moment( monthEnd ).add( 6 - endColumn, 'day' );\n\n\treturn {\n\t\tminDate: startTime.startOf( 'day' ),\n\t\tmaxDate: endTime.endOf( 'day' ),\n\t\tcurrentMonth: date,\n\t};\n}\n\n/*\n * Get date as humanreadable string.\n *\n * @since 1.0.0\n *\n * @param {string} date    String value for a date.\n *\n * @return {string} date in 'dddd, MMMM DD' format.\n */\nexport function getHumanReadableDate( date ) {\n\tconst dateFormat = 'dddd, MMMM DD';\n\n\treturn moment( date ).format( dateFormat );\n}\n\n/**\n * Formats a time duration.\n *\n * @since 1.0.0\n *\n * @param {object}    product Product information.\n * @param {timestamp} date    Date the duration starts from.\n *\n * @return {string} The formatted duration.\n */\nexport function formatDuration( product, date ) {\n\tconst { duration, durationUnit } = product;\n\tconst startDate = moment( date );\n\tconst startDateDay = startDate.format( 'Do' );\n\tconst startDateMonth = startDate.format( 'MMMM' );\n\tconst timeFormat = wc_bookings_availability_args.time_format_moment;\n\tlet endDate;\n\n\tlet formattedDuration, durationPeriodSeparator;\n\tswitch ( durationUnit ) {\n\t\tcase 'minute':\n\t\t\tendDate = moment( date ).add( duration, durationUnit );\n\t\t\tformattedDuration = `${ startDate.format( timeFormat ) }-${ endDate.format( timeFormat ) } (${ getDisplayTimezone( date ) })`;\n\t\t\tbreak;\n\t\tcase 'hour':\n\t\t\tendDate = moment( date ).add( duration, durationUnit );\n\t\t\tdurationPeriodSeparator = __( ' to ', 'woocommerce-bookings-availability' );\n\t\t\tformattedDuration = `${ startDate.format( timeFormat ) } ${ durationPeriodSeparator } ${ endDate.format( timeFormat ) } (${ getDisplayTimezone( date ) })`;\n\t\t\tbreak;\n\t\t// 'night' is just a synonym of the 'day' duration for accommodation bookings.\n\t\tcase 'night':\n\t\tcase 'day':\n\t\t\tendDate = moment( date ).add( duration - 1, durationUnit );\n\t\t\tlet endDateDay = endDate.format( 'Do' );\n\t\t\tlet endDateMonth = endDate.format( 'MMMM' );\n\n\t\t\t// Assume it's of fixed duration\n\t\t\tlet days = sprintf( _n( `%d ${ durationUnit }`, `%d ${ durationUnit }s`, duration * product.min_duration, 'woocommerce-bookings-availability' ), duration * product.min_duration );\n\t\t\tif ( 'customer' === product.duration_type && product.min_duration !== product.max_duration ) {\n\t\t\t\tdays = sprintf( __( `%d-%d ${ durationUnit }s`, 'woocommerce-bookings-availability' ), duration * product.min_duration, duration * product.max_duration );\n\t\t\t\tformattedDuration = `${ days }`;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif ( startDateMonth !== endDateMonth ) {\n\t\t\t\tendDateMonth = `${ endDateMonth } `;\n\t\t\t} else {\n\t\t\t\tendDateMonth = '';\n\t\t\t}\n\n\t\t\tdurationPeriodSeparator = '';\n\t\t\tswitch ( duration ) {\n\t\t\t\tcase 1:\n\t\t\t\t\tdurationPeriodSeparator = endDateMonth = endDateDay = '';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\tdurationPeriodSeparator = __( ' and ', 'woocommerce-bookings-availability' );\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tdurationPeriodSeparator = ' - ';\n\t\t\t}\n\n\t\t\tformattedDuration = `${ days }, ${ startDateMonth } ${ startDateDay } ${ durationPeriodSeparator } ${ endDateMonth }${ endDateDay } `;\n\t\t\tbreak;\n\n\t\tcase 'month':\n\t\t\tendDate = moment( date ).add( duration, durationUnit );\n\t\t\t/* translators: %d number of month. */\n\t\t\tconst months = sprintf( _n( '%d month', '%d months', duration, 'woocommerce-bookings-availability' ), duration );\n\t\t\tconst startOfDuration = startDate.startOf( 'month' );\n\t\t\tconst endOfDuration = endDate.endOf( 'month' );\n\t\t\tif ( 1 === duration ) {\n\t\t\t\tformattedDuration = `${ months }, ${ startOfDuration.format( 'MMMM D' ) } - ${ endOfDuration.format( 'D' ) }`;\n\t\t\t} else {\n\t\t\t\tformattedDuration = `${ months }, ${ startOfDuration.format( 'MMMM D' ) } - ${ endOfDuration.format( 'MMMM D' ) }`;\n\t\t\t}\n\t}\n\n\treturn formattedDuration;\n}\n\n/**\n * Return friendly string indicating no slots exist for range type.\n *\n * @since 1.0.0\n *\n * @param {string} dateRangeType String value for a date range (from DATE_RANGE array).\n *\n * @return {string} String indicating no slots are available in the range.\n */\nexport function getNoSlotsInRangeMessage( dateRangeType ) {\n\tswitch ( dateRangeType ) {\n\t\tcase DATE_RANGES.THIS_WEEK:\n\t\t\treturn __( 'No available times this week.', 'woocommerce-bookings-availability' );\n\t\tcase DATE_RANGES.THIS_MONTH:\n\t\t\treturn __( 'No available times this month.', 'woocommerce-bookings-availability' );\n\t\tcase DATE_RANGES.TODAY:\n\t\tdefault:\n\t\t\treturn __( 'No available times this day.', 'woocommerce-bookings-availability' );\n\t}\n}\n\n/**\n * Return friendly string indicating an error occurred for range type.\n *\n * @since 1.0.0\n *\n * @param {string} dateRangeType String value for a date range (from DATE_RANGE array).\n *\n * @return {string} String indicating an error occurred loading slots in the range.\n */\nexport function getErrorLoadingSlotsInRangeMessage( dateRangeType ) {\n\tswitch ( dateRangeType ) {\n\t\tcase DATE_RANGES.THIS_WEEK:\n\t\t\treturn __( 'We weren\\'t able to load times for this week.', 'woocommerce-bookings-availability' );\n\t\tcase DATE_RANGES.THIS_MONTH:\n\t\t\treturn __( 'We weren\\'t able to load times for this month.', 'woocommerce-bookings-availability' );\n\t\tcase DATE_RANGES.TODAY:\n\t\tdefault:\n\t\t\treturn __( 'We weren\\'t able to load times for this day.', 'woocommerce-bookings-availability' );\n\t}\n}\n\n/**\n * Convert client/server dates.\n *\n * @param {date}    date Date to convert.\n * @param {string}  convertDirection Direction of conversion (from CONVERT_DIRECTIONS array).\n *\n * @return {object} The converted date object.\n */\nexport function convertDate( date, convertDirection ) {\n\tconst offsetHours = getClientServerTimezoneOffsetHours( date );\n\tconst localizedDate = moment.tz( date, DATE_QUERY_FORMAT, wc_bookings_availability_args.server_timezone );\n\n\tswitch ( convertDirection ) {\n\t\tcase CONVERT_DIRECTIONS.SERVER_TO_LOCAL:\n\t\t\tlocalizedDate.add( offsetHours, 'hours' );\n\t\t\tbreak;\n\t\tcase CONVERT_DIRECTIONS.LOCAL_TO_SERVER:\n\t\t\tlocalizedDate.subtract( offsetHours, 'hours' );\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthrow 'Invalid convertDirection option.';\n\t}\n\n\treturn localizedDate;\n}\n\n/**\n * Localize client/server date based on Bookings timezone settings.\n *\n * @param {date}    date Date to convert.\n * @param {string}  convertDirection Direction of conversion (from CONVERT_DIRECTIONS array).\n *\n * @return {string} The converted date in 'YYYY-MM_DDTHH:mm:ss' format.\n */\nexport function localizeDate( date, convertDirection ) {\n\tif ( ! wc_bookings_availability_args.timezone_conversion ) {\n\t\treturn date;\n\t}\n\n\tconst convertedDate = convertDate( date, convertDirection );\n\treturn convertedDate.format( DATE_QUERY_FORMAT );\n}\n\n/**\n * Returns the hour offset between the client and the server based on Bookings timezone settings.\n *\n * @param {string} referenceDate date string in DATE_QUERY_FORMAT to use as time to calculate the timezone difference at.\n *\n * @return {number} Number of hours between server and client.\n */\nfunction getClientServerTimezoneOffsetHours( referenceDate ) {\n\tif ( ! wc_bookings_availability_args.timezone_conversion ) {\n\t\treturn 0;\n\t}\n\n\tconst referenceTime = moment( referenceDate, DATE_QUERY_FORMAT );\n\tconst clientOffset = referenceTime.utcOffset();\n\treferenceTime.tz( wc_bookings_availability_args.server_timezone );\n\tconst serverOffset = referenceTime.utcOffset();\n\n\treturn ( clientOffset - serverOffset ) / 60.0;\n}\n\n/**\n * Returns the current timezone abbreviation based on Bookings\n * settings and the client timezone.\n *\n * @param {string} referenceDate date string in DATE_QUERY_FORMAT to use as time to calculate the timezone at.\n *\n * @return {string} Timezone abbreviation string.\n */\nexport function getDisplayTimezone( referenceDate ) {\n\tif ( ! wc_bookings_availability_args.timezone_conversion ) {\n\t\t// Use server's timezone.\n\t\treturn moment.tz( referenceDate, DATE_QUERY_FORMAT, wc_bookings_availability_args.server_timezone ).format( 'z' );\n\t}\n\t// Guess client's timezone.\n\treturn moment.tz( referenceDate, DATE_QUERY_FORMAT, moment.tz.guess() ).format( 'z' );\n}\n\n/**\n * Checks if a specific date is restricted.\n *\n * @since 1.1.7\n *\n * @param {timestamp} date    Date the duration starts from.\n * @param {object}    product Product information.\n *\n * @return {boolean} Is restricted or not.\n */\nexport function getIsRestrictedDay( date, product ) {\n\tif ( ! product.has_restricted_days || ! product.restricted_days ) {\n\t\treturn false;\n\t}\n\n\t// Days included in the list are available as start days.\n\tconst day_of_week = moment( date ).day();\n\tif ( undefined === product.restricted_days[ day_of_week ] ) {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n","(function() { module.exports = this[\"wp\"][\"components\"]; }());","(function() { module.exports = this[\"lodash\"]; }());","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","/**\n * External dependencies\n */\nimport { Icon } from '@wordpress/components';\n\nexport default () => (\n\t<Icon\n\t\ticon={\n\t\t\t<svg\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\twidth=\"24\"\n\t\t\t\theight=\"24\"\n\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t>\n\t\t\t\t<path d=\"M19 5v14H5V5h14m1.1-2H3.9c-.5 0-.9.4-.9.9v16.2c0 .4.4.9.9.9h16.2c.4 0 .9-.5.9-.9V3.9c0-.5-.5-.9-.9-.9zM11 7h6v2h-6V7zm0 4h6v2h-6v-2zm0 4h6v2h-6zM7 7h2v2H7zm0 4h2v2H7zm0 4h2v2H7z\" />\n\t\t\t\t<path fill=\"none\" d=\"M0 0h24v24H0z\" />\n\t\t\t</svg>\n\t\t}\n\t/>\n);\n","/**\n * External dependencies\n */\nimport { Icon } from '@wordpress/components';\n\nexport default () => (\n\t<Icon\n\t\ticon={\n\t\t\t<svg\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\twidth=\"24\"\n\t\t\t\theight=\"24\"\n\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t>\n\t\t\t\t<path d=\"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z\" />\n\t\t\t\t<path fill=\"none\" d=\"M0 0h24v24H0z\" />\n\t\t\t</svg>\n\t\t}\n\t/>\n);\n","/**\n * External dependencies\n */\nimport { Icon } from '@wordpress/components';\n\nexport default () => (\n\t<Icon\n\t\ticon={\n\t\t\t<svg\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\twidth=\"24\"\n\t\t\t\theight=\"24\"\n\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#1E8CBE\"\n\t\t\t\t\td=\"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"\n\t\t\t\t/>\n\t\t\t</svg>\n\t\t}\n\t/>\n);\n","/**\n * External dependencies\n */\nimport { Icon } from '@wordpress/components';\n\nexport default () => (\n\t<Icon\n\t\ticon={\n\t\t\t<svg\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\twidth=\"24\"\n\t\t\t\theight=\"24\"\n\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#6C7781\"\n\t\t\t\t\td=\"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\"\n\t\t\t\t/>\n\t\t\t</svg>\n\t\t}\n\t/>\n);\n","/**\n * External dependencies\n */\nimport { Icon } from '@wordpress/components';\n\nexport default () => (\n\t<Icon\n\t\ticon={\n\t\t\t<svg\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\twidth=\"24\"\n\t\t\t\theight=\"24\"\n\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t>\n\t\t\t\t<path fill=\"#1E8CBE\" d=\"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\" />\n\t\t\t</svg>\n\t\t}\n\t/>\n);\n","/**\n * External dependencies\n */\nimport { Icon } from '@wordpress/components';\n\nexport default () => (\n\t<Icon\n\t\ticon={\n\t\t\t<svg\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\twidth=\"24\"\n\t\t\t\theight=\"24\"\n\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t>\n\t\t\t\t<path\n\t\t\t\t\tfill=\"#6C7781\"\n\t\t\t\t\td=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"\n\t\t\t\t/>\n\t\t\t</svg>\n\t\t}\n\t/>\n);\n","/**\n * External dependencies\n */\nimport { Icon } from '@wordpress/components';\n\nexport default () => (\n\t<Icon\n\t\ticon={\n\t\t\t<svg\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\twidth=\"24\"\n\t\t\t\theight=\"24\"\n\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t>\n\t\t\t\t<path d=\"M22 12l-4-4v3H3v2h15v3z\" />\n\t\t\t\t<path d=\"M0 0h24v24H0z\" fill=\"none\" />\n\t\t\t</svg>\n\t\t}\n\t/>\n);\n","/**\n * External dependencies\n */\nimport { Icon } from '@wordpress/components';\n\nexport default () => (\n\t<Icon\n\t\ticon={\n\t\t\t<svg\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\twidth=\"24\"\n\t\t\t\theight=\"24\"\n\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t>\n\t\t\t\t<path d=\"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z\" />\n\t\t\t\t<path fill=\"none\" d=\"M0 0h24v24H0V0z\" />\n\t\t\t</svg>\n\t\t}\n\t/>\n);\n","// Export each icon as a named component.\nexport { default as IconListAlt } from './list-alt';\nexport { default as IconCalendarAlt } from './calendar-alt';\nexport { default as IconCheckChecked } from './checkbox-checked';\nexport { default as IconCheckUnchecked } from './checkbox-unchecked';\nexport { default as IconRadioSelected } from './radio-selected';\nexport { default as IconRadioUnselected } from './radio-unselected';\nexport { default as IconTrendingFlat } from './trending-flat';\nexport { default as IconKeyboardArrowRight } from './keyboard-arrow-right';\n","/**\n * External dependencies.\n */\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { DATE_RANGES } from './date-utils';\n\nexport const SCREEN = {\n\tALL_PRODUCTS: 'all-products',\n\tPRODUCTS_SCREEN: 'products-screen',\n\tCATEGORIES_SCREEN: 'categories-screen',\n\tRESOURCES_SCREEN: 'resources-screen',\n};\n\nexport const screenOptions = [\n\t{ value: SCREEN.ALL_PRODUCTS, label: __( 'All bookable products', 'woocommerce-bookings-availability' ) },\n\t{ value: SCREEN.PRODUCTS_SCREEN, label: __( 'Specific bookable products', 'woocommerce-bookings-availability' ) },\n\t{ value: SCREEN.CATEGORIES_SCREEN, label: __( 'Specific categories', 'woocommerce-bookings-availability' ) },\n\t{ value: SCREEN.RESOURCES_SCREEN, label: __( 'Specific resources', 'woocommerce-bookings-availability' ) },\n];\n\nexport const DEFAULT_PAGE_SIZE = 8;\n\n/*\n * Global list of all attributes for both blocks.\n * Attributes are organized into 'common', 'calendar',\n * and 'schedule' props. 'common' attributes\n * apply to both blocks while 'calendar' and 'schedule'\n * apply to the specific block types only.\n *\n */\nconst attributesDictionary = {\n\tcommon: {\n\t\tcategoryIds: {\n\t\t\ttype: 'string',\n\t\t\tdefault: '',\n\t\t\tsource: 'attribute',\n\t\t\tselector: '.wc-bookings-availability-main-container',\n\t\t\tattribute: 'data-category-ids',\n\t\t},\n\t\tcurrentScreen: {\n\t\t\ttype: 'string',\n\t\t\tdefault: '',\n\t\t},\n\t\tproductIds: {\n\t\t\ttype: 'string',\n\t\t\tdefault: '',\n\t\t\tsource: 'attribute',\n\t\t\tselector: '.wc-bookings-availability-main-container',\n\t\t\tattribute: 'data-product-ids',\n\t\t},\n\t\tresourceIds: {\n\t\t\ttype: 'string',\n\t\t\tdefault: '',\n\t\t\tsource: 'attribute',\n\t\t\tselector: '.wc-bookings-availability-main-container',\n\t\t\tattribute: 'data-resource-ids',\n\t\t},\n\t\tshowDateNav: {\n\t\t\ttype: 'boolean',\n\t\t\tdefault: true,\n\t\t\tattribute: 'data-show-date-nav',\n\t\t},\n\t},\n\tcalendar: {\n\t\tdateRangeType: {\n\t\t\ttype: 'string',\n\t\t\tdefault: DATE_RANGES.THIS_MONTH,\n\t\t\tattribute: 'data-date-range-type',\n\t\t},\n\t\tshowSoldOut: {\n\t\t\ttype: 'boolean',\n\t\t\tdefault: true,\n\t\t\tattribute: 'data-show-sold-out',\n\t\t},\n\t\texample: {\n\t\t\ttype: 'boolean',\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tschedule: {\n\t\tdateRangeType: {\n\t\t\ttype: 'string',\n\t\t\tdefault: DATE_RANGES.TODAY,\n\t\t\tattribute: 'data-date-range-type',\n\t\t},\n\t\tinfiniteScrollEnabled: {\n\t\t\ttype: 'boolean',\n\t\t\tdefault: true,\n\t\t\tattribute: 'data-infinite-scroll-enabled',\n\t\t},\n\t\tmaxDate: {\n\t\t\ttype: 'date',\n\t\t\tdefault: null,\n\t\t\tsource: 'attribute',\n\t\t\tselector: '.wc-bookings-availability-container',\n\t\t\tattribute: 'data-max-date',\n\t\t},\n\t\tminDate: {\n\t\t\ttype: 'date',\n\t\t\tdefault: null,\n\t\t\tsource: 'attribute',\n\t\t\tselector: '.wc-bookings-availability-container',\n\t\t\tattribute: 'data-min-date',\n\t\t},\n\t\tslotsPerPage: {\n\t\t\ttype: 'number',\n\t\t\tdefault: DEFAULT_PAGE_SIZE,\n\t\t\tattribute: 'data-slots-per-page',\n\t\t},\n\t\tshowEmptyDates: {\n\t\t\ttype: 'boolean',\n\t\t\tdefault: true,\n\t\t\tattribute: 'data-show-empty-dates',\n\t\t},\n\t},\n};\n\n/**\n * Get attribute definitions for the given block type name.\n *\n * @param {string} blockName Name of block to retrieve from (e.g. 'calendar' or 'schedule')\n *\n * @return {object} Attribute defintions for block.\n */\nexport function getAttributesDefFor( blockName ) {\n\t// Merge common attributes with the specific block attributes.\n\treturn { ...attributesDictionary.common, ...attributesDictionary[ blockName ] };\n}\n\n/**\n * Decode fontend data attributes for block props\n *\n * @param {string} blockName Name of block to retrieve from (e.g. 'calendar' or 'schedule')\n * @param {object} attributes Object data properties pulled directly from DOM.\n *\n * @return {string} Decoded attributes.\n */\nexport function decodeAttributesFor( blockName, attributes ) {\n\tconst attributesDef = getAttributesDefFor( blockName );\n\tconst decodedAttributes = {};\n\tfor ( const key of Object.keys( attributesDef ) ) {\n\t\tconst type = attributesDef[ key ].type;\n\t\t// Fill in missing values with defaults\n\t\tconst value = attributes.hasOwnProperty( key ) ? attributes[ key ] : attributesDef[ key ].default;\n\n\t\tswitch ( type ) {\n\t\t\tcase 'boolean':\n\t\t\t\tdecodedAttributes[ key ] = ( 'true' === value || true === value ) ? true : false;\n\t\t\t\tbreak;\n\t\t\tcase 'number':\n\t\t\t\tdecodedAttributes[ key ] = parseInt( value );\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tdecodedAttributes[ key ] = value;\n\t\t}\n\t}\n\treturn decodedAttributes;\n}\n","(function() { module.exports = this[\"wp\"][\"apiFetch\"]; }());","/**\n * External dependencies.\n */\nimport { createContext } from '@wordpress/element';\n\nexport default createContext( {} );\n","function _extends() {\n  module.exports = _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nmodule.exports = _extends;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","/**\n * External dependencies.\n */\nimport { createContext } from '@wordpress/element';\n\nexport default createContext( {} );\n","(function() { module.exports = this[\"wp\"][\"url\"]; }());","/**\n * External dependencies.\n */\nimport { createContext } from '@wordpress/element';\n\nexport default createContext( {} );\n","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg) && arg.length) {\n\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\tif (inner) {\n\t\t\t\t\tclasses.push(inner);\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","/**\n * External dependencies.\n */\nimport { createContext } from '@wordpress/element';\n\nexport default createContext( {} );\n","\"use strict\";\n\nvar stylesInDom = {};\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nfunction listToStyles(list, options) {\n  var styles = [];\n  var newStyles = {};\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var css = item[1];\n    var media = item[2];\n    var sourceMap = item[3];\n    var part = {\n      css: css,\n      media: media,\n      sourceMap: sourceMap\n    };\n\n    if (!newStyles[id]) {\n      styles.push(newStyles[id] = {\n        id: id,\n        parts: [part]\n      });\n    } else {\n      newStyles[id].parts.push(part);\n    }\n  }\n\n  return styles;\n}\n\nfunction addStylesToDom(styles, options) {\n  for (var i = 0; i < styles.length; i++) {\n    var item = styles[i];\n    var domStyle = stylesInDom[item.id];\n    var j = 0;\n\n    if (domStyle) {\n      domStyle.refs++;\n\n      for (; j < domStyle.parts.length; j++) {\n        domStyle.parts[j](item.parts[j]);\n      }\n\n      for (; j < item.parts.length; j++) {\n        domStyle.parts.push(addStyle(item.parts[j], options));\n      }\n    } else {\n      var parts = [];\n\n      for (; j < item.parts.length; j++) {\n        parts.push(addStyle(item.parts[j], options));\n      }\n\n      stylesInDom[item.id] = {\n        id: item.id,\n        refs: 1,\n        parts: parts\n      };\n    }\n  }\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n\n  if (typeof options.attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      options.attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(options.attributes).forEach(function (key) {\n    style.setAttribute(key, options.attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  }\n\n  if (sourceMap && btoa) {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {};\n  options.attributes = typeof options.attributes === 'object' ? options.attributes : {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  var styles = listToStyles(list, options);\n  addStylesToDom(styles, options);\n  return function update(newList) {\n    var mayRemove = [];\n\n    for (var i = 0; i < styles.length; i++) {\n      var item = styles[i];\n      var domStyle = stylesInDom[item.id];\n\n      if (domStyle) {\n        domStyle.refs--;\n        mayRemove.push(domStyle);\n      }\n    }\n\n    if (newList) {\n      var newStyles = listToStyles(newList, options);\n      addStylesToDom(newStyles, options);\n    }\n\n    for (var _i = 0; _i < mayRemove.length; _i++) {\n      var _domStyle = mayRemove[_i];\n\n      if (_domStyle.refs === 0) {\n        for (var j = 0; j < _domStyle.parts.length; j++) {\n          _domStyle.parts[j]();\n        }\n\n        delete stylesInDom[_domStyle.id];\n      }\n    }\n  };\n};","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","/**\n * External dependencies\n */\nimport momentLib from 'moment';\nimport 'moment-timezone/moment-timezone';\nimport 'moment-timezone/moment-timezone-utils';\n/** @typedef {import('moment').Moment} Moment */\n\nvar WP_ZONE = 'WP'; // This regular expression tests positive for UTC offsets as described in ISO 8601.\n// See: https://en.wikipedia.org/wiki/ISO_8601#Time_offsets_from_UTC\n\nvar VALID_UTC_OFFSET = /^[+-][0-1][0-9](:?[0-9][0-9])?$/; // Changes made here will likely need to be made in `lib/client-assets.php` as\n// well because it uses the `setSettings()` function to change these settings.\n\nvar settings = {\n  l10n: {\n    locale: 'en',\n    months: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n    monthsShort: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n    weekdays: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n    weekdaysShort: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\n    meridiem: {\n      am: 'am',\n      pm: 'pm',\n      AM: 'AM',\n      PM: 'PM'\n    },\n    relative: {\n      future: '%s from now',\n      past: '%s ago',\n      s: 'a few seconds',\n      ss: '%d seconds',\n      m: 'a minute',\n      mm: '%d minutes',\n      h: 'an hour',\n      hh: '%d hours',\n      d: 'a day',\n      dd: '%d days',\n      M: 'a month',\n      MM: '%d months',\n      y: 'a year',\n      yy: '%d years'\n    }\n  },\n  formats: {\n    time: 'g: i a',\n    date: 'F j, Y',\n    datetime: 'F j, Y g: i a',\n    datetimeAbbreviated: 'M j, Y g: i a'\n  },\n  timezone: {\n    offset: '0',\n    string: ''\n  }\n};\n/**\n * Adds a locale to moment, using the format supplied by `wp_localize_script()`.\n *\n * @param {Object} dateSettings Settings, including locale data.\n */\n\nexport function setSettings(dateSettings) {\n  settings = dateSettings; // Backup and restore current locale.\n\n  var currentLocale = momentLib.locale();\n  momentLib.updateLocale(dateSettings.l10n.locale, {\n    // Inherit anything missing from the default locale.\n    parentLocale: currentLocale,\n    months: dateSettings.l10n.months,\n    monthsShort: dateSettings.l10n.monthsShort,\n    weekdays: dateSettings.l10n.weekdays,\n    weekdaysShort: dateSettings.l10n.weekdaysShort,\n    meridiem: function meridiem(hour, minute, isLowercase) {\n      if (hour < 12) {\n        return isLowercase ? dateSettings.l10n.meridiem.am : dateSettings.l10n.meridiem.AM;\n      }\n\n      return isLowercase ? dateSettings.l10n.meridiem.pm : dateSettings.l10n.meridiem.PM;\n    },\n    longDateFormat: {\n      LT: dateSettings.formats.time,\n      LTS: null,\n      L: null,\n      LL: dateSettings.formats.date,\n      LLL: dateSettings.formats.datetime,\n      LLLL: null\n    },\n    // From human_time_diff?\n    // Set to `(number, withoutSuffix, key, isFuture) => {}` instead.\n    relativeTime: dateSettings.l10n.relative\n  });\n  momentLib.locale(currentLocale);\n  setupWPTimezone();\n}\n/**\n * Returns the currently defined date settings.\n *\n * @return {Object} Settings, including locale data.\n */\n\nexport function __experimentalGetSettings() {\n  return settings;\n}\n\nfunction setupWPTimezone() {\n  // Create WP timezone based off dateSettings.\n  momentLib.tz.add(momentLib.tz.pack({\n    name: WP_ZONE,\n    abbrs: [WP_ZONE],\n    untils: [null],\n    offsets: [-settings.timezone.offset * 60 || 0]\n  }));\n} // Date constants.\n\n/**\n * Number of seconds in one minute.\n *\n * @type {number}\n */\n\n\nvar MINUTE_IN_SECONDS = 60;\n/**\n * Number of minutes in one hour.\n *\n * @type {number}\n */\n\nvar HOUR_IN_MINUTES = 60;\n/**\n * Number of seconds in one hour.\n *\n * @type {number}\n */\n\nvar HOUR_IN_SECONDS = 60 * MINUTE_IN_SECONDS;\n/**\n * Map of PHP formats to Moment.js formats.\n *\n * These are used internally by {@link wp.date.format}, and are either\n * a string representing the corresponding Moment.js format code, or a\n * function which returns the formatted string.\n *\n * This should only be used through {@link wp.date.format}, not\n * directly.\n *\n * @type {Object}\n */\n\nvar formatMap = {\n  // Day\n  d: 'DD',\n  D: 'ddd',\n  j: 'D',\n  l: 'dddd',\n  N: 'E',\n\n  /**\n   * Gets the ordinal suffix.\n   *\n   * @param {Moment} momentDate Moment instance.\n   *\n   * @return {string} Formatted date.\n   */\n  S: function S(momentDate) {\n    // Do - D\n    var num = momentDate.format('D');\n    var withOrdinal = momentDate.format('Do');\n    return withOrdinal.replace(num, '');\n  },\n  w: 'd',\n\n  /**\n   * Gets the day of the year (zero-indexed).\n   *\n   * @param {Moment} momentDate Moment instance.\n   *\n   * @return {string} Formatted date.\n   */\n  z: function z(momentDate) {\n    // DDD - 1\n    return '' + parseInt(momentDate.format('DDD'), 10) - 1;\n  },\n  // Week\n  W: 'W',\n  // Month\n  F: 'MMMM',\n  m: 'MM',\n  M: 'MMM',\n  n: 'M',\n\n  /**\n   * Gets the days in the month.\n   *\n   * @param {Moment} momentDate Moment instance.\n   *\n   * @return {string} Formatted date.\n   */\n  t: function t(momentDate) {\n    return momentDate.daysInMonth();\n  },\n  // Year\n\n  /**\n   * Gets whether the current year is a leap year.\n   *\n   * @param {Moment} momentDate Moment instance.\n   *\n   * @return {string} Formatted date.\n   */\n  L: function L(momentDate) {\n    return momentDate.isLeapYear() ? '1' : '0';\n  },\n  o: 'GGGG',\n  Y: 'YYYY',\n  y: 'YY',\n  // Time\n  a: 'a',\n  A: 'A',\n\n  /**\n   * Gets the current time in Swatch Internet Time (.beats).\n   *\n   * @param {Moment} momentDate Moment instance.\n   *\n   * @return {string} Formatted date.\n   */\n  B: function B(momentDate) {\n    var timezoned = momentLib(momentDate).utcOffset(60);\n    var seconds = parseInt(timezoned.format('s'), 10),\n        minutes = parseInt(timezoned.format('m'), 10),\n        hours = parseInt(timezoned.format('H'), 10);\n    return parseInt((seconds + minutes * MINUTE_IN_SECONDS + hours * HOUR_IN_SECONDS) / 86.4, 10);\n  },\n  g: 'h',\n  G: 'H',\n  h: 'hh',\n  H: 'HH',\n  i: 'mm',\n  s: 'ss',\n  u: 'SSSSSS',\n  v: 'SSS',\n  // Timezone\n  e: 'zz',\n\n  /**\n   * Gets whether the timezone is in DST currently.\n   *\n   * @param {Moment} momentDate Moment instance.\n   *\n   * @return {string} Formatted date.\n   */\n  I: function I(momentDate) {\n    return momentDate.isDST() ? '1' : '0';\n  },\n  O: 'ZZ',\n  P: 'Z',\n  T: 'z',\n\n  /**\n   * Gets the timezone offset in seconds.\n   *\n   * @param {Moment} momentDate Moment instance.\n   *\n   * @return {string} Formatted date.\n   */\n  Z: function Z(momentDate) {\n    // Timezone offset in seconds.\n    var offset = momentDate.format('Z');\n    var sign = offset[0] === '-' ? -1 : 1;\n    var parts = offset.substring(1).split(':');\n    return sign * (parts[0] * HOUR_IN_MINUTES + parts[1]) * MINUTE_IN_SECONDS;\n  },\n  // Full date/time\n  c: 'YYYY-MM-DDTHH:mm:ssZ',\n  // .toISOString\n  r: 'ddd, D MMM YYYY HH:mm:ss ZZ',\n  U: 'X'\n};\n/**\n * Formats a date. Does not alter the date's timezone.\n *\n * @param {string}                  dateFormat PHP-style formatting string.\n *                                             See php.net/date.\n * @param {Date|string|Moment|null} dateValue  Date object or string,\n *                                             parsable by moment.js.\n *\n * @return {string} Formatted date.\n */\n\nexport function format(dateFormat) {\n  var dateValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Date();\n  var i, char;\n  var newFormat = [];\n  var momentDate = momentLib(dateValue);\n\n  for (i = 0; i < dateFormat.length; i++) {\n    char = dateFormat[i]; // Is this an escape?\n\n    if ('\\\\' === char) {\n      // Add next character, then move on.\n      i++;\n      newFormat.push('[' + dateFormat[i] + ']');\n      continue;\n    }\n\n    if (char in formatMap) {\n      if (typeof formatMap[char] !== 'string') {\n        // If the format is a function, call it.\n        newFormat.push('[' + formatMap[char](momentDate) + ']');\n      } else {\n        // Otherwise, add as a formatting string.\n        newFormat.push(formatMap[char]);\n      }\n    } else {\n      newFormat.push('[' + char + ']');\n    }\n  } // Join with [] between to separate characters, and replace\n  // unneeded separators with static text.\n\n\n  newFormat = newFormat.join('[]');\n  return momentDate.format(newFormat);\n}\n/**\n * Formats a date (like `date()` in PHP).\n *\n * @param {string}                  dateFormat PHP-style formatting string.\n *                                             See php.net/date.\n * @param {Date|string|Moment|null} dateValue  Date object or string, parsable\n *                                             by moment.js.\n * @param {string|number|null}      timezone   Timezone to output result in or a\n *                                             UTC offset. Defaults to timezone from\n *                                             site.\n *\n * @see https://en.wikipedia.org/wiki/List_of_tz_database_time_zones\n * @see https://en.wikipedia.org/wiki/ISO_8601#Time_offsets_from_UTC\n *\n * @return {string} Formatted date in English.\n */\n\nexport function date(dateFormat) {\n  var dateValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Date();\n  var timezone = arguments.length > 2 ? arguments[2] : undefined;\n  var dateMoment = buildMoment(dateValue, timezone);\n  return format(dateFormat, dateMoment);\n}\n/**\n * Formats a date (like `date()` in PHP), in the UTC timezone.\n *\n * @param {string}                  dateFormat PHP-style formatting string.\n *                                             See php.net/date.\n * @param {Date|string|Moment|null} dateValue  Date object or string,\n *                                             parsable by moment.js.\n *\n * @return {string} Formatted date in English.\n */\n\nexport function gmdate(dateFormat) {\n  var dateValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Date();\n  var dateMoment = momentLib(dateValue).utc();\n  return format(dateFormat, dateMoment);\n}\n/**\n * Formats a date (like `wp_date()` in PHP), translating it into site's locale.\n *\n * Backward Compatibility Notice: if `timezone` is set to `true`, the function\n * behaves like `gmdateI18n`.\n *\n * @param {string}                     dateFormat PHP-style formatting string.\n *                                                See php.net/date.\n * @param {Date|string|Moment|null}    dateValue  Date object or string, parsable by\n *                                                moment.js.\n * @param {string|number|boolean|null} timezone   Timezone to output result in or a\n *                                                UTC offset. Defaults to timezone from\n *                                                site. Notice: `boolean` is effectively\n *                                                deprecated, but still supported for\n *                                                backward compatibility reasons.\n *\n * @see https://en.wikipedia.org/wiki/List_of_tz_database_time_zones\n * @see https://en.wikipedia.org/wiki/ISO_8601#Time_offsets_from_UTC\n *\n * @return {string} Formatted date.\n */\n\nexport function dateI18n(dateFormat) {\n  var dateValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Date();\n  var timezone = arguments.length > 2 ? arguments[2] : undefined;\n\n  if (true === timezone) {\n    return gmdateI18n(dateFormat, dateValue);\n  }\n\n  if (false === timezone) {\n    timezone = undefined;\n  }\n\n  var dateMoment = buildMoment(dateValue, timezone);\n  dateMoment.locale(settings.l10n.locale);\n  return format(dateFormat, dateMoment);\n}\n/**\n * Formats a date (like `wp_date()` in PHP), translating it into site's locale\n * and using the UTC timezone.\n *\n * @param {string}                  dateFormat PHP-style formatting string.\n *                                             See php.net/date.\n * @param {Date|string|Moment|null} dateValue  Date object or string,\n *                                             parsable by moment.js.\n *\n * @return {string} Formatted date.\n */\n\nexport function gmdateI18n(dateFormat) {\n  var dateValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Date();\n  var dateMoment = momentLib(dateValue).utc();\n  dateMoment.locale(settings.l10n.locale);\n  return format(dateFormat, dateMoment);\n}\n/**\n * Check whether a date is considered in the future according to the WordPress settings.\n *\n * @param {string} dateValue Date String or Date object in the Defined WP Timezone.\n *\n * @return {boolean} Is in the future.\n */\n\nexport function isInTheFuture(dateValue) {\n  var now = momentLib.tz(WP_ZONE);\n  var momentObject = momentLib.tz(dateValue, WP_ZONE);\n  return momentObject.isAfter(now);\n}\n/**\n * Create and return a JavaScript Date Object from a date string in the WP timezone.\n *\n * @param {string?} dateString Date formatted in the WP timezone.\n *\n * @return {Date} Date\n */\n\nexport function getDate(dateString) {\n  if (!dateString) {\n    return momentLib.tz(WP_ZONE).toDate();\n  }\n\n  return momentLib.tz(dateString, WP_ZONE).toDate();\n}\n/**\n * Creates a moment instance using the given timezone or, if none is provided, using global settings.\n *\n * @param {Date|string|Moment|null} dateValue Date object or string, parsable\n *                                            by moment.js.\n * @param {string|number|null}      timezone  Timezone to output result in or a\n *                                            UTC offset. Defaults to timezone from\n *                                            site.\n *\n * @see https://en.wikipedia.org/wiki/List_of_tz_database_time_zones\n * @see https://en.wikipedia.org/wiki/ISO_8601#Time_offsets_from_UTC\n *\n * @return {Moment} a moment instance.\n */\n\nfunction buildMoment(dateValue) {\n  var timezone = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  var dateMoment = momentLib(dateValue);\n\n  if (timezone && !isUTCOffset(timezone)) {\n    return dateMoment.tz(timezone);\n  }\n\n  if (timezone && isUTCOffset(timezone)) {\n    return dateMoment.utcOffset(timezone);\n  }\n\n  if (settings.timezone.string) {\n    return dateMoment.tz(settings.timezone.string);\n  }\n\n  return dateMoment.utcOffset(settings.timezone.offset);\n}\n/**\n * Returns whether a certain UTC offset is valid or not.\n *\n * @param {number|string} offset a UTC offset.\n *\n * @return {boolean} whether a certain UTC offset is valid or not.\n */\n\n\nfunction isUTCOffset(offset) {\n  if ('number' === typeof offset) {\n    return true;\n  }\n\n  return VALID_UTC_OFFSET.test(offset);\n}\n\nsetupWPTimezone();\n//# sourceMappingURL=index.js.map","/**\n * External dependencies\n */\nimport { useState } from '@wordpress/element';\nimport { PropTypes } from 'prop-types';\nimport { __ } from '@wordpress/i18n';\nimport apiFetch from '@wordpress/api-fetch';\nimport moment from 'moment';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\n\nconst BookButton = ( props ) => {\n\tconst [ loading, setLoading ] = useState( false );\n\n\tconst onClickBookButton = () => {\n\t\tconst { availability, date, hasPersons, hasResources, productId, permalink } = props;\n\t\tsetLoading( true );\n\n\t\tif ( hasPersons || hasResources || ( 1 < availability.length ) ) {\n\t\t\twindow.location.href = permalink;\n\t\t} else if ( 1 === availability.length ) {\n\t\t\tapiFetch( {\n\t\t\t\t// eslint-disable-next-line no-undef\n\t\t\t\turl: wc_bookings_availability_args.ajax_url + '=wc_bookings_add_booking_to_cart' + '&product_id=' + productId + '&date=' + encodeURIComponent( moment( date ).format( 'YYYY-MM-DDTHH:mm' ) ) + '&security=' + wc_bookings_availability_args.nonces.add_booking_to_cart,\n\t\t\t} )\n\t\t\t\t.then( ( data ) => {\n\t\t\t\t\tif ( data.booked ) {\n\t\t\t\t\t\tsetLoading( false );\n\t\t\t\t\t\t// eslint-disable-next-line no-undef\n\t\t\t\t\t\twindow.location.href = wc_bookings_availability_args.checkout_url;\n\t\t\t\t\t} else {\n\t\t\t\t\t\twindow.location.href = data.link;\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t}\n\t};\n\n\tconst onClickMoreDetails = () => {\n\t\tconst { permalink, isPreview } = props;\n\n\t\tif ( isPreview ) {\n\t\t\treturn false;\n\t\t}\n\n\t\twindow.location.href = permalink;\n\t};\n\n\tconst { availability, hasPersons, hasResources, permalink, durationType, isPreview } = props;\n\n\tlet showDetails = false;\n\tlet buttonText;\n\tconst buttonClassName = 'wp-block-button__link wc-bookings-availability-book-button';\n\n\tif ( hasPersons || hasResources || 1 < availability.length || 'customer' === durationType ) {\n\t\tbuttonText = __( 'Select options', 'woocommerce-bookings-availability' );\n\t} else if ( 1 === availability.length ) {\n\t\tbuttonText = __( 'Book now', 'woocommerce-bookings-availability' );\n\t\tshowDetails = true;\n\t}\n\n\treturn ( <div className=\"wc-bookings-availability-book-button-container wp-block-button\">\n\t\t{ showDetails && <a href={ permalink } className=\"wc-bookings-availability-book-button-more-details\" onClick={ onClickMoreDetails }>{ __( 'More details', 'woocommerce-bookings-availability' ) } </a> }\n\t\t{ ( isPreview ) ? (\n\t\t\t<span className={ buttonClassName }>\n\t\t\t\t{ buttonText }\n\t\t\t</span>\n\t\t) : (\n\t\t\t<button onClick={ onClickBookButton } disabled={ loading } className={ buttonClassName }>\n\t\t\t\t{ buttonText }\n\t\t\t</button>\n\t\t) }\n\t</div> );\n};\n\nBookButton.propTypes = {\n\t/**\n\t * Number of events available\n\t */\n\tavailability: PropTypes.array.isRequired,\n\t/**\n\t * Date of the event\n\t */\n\tdate: PropTypes.string.isRequired,\n\t/**\n\t * Whether or not this booking has persons\n\t */\n\thasPersons: PropTypes.bool,\n\t/**\n\t * Whether or not this booking has resources\n\t */\n\thasResources: PropTypes.bool,\n\t/**\n\t * Products permalink\n\t */\n\tpermalink: PropTypes.string.isRequired,\n\t/**\n\t * Id of the product\n\t */\n\tproductId: PropTypes.string.isRequired,\n\n\tdurationType: PropTypes.string,\n\tisPreview: PropTypes.bool,\n};\n\nexport default BookButton;\n","/**\n * External dependencies\n */\nimport { Popover } from '@wordpress/components';\nimport { RawHTML } from '@wordpress/element';\nimport { PropTypes } from 'prop-types';\nimport moment from 'moment';\nimport { sprintf, __, _n } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport BookButton from '../book-button';\nimport { convertDate, formatDuration, CONVERT_DIRECTIONS } from '../../includes/date-utils';\n\nconst EventCalendarItemPopover = ( props ) => {\n\tconst renderEventTime = ( product, availability ) => {\n\t\tif ( 1 < availability.length ) {\n\t\t\treturn __( 'Multiple times available', 'woocommerce-bookings-availability' );\n\t\t} else if ( 1 === availability.length ) {\n\t\t\tconst { date } = availability[ 0 ];\n\t\t\treturn formatDuration( product, date );\n\t\t}\n\t};\n\n\tconst {\n\t\tdate,\n\t\tproductId,\n\t\tproductName,\n\t\tproduct,\n\t\tavailability,\n\t\tprice,\n\t\thasPersons,\n\t\thasResources,\n\t\tpermalink,\n\t\tdurationType,\n\t\tisPreview,\n\t} = props;\n\tconst formattedDate = moment( date ).format( 'dddd, MMMM Do' );\n\tconst bookButtonProps = {\n\t\tavailability,\n\t\thasPersons,\n\t\thasResources,\n\t\tproductId,\n\t\tdate: availability.length ? ( availability[ 0 ].date || date ) : date,\n\t\tpermalink,\n\t\tdurationType,\n\t\tisPreview,\n\t};\n\n\t// Convert current date from local to server\n\tconst currentDate = convertDate( moment(), CONVERT_DIRECTIONS.LOCAL_TO_SERVER );\n\tconst isNotPast = ( a ) => {\n\t\treturn 'day' === product.durationUnit ? moment.tz( a.date, wc_bookings_availability_args.server_timezone ).isSameOrAfter( currentDate, 'day' ) : moment.tz( a.date, wc_bookings_availability_args.server_timezone ).isAfter( currentDate );\n\t};\n\n\t// The API returns the date in UTC\n\tconst availableSlots = availability\n\t\t.filter( ( a ) => a.available && isNotPast( a ) )\n\t\t.reduce( ( sum, slot ) => sum + slot.available, 0 );\n\n\treturn (\n\t\t<Popover\n\t\t\tclassName=\"wc-bookings-availability-popover\"\n\t\t\tposition={ 'bottom center' }\n\t\t\tfocusOnMount={ 'false' }\n\t\t>\n\t\t\t<table\n\t\t\t\tclassName=\"wc-bookings-availability-popover-container\"\n\t\t\t>\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th colSpan=\"2\" className=\"wc-bookings-availability-popover-container-title\">\n\t\t\t\t\t\t\t<h4>{ productName }</h4>\n\t\t\t\t\t\t\t{ /* translators: $d number of available slots */ }\n\t\t\t\t\t\t\t<em>{ sprintf( _n( `%d slot available`, `%d slots available`, availableSlots, 'woocommerce-bookings-availability' ), availableSlots ) }</em>\n\t\t\t\t\t\t</th>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td className=\"wc-bookings-availability-popover-container-label\"><strong>{ __( 'Date', 'woocommerce-bookings-availability' ) }</strong></td>\n\t\t\t\t\t\t<td className=\"wc-bookings-availability-popover-container-value\">{ formattedDate }</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td className=\"wc-bookings-availability-popover-container-label\"><strong>{ __( 'Time', 'woocommerce-bookings-availability' ) }</strong></td>\n\t\t\t\t\t\t<td className=\"wc-bookings-availability-popover-container-value\">{ renderEventTime( product, availability ) }</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td className=\"wc-bookings-availability-popover-container-label\"><strong>{ __( 'Price', 'woocommerce-bookings-availability' ) }</strong></td>\n\t\t\t\t\t\t<td className=\"wc-bookings-availability-popover-container-value\"><RawHTML>{ price }</RawHTML></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody>\n\t\t\t\t<tfoot>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th colSpan=\"2\" className=\"wc-bookings-availability-popover-container-button\">\n\t\t\t\t\t\t\t<BookButton { ...bookButtonProps } />\n\t\t\t\t\t\t</th>\n\t\t\t\t\t</tr>\n\t\t\t\t</tfoot>\n\t\t\t</table>\n\t\t</Popover>\n\t);\n};\n\nEventCalendarItemPopover.propTypes = {\n\t/**\n\t * Date of the event\n\t */\n\tdate: PropTypes.object.isRequired,\n\t/**\n\t * Id of the product\n\t */\n\tproductId: PropTypes.string.isRequired,\n\t/**\n\t * Name of the product\n\t */\n\tproductName: PropTypes.string.isRequired,\n\t/**\n\t * Number of events available\n\t */\n\tavailability: PropTypes.array.isRequired,\n\t/**\n\t * Product information.\n\t */\n\tproduct: PropTypes.object,\n\n\tdurationType: PropTypes.string,\n\t/**\n\t * Product's price\n\t */\n\tprice: PropTypes.string.isRequired,\n\t/**\n\t * Whether or not this booking has persons\n\t */\n\thasPersons: PropTypes.bool,\n\t/**\n\t * Whether or not this booking has resources\n\t */\n\thasResources: PropTypes.bool,\n\t/**\n\t * Products permalink\n\t */\n\tpermalink: PropTypes.string.isRequired,\n\n\tisPreview: PropTypes.bool,\n};\n\nexport default EventCalendarItemPopover;\n","/**\n * External dependencies\n */\nimport { useState, useContext, useRef } from '@wordpress/element';\nimport { PropTypes } from 'prop-types';\nimport { __ } from '@wordpress/i18n';\nimport moment from 'moment';\nimport { some } from 'lodash';\n\n/**\n * Internal dependencies\n */\nimport EventCalendarItemPopover from './popover';\nimport calendarContext from '../../blocks/bookings-calendar/context/context';\nimport { getIsRestrictedDay } from '../../includes/date-utils';\n\nconst EventCalendarItem = ( props ) => {\n\tconst {\n\t\tshowSoldOut,\n\t} = useContext( calendarContext );\n\n\tconst [ showPopover, setShowPopover ] = useState( false );\n\n\tconst linkRef = useRef( null );\n\n\tconst handleCalendarItemMouseEnter = () => {\n\t\tsetShowPopover( true );\n\t\tlinkRef.current.focus();\n\t};\n\n\tconst handleCalendarItemMouseLeave = () => {\n\t\tsetShowPopover( false );\n\t};\n\n\tconst getIsSoldOut = ( availability ) => {\n\t\tif ( 1 > availability.length ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tlet booked = 0;\n\t\tlet available = 0;\n\n\t\t/*\n\t\t * To determine if all slots are\n\t\t * booked and therefore soldout,\n\t\t * we must check for 0 available and\n\t\t * 1 or more booked.\n\t\t */\n\t\tavailability.forEach( ( slot ) => {\n\t\t\tbooked += parseInt( slot.booked, 10 );\n\t\t\tavailable += parseInt( slot.available, 10 );\n\t\t} );\n\n\t\tif ( 0 === available && 0 < booked ) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tconst onDummyClick = ( e ) => {\n\t\te.preventDefault();\n\t};\n\n\tconst {\n\t\tisPreview,\n\t\tdate,\n\t\tavailability,\n\t\tproduct,\n\t\tproduct: {\n\t\t\tid,\n\t\t\tname,\n\t\t\tduration_type: durationType,\n\t\t\tprice_html: priceHtml,\n\t\t\thas_persons: hasPersons,\n\t\t\thas_resources: hasResources,\n\t\t\tpermalink,\n\t\t},\n\t} = props;\n\tconst available = 0 < availability.length;\n\tconst isSoldOut = getIsSoldOut( availability );\n\tconst isRestrictedDay = getIsRestrictedDay( date, product );\n\n\tif ( isRestrictedDay || ( isSoldOut && ! showSoldOut ) ) {\n\t\treturn null;\n\t}\n\n\tconst now = moment();\n\tconst isPastDate = ! some( availability, ( slot ) => {\n\t\tif ( 'day' === product.durationUnit ) {\n\t\t\treturn now.isSameOrBefore( slot.date, 'day' );\n\t\t}\n\t\treturn now.isBefore( slot.date );\n\t} );\n\n\tif ( available && ! isSoldOut && ! isPastDate ) {\n\t\treturn (\n\t\t\t<div className={ 'wc-bookings-availability-calendar-day-item ' + ( showPopover && 'wc-bookings-availability-calendar-day-item__focused' ) }>\n\t\t\t\t{ /* eslint-disable-next-line jsx-a11y/anchor-is-valid */ }\n\t\t\t\t<a href=\"#\"\n\t\t\t\t\tclassName=\"wc-bookings-availability-calendar-day-item-title\"\n\t\t\t\t\tonMouseEnter={ handleCalendarItemMouseEnter }\n\t\t\t\t\tonMouseLeave={ handleCalendarItemMouseLeave }\n\t\t\t\t\tonClick={ onDummyClick }\n\t\t\t\t\tref={ linkRef }\n\t\t\t\t>\n\t\t\t\t\t{ name }\n\t\t\t\t\t{ showPopover &&\n\t\t\t\t\t\t<EventCalendarItemPopover\n\t\t\t\t\t\t\tdate={ date }\n\t\t\t\t\t\t\tproductId={ id }\n\t\t\t\t\t\t\tproductName={ name }\n\t\t\t\t\t\t\tproduct={ product }\n\t\t\t\t\t\t\tavailability={ availability }\n\t\t\t\t\t\t\tdurationType={ durationType }\n\t\t\t\t\t\t\tprice={ priceHtml }\n\t\t\t\t\t\t\thasPersons={ hasPersons }\n\t\t\t\t\t\t\thasResources={ hasResources }\n\t\t\t\t\t\t\tpermalink={ permalink }\n\t\t\t\t\t\t\tisPreview={ isPreview }\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tif ( available && isSoldOut ) {\n\t\treturn (\n\t\t\t<div className=\"wc-bookings-availability-calendar-day-item wc-bookings-availability-calendar-day-item__sold-out\">\n\t\t\t\t<div className=\"wc-bookings-availability-calendar-day-item-title\">\n\t\t\t\t\t{ name }\n\t\t\t\t\t{ ' ' }\n\t\t\t\t\t{ __( '(Sold out)', 'woocommerce-bookings-availability' ) }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tif ( available && isPastDate ) {\n\t\treturn (\n\t\t\t<div className=\"wc-bookings-availability-calendar-day-item wc-bookings-availability-calendar-day-item__past-date\">\n\t\t\t\t<div className=\"wc-bookings-availability-calendar-day-item-title\">\n\t\t\t\t\t{ name }\n\t\t\t\t\t{ ' ' }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn null;\n};\n\nEventCalendarItem.propTypes = {\n\t/**\n\t * Availability data from wc_bookings_find_booking_slots ajax endpoint.\n\t */\n\tavailability: PropTypes.array.isRequired,\n\t/**\n\t * Product information.\n\t */\n\tproduct: PropTypes.object,\n\t/**\n\t * Sets up component for in-editor preview if true.\n\t */\n\tisPreview: PropTypes.bool,\n\n\tshowSoldOut: PropTypes.bool,\n\n\tindex: PropTypes.number,\n\n\tdate: PropTypes.object.isRequired,\n};\n\nexport default EventCalendarItem;\n","/**\n * External dependencies\n */\nimport { date as formatTime } from '@wordpress/date';\nimport { useContext, useState, useEffect } from '@wordpress/element';\nimport { PropTypes } from 'prop-types';\nimport moment from 'moment';\nimport { filter, mapValues, transform } from 'lodash';\nimport { __ } from '@wordpress/i18n';\nimport classNames from 'classnames';\nimport { withViewportMatch } from '@wordpress/viewport';\nimport memorize from 'memorize-one';\n\n/**\n * Internal dependencies\n */\nimport EventCalendarItem from '../../components/event-calendar-item';\nimport { getDayOfWeek, getCalStartEndTime, formatDateQueryLimits, DATE_RANGES, DATE_QUERY_FORMAT } from '../../includes/date-utils';\nimport { EventTable } from '../event-table';\nimport productsContext from '../../blocks/products-context/context';\nimport calendarContext from '../../blocks/bookings-calendar/context/context';\nimport availabilityContext from '../../blocks/availability-context/context';\nimport commonContext from '../../blocks/common-context/context';\n\nconst EventCalendar = ( props ) => {\n\tconst [ selectedDate, setSelectedDate ] = useState( moment().format( 'YYYY-MM-DD' ) );\n\n\tconst {\n\t\trequestProducts,\n\t\tgetProducts,\n\t\tproducts,\n\t\tproductsRequesting,\n\t\tproductsError,\n\t} = useContext( productsContext );\n\n\tconst {\n\t\tdateRangeType,\n\t} = useContext( calendarContext );\n\n\tconst {\n\t\tavailabilityRequesting,\n\t\tgetAvailability,\n\t\trequestAvailability,\n\t\tavailabilityError,\n\t\thasResultsForQuery,\n\t} = useContext( availabilityContext );\n\n\tconst {\n\t\tresetOffset,\n\t\toffset,\n\t} = useContext( commonContext );\n\n\tconst { isSmallViewport } = props;\n\tconst startEndTimes = getCalStartEndTime( dateRangeType, offset );\n\tconst { minDate, maxDate, currentMonth } = startEndTimes;\n\tconst { minDate: queryMinDate, maxDate: queryMaxDate } = formatDateQueryLimits( startEndTimes.minDate, startEndTimes.maxDate );\n\tconst isError = productsError || availabilityError;\n\tconst isRequesting = productsRequesting || availabilityRequesting;\n\n\tconst availabilityQuery = {\n\t\tproductIds: props.productIds,\n\t\tcategoryIds: props.categoryIds,\n\t\tresourceIds: props.resourceIds,\n\t\tminDate: queryMinDate,\n\t\tmaxDate: queryMaxDate,\n\t};\n\n\tconst productsQuery = {\n\t\tproductIds: props.productIds,\n\t};\n\n\tuseEffect( () => {\n\t\tresetOffset();\n\t}, [ dateRangeType ] );\n\n\tuseEffect( () => {\n\t\tif( offset === 0 ) {\n\t\t\tsetSelectedDate( moment().format( 'YYYY-MM-DD' ) );\n\t\t} else {\n\t\t\tsetSelectedDate( moment().add( offset, 'months' ).startOf( 'month' ).format( 'YYYY-MM-DD' ) );\n\t\t}\n\t}, [ offset ] );\n\n\tuseEffect( () => {\n\t\tif ( ! productsRequesting && getProducts().count === false ) {\n\t\t\trequestProducts( productsQuery );\n\t\t}\n\n\t\tif ( ! availabilityRequesting && ! hasResultsForQuery( availabilityQuery ) && ! isError ) {\n\t\t\trequestAvailability( availabilityQuery );\n\t\t}\n\t}, [ offset, isSmallViewport, dateRangeType, availabilityRequesting ] );\n\n\tconst tryAgain = () => {\n\t\trequestAvailability( availabilityQuery );\n\t};\n\n\tconst filterAvailability = memorize(\n\t\t( availability, _dateRangeType, _isSmallViewport ) => {\n\t\t\tif ( DATE_RANGES.THIS_WEEK === _dateRangeType && ! _isSmallViewport ) {\n\t\t\t\treturn transformAvailabilityForWeekView( availability );\n\t\t\t}\n\t\t\treturn transformAvailabilityForMonthView( availability );\n\t\t}\n\t);\n\n\tconst availability = filterAvailability( getAvailability( availabilityQuery ), dateRangeType, isSmallViewport );\n\n\t/*\n\t* Globally set locale for moment.\n\t*/\n\tmoment.locale( wc_bookings_availability_args.locale );\n\n\tconst howManyWeeks = () => {\n\t\treturn moment( maxDate ).startOf( 'day' ).diff( moment( minDate ).endOf( 'day' ), 'week' ) + 1;\n\t};\n\n\tconst renderHeader = () => {\n\t\tconst weekView = dateRangeType === DATE_RANGES.THIS_WEEK;\n\n\t\tif ( weekView && isSmallViewport ) {\n\t\t\treturn '';\n\t\t}\n\n\t\tconst shift = weekView ? 1 : 0;\n\t\tconst wpStartOfWeek = parseInt( wc_bookings_availability_args.start_of_week, 10 );\n\t\tconst header = [];\n\t\tlet startOfWeek = wpStartOfWeek === 0 ? 7 : wpStartOfWeek;\n\t\tconst date = moment( minDate );\n\n\t\tfor ( let i = 1 + shift; i <= 7 + shift; i++ ) {\n\t\t\tconst style = {\n\t\t\t\tgridRow: '1 / 1',\n\t\t\t\tgridColumn: `${ i } / ${ i }`,\n\t\t\t};\n\t\t\tconst day = startOfWeek++;\n\t\t\tstartOfWeek = startOfWeek === 8 ? 1 : startOfWeek;\n\t\t\tconst dayNumber = weekView ? ( ' ' + date.format( 'DD' ) ) : '';\n\t\t\tdate.add( 1, 'day' );\n\t\t\tconst key = `day-of-week-${ i }`;\n\t\t\theader.push( <div className=\"wc-bookings-availability-calendar-header-item\" key={ key } style={ style } >{ getDayOfWeek( day ) + dayNumber }</div> );\n\t\t}\n\n\t\treturn header;\n\t};\n\n\tconst renderCalendarMonthDays = () => {\n\t\tconst { isPreview } = props;\n\n\t\tconst calendarDays = [];\n\t\tlet number = 0;\n\n\t\tlet headerStyle = {};\n\t\tlet dayStyle = {};\n\n\t\t// How many possible rows single calendar day has.\n\t\tconst rowsPerDay = isSmallViewport ? 1 : 6;\n\n\t\tconst start = moment( minDate );\n\t\tconst end = moment( maxDate );\n\n\t\twhile ( start.isSameOrBefore( end, 'day' ) ) {\n\t\t\tconst column = ( number % 7 ) + 1;\n\n\t\t\tif ( ! isSmallViewport ) {\n\t\t\t\tconst rowIndex = ~~( number / 7 ); // eslint-disable-line no-bitwise\n\t\t\t\theaderStyle = {\n\t\t\t\t\tgridColumn: `${ column } / ${ column }`,\n\t\t\t\t\tgridRow: `${ ( rowIndex * rowsPerDay ) + 2 } / span 1`,\n\t\t\t\t};\n\t\t\t\tdayStyle = {\n\t\t\t\t\tgridColumn: `${ column } / ${ column }`,\n\t\t\t\t\tgridRow: `${ ( rowIndex * rowsPerDay ) + 3 } / span ${ rowsPerDay - 1 }`,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tconst date = moment( start ).format( 'YYYY-MM-DD' );\n\t\t\tconst day = start.date();\n\t\t\tconst dayString = ( day === 1 && ! isSmallViewport ? start.format( 'MMM' ) + ' ' : '' ) + day;\n\n\t\t\tconst headerKey = `header-key-${ number }`;\n\t\t\tconst dayKey = `day-key-${ number }`;\n\n\t\t\tconst headerClass = classNames( 'wc-bookings-availability-cal-date', {\n\t\t\t\t'wc-bookings-availability-cal-date-other-month': ! moment( date ).isSame( currentMonth, 'month' ),\n\t\t\t\t'wc-bookings-availability-first-in-row': 1 === column,\n\t\t\t\t'wc-bookings-availability-selected-date': selectedDate === date,\n\t\t\t\t'wc-bookings-availability-has-no-items': ! availability[ date ] && ! isRequesting,\n\t\t\t} );\n\n\t\t\tif ( isSmallViewport ) {\n\t\t\t\tcalendarDays.push(\n\t\t\t\t\t<span\n\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\ttabIndex=\"0\"\n\t\t\t\t\t\tonKeyDown={ ( e ) => 'Enter' === e.key || ' ' === e.key ? setSelectedDate( date ) : '' }\n\t\t\t\t\t\tonClick={ () => setSelectedDate( date ) }\n\t\t\t\t\t\tkey={ headerKey }\n\t\t\t\t\t\tstyle={ headerStyle }\n\t\t\t\t\t\tclassName={ headerClass }>\n\t\t\t\t\t\t{ dayString }\n\t\t\t\t\t</span> );\n\t\t\t} else {\n\t\t\t\tcalendarDays.push( <span key={ headerKey }\n\t\t\t\t\tstyle={ headerStyle } className={ headerClass }>{ dayString }</span> );\n\t\t\t}\n\n\t\t\tconst dayClassName = classNames( 'wc-bookings-availability-calendar-day', { 'wc-bookings-availability-first-in-row': 1 === column } );\n\n\t\t\tif ( ! isSmallViewport ) {\n\t\t\t\tlet dayMarkup;\n\n\t\t\t\tif ( isRequesting ) {\n\t\t\t\t\tdayMarkup = (\n\t\t\t\t\t\t<div key={ dayKey } style={ dayStyle } className={ dayClassName }>\n\t\t\t\t\t\t\t<div className={ 'wc-bookings-availability-calendar-day-item wc-bookings-availability-calendar-day-item-placeholder' }>\n\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tdayMarkup = (\n\t\t\t\t\t\t<div key={ dayKey } style={ dayStyle } className={ dayClassName }>\n\t\t\t\t\t\t\t{ productsWithAvailabilityOnDay( products, availability, date ).map( ( [ product, productAvailability ], index ) => (\n\t\t\t\t\t\t\t\t<EventCalendarItem\n\t\t\t\t\t\t\t\t\tisPreview={ isPreview }\n\t\t\t\t\t\t\t\t\tkey={ index }\n\t\t\t\t\t\t\t\t\tavailability={ productAvailability }\n\t\t\t\t\t\t\t\t\tisRequesting={ isRequesting }\n\t\t\t\t\t\t\t\t\tproduct={ product }\n\t\t\t\t\t\t\t\t\tdate={ start.toDate() }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) ) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tcalendarDays.push( dayMarkup );\n\t\t\t}\n\n\t\t\t// Loop increments.\n\t\t\tnumber++;\n\t\t\tstart.add( 1, 'day' );\n\t\t}\n\n\t\treturn calendarDays;\n\t};\n\n\tconst renderCalendarWeekDays = () => {\n\t\tconst { isPreview } = props;\n\n\t\t// Add placeholder availability while requesting.\n\t\tconst weekAvailability = ( ! isRequesting ) ? availability : { '00': null };\n\n\t\tconst calendarItems = [];\n\t\tconst format = wc_bookings_availability_args.time_format.replace( ':i', '' );\n\t\tfor ( const hour in weekAvailability ) {\n\t\t\tconst hourRow = parseInt( hour, 10 ) + 2;\n\t\t\tconst hourStyle = {\n\t\t\t\tgridColumn: `${ 1 } / ${ 1 }`,\n\t\t\t\tgridRow: `${ hourRow } /  ${ hourRow }`,\n\t\t\t};\n\t\t\tconst time = formatTime( format, moment().hour( hour ) );\n\t\t\tconst hourKey = `hour-key-${ hour }`;\n\t\t\t// Hide hour label while requesting.\n\t\t\tconst hourColumnMarkup = ( ! isRequesting ) ? (\n\t\t\t\t<span className=\"wc-bookings-availability-calendar-week-hour\"style={ hourStyle } key={ hourKey } >{ time }</span>\n\t\t\t) : null;\n\n\t\t\t// Hours column.\n\t\t\tcalendarItems.push( hourColumnMarkup );\n\n\t\t\tconst start = moment( minDate );\n\t\t\tconst end = moment( maxDate );\n\t\t\tlet column = 1; // Column 1 is for hours.\n\t\t\tconst days = weekAvailability[ hour ] || {};\n\n\t\t\twhile ( start.isSameOrBefore( end, 'day' ) ) {\n\t\t\t\tconst date = moment( start ).format( 'YYYY-MM-DD' );\n\t\t\t\tcolumn++;\n\n\t\t\t\tconst hourDateKey = `hour-day-key-${ hour }-${ date }`;\n\t\t\t\tconst hourDateStyle = {\n\t\t\t\t\tgridColumn: `${ column } / ${ column }`,\n\t\t\t\t\tgridRow: `${ hourRow } /  ${ hourRow }`,\n\t\t\t\t};\n\n\t\t\t\tif ( isRequesting ) {\n\t\t\t\t\t// Loading placeholder.\n\t\t\t\t\tcalendarItems.push(\n\t\t\t\t\t\t<div key={ hourDateKey } style={ hourDateStyle } className=\"wc-bookings-availability-calendar-day\">\n\t\t\t\t\t\t\t<div className={ 'wc-bookings-availability-calendar-day-item wc-bookings-availability-calendar-day-item-placeholder' }>\n\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t\t// Advance to the next day.\n\t\t\t\t\tstart.add( 1, 'day' );\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif ( ! ( date in days ) ) {\n\t\t\t\t\t// Nothing todo here. Use empty container ( for styling ) and go to the next day.\n\t\t\t\t\tcalendarItems.push( <span key={ hourDateKey } style={ hourDateStyle } className=\"wc-bookings-availability-calendar-day\" /> );\n\t\t\t\t\t// Advance to the next day.\n\t\t\t\t\tstart.add( 1, 'day' );\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst slots = weekAvailability[ hour ][ date ];\n\t\t\t\tconst loadMore = slots.length < weekAvailability[ hour ][ date ].length;\n\n\t\t\t\tconst hourMarkup = (\n\t\t\t\t\t<div key={ hourDateKey } style={ hourDateStyle } className=\"wc-bookings-availability-calendar-day\">\n\t\t\t\t\t\t{ productsWithAvailabilityOnDayHour( products, slots ).map( ( [ product, productAvailability ], index ) => (\n\t\t\t\t\t\t\t<EventCalendarItem\n\t\t\t\t\t\t\t\tisPreview={ isPreview }\n\t\t\t\t\t\t\t\tkey={ index }\n\t\t\t\t\t\t\t\tavailability={ productAvailability }\n\t\t\t\t\t\t\t\tisRequesting={ isRequesting }\n\t\t\t\t\t\t\t\tproduct={ product }\n\t\t\t\t\t\t\t\tdate={ start.toDate() }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) ) }\n\t\t\t\t\t\t{ loadMore && <div>{ 'Load more.' }</div> }\n\t\t\t\t\t</div>\n\t\t\t\t);\n\n\t\t\t\tcalendarItems.push( hourMarkup );\n\t\t\t\t// Advance to the next day.\n\t\t\t\tstart.add( 1, 'day' );\n\t\t\t}\n\t\t}\n\t\treturn calendarItems;\n\t};\n\n\tconst renderCalendarWeekDaysSmallViewport = () => {\n\t\tconst start = moment( minDate );\n\t\tconst end = moment( maxDate );\n\n\t\tconst calendarDays = [];\n\n\t\twhile ( start.isSameOrBefore( end, 'day' ) ) {\n\t\t\tconst date = moment( start ).format( 'YYYY-MM-DD' );\n\n\t\t\tconst day = start.date();\n\t\t\tconst dayString = start.format( 'ddd' );\n\n\t\t\tconst headerKey = `header-key-${ day }`;\n\n\t\t\tconst headerClass = classNames( 'wc-bookings-availability-cal-date', {\n\t\t\t\t'wc-bookings-availability-selected-date': selectedDate === date,\n\t\t\t\t'wc-bookings-availability-has-no-items': ! availability[ date ] && ! isRequesting,\n\t\t\t} );\n\n\t\t\tcalendarDays.push(\n\t\t\t\t<span\n\t\t\t\t\trole=\"button\"\n\t\t\t\t\ttabIndex=\"0\"\n\t\t\t\t\tonKeyDown={ ( e ) => 'Enter' === e.key || ' ' === e.key ? setSelectedDate( date ) : '' }\n\t\t\t\t\tonClick={ () => setSelectedDate( date ) }\n\t\t\t\t\tkey={ headerKey }\n\t\t\t\t\tclassName={ headerClass }>\n\t\t\t\t\t{ dayString }<br />{ day }\n\t\t\t\t</span> );\n\n\t\t\tstart.add( 1, 'day' );\n\t\t}\n\t\treturn calendarDays;\n\t};\n\n\tconst renderDays = () => {\n\t\tif ( DATE_RANGES.THIS_WEEK === dateRangeType ) {\n\t\t\tif ( isSmallViewport ) {\n\t\t\t\treturn renderCalendarWeekDaysSmallViewport();\n\t\t\t}\n\t\t\treturn renderCalendarWeekDays();\n\t\t}\n\t\treturn renderCalendarMonthDays();\n\t};\n\n\tlet calendarClass = classNames( 'wc-bookings-availability-calendar', {\n\t\t'wc-bookings-availability-calendar-week-view': DATE_RANGES.THIS_WEEK === dateRangeType,\n\t\t'wc-bookings-availability-calendar-small': isSmallViewport,\n\t\t'wc-bookings-availability-calendar-requesting': isRequesting,\n\t} );\n\n\tif ( DATE_RANGES.THIS_MONTH === dateRangeType ) {\n\t\tconst numOfWeeks = howManyWeeks();\n\t\tcalendarClass = classNames( calendarClass, {\n\t\t\t'wc-bookings-availability-calendar-4-rows-month': 4 === numOfWeeks,\n\t\t\t'wc-bookings-availability-calendar-5-rows-month': 5 === numOfWeeks,\n\t\t\t'wc-bookings-availability-calendar-6-rows-month': 6 === numOfWeeks,\n\t\t} );\n\t}\n\n\tconst calendarContainerClass = classNames( 'wc-bookings-availability-calendar-container', {\n\t\t'wc-bookings-availability-calendar-container-week-view': DATE_RANGES.THIS_WEEK === dateRangeType,\n\t\t'wc-bookings-availability-calendar-container-month-view': DATE_RANGES.THIS_MONTH === dateRangeType,\n\t\t'wc-bookings-availability-calendar-container-small': isSmallViewport,\n\t} );\n\n\treturn isError ?\n\t\t(\n\t\t\t<div className=\"woocommerce-error notice notice-error\">\n\t\t\t\t{ __( 'We weren\\'t able to load the store calendar.', 'woocommerce-bookings-availability' ) }\n\t\t\t\t{ ' ' }\n\t\t\t\t<a href=\"#\" onClick={ tryAgain }>{ __( 'Try again', 'woocommerce-bookings-availability' ) }</a> { /* eslint-disable-line jsx-a11y/anchor-is-valid */ }\n\t\t\t</div>\n\t\t) : (\n\t\t\t<div>\n\t\t\t\t<div className={ calendarContainerClass }>\n\t\t\t\t\t<div className={ calendarClass }>\n\t\t\t\t\t\t{ renderHeader() }\n\t\t\t\t\t\t{ renderDays() }\n\t\t\t\t\t\t{ isRequesting ? <div className=\"wc-bookings-availability-calendar-container-loading-animation\"><div></div></div> : '' }\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{\n\t\t\t\t\tisSmallViewport ? <EventTable\n\t\t\t\t\t\tminDate={ moment( selectedDate ).startOf( 'day' ).format( DATE_QUERY_FORMAT ) }\n\t\t\t\t\t\tmaxDate={ moment( selectedDate ).endOf( 'day' ).format( DATE_QUERY_FORMAT ) }\n\t\t\t\t\t\tproductIds={ props.productIds }\n\t\t\t\t\t\tcategoryIds={ props.categoryIds }\n\t\t\t\t\t\tresourceIds={ props.resourceIds }\n\t\t\t\t\t\tremainingRecords={ 0 }\n\t\t\t\t\t\tinfiniteScrollEnabled={ false }\n\t\t\t\t\t\tisLastPage={ true }\n\t\t\t\t\t\tshowEmptyDates={ false }\n\t\t\t\t\t\tforceDateFromProps={ true }\n\t\t\t\t\t/> : ''\n\t\t\t\t}\n\t\t\t</div>\n\t\t);\n};\n\nEventCalendar.defaultProps = {\n\tavailability: {},\n\tcategoryIds: [],\n\toffset: 0,\n\tisSmallViewport: false,\n};\n\nEventCalendar.propTypes = {\n\t/**\n\t * Sets up component for in-editor preview if true.\n\t */\n\tisPreview: PropTypes.bool,\n\t/**\n\t * Display sold out bookings.\n\t */\n\tshowSoldOut: PropTypes.bool,\n\t/**\n\t * Whether the current device has a small screen or window.\n\t */\n\tisSmallViewport: PropTypes.bool,\n\n\toffset: PropTypes.number,\n\n\tproductIds: PropTypes.node,\n\n\tcategoryIds: PropTypes.node,\n\n\tresourceIds: PropTypes.node,\n};\n\nconst productsWithAvailabilityOnDay = function( products, availability, date ) {\n\t// Don't generate artifical entries.\n\tif ( ! ( date in availability ) ) {\n\t\treturn [];\n\t}\n\tconst dayAvailability = availability[ date ];\n\treturn transform( products, ( result, product, productId ) => {\n\t\tconst productAvailability = filter( dayAvailability, ( slot ) => {\n\t\t\treturn slot.productId === parseInt( productId );\n\t\t} );\n\t\tif ( productAvailability.length > 0 ) {\n\t\t\tresult.push( [ { id: productId, ...product }, productAvailability ] );\n\t\t}\n\t\treturn result;\n\t}, [] );\n};\n\nconst productsWithAvailabilityOnDayHour = function( products, availability ) {\n\treturn transform( products, ( result, product, productId ) => {\n\t\tconst productAvailability = filter( availability, ( slot ) => {\n\t\t\treturn slot.productId === parseInt( productId );\n\t\t} );\n\n\t\tif ( productAvailability.length > 0 ) {\n\t\t\tresult.push( [ { id: productId, ...product }, productAvailability ] );\n\t\t}\n\n\t\treturn result;\n\t}, [] );\n};\n\nconst transformAvailabilityForMonthView = ( availability ) => {\n\tconst availabilityByDays = {};\n\tfor ( const slot of availability ) {\n\t\tconst key = moment( slot.date ).format( 'YYYY-MM-DD' );\n\t\t! ( key in availabilityByDays ) && ( availabilityByDays[ key ] = [] ); // eslint-disable-line no-unused-expressions\n\t\tavailabilityByDays[ key ].push( slot );\n\t}\n\n\treturn mapValues( availabilityByDays, ( day ) => (\n\t\tday.sort( ( a, b ) => moment( a.date ).diff( moment( b.date ) ) )\n\t) );\n};\n\nconst transformAvailabilityForWeekView = ( availability ) => {\n\t/**\n\t * Availability structure\n\t * slot_hour{}:days{}:slots.\n\t * slots are time sorted\n\t */\n\tconst availabilityByHour = {};\n\n\tfor ( const slot of availability ) {\n\t\tconst hour = moment( slot.date ).format( 'HH' );\n\t\tconst day = moment( slot.date ).format( 'YYYY-MM-DD' );\n\t\t! ( hour in availabilityByHour ) && ( availabilityByHour[ hour ] = {} ); // eslint-disable-line no-unused-expressions\n\t\t! ( day in availabilityByHour[ hour ] ) && ( availabilityByHour[ hour ][ day ] = [] ); // eslint-disable-line no-unused-expressions\n\t\tavailabilityByHour[ hour ][ day ].push( slot );\n\t}\n\n\treturn availabilityByHour; // this should be sorted if REST sends in sorted order.\n};\n\nexport default withViewportMatch( { isSmallViewport: '< small' } )( EventCalendar );\n\n// export lower order component to expose it for unit testing.\nexport { EventCalendar };\n","/**\n * External dependencies\n */\nimport { useContext } from '@wordpress/element';\nimport PropTypes from 'prop-types';\nimport { Popover, SlotFillProvider } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport EventCalendar from '.';\nimport '../../../js/blocks/bookings-schedule/style.scss';\nimport { IconTrendingFlat } from '../icons';\nimport { getReadableDateRangeString, getDateRangeTypeString } from '../../includes/date-utils';\nimport commonContext from '../../blocks/common-context/context';\nimport calendarContext from '../../blocks/bookings-calendar/context/context';\nimport AvailabilityState from '../../blocks/availability-context/availability-state';\n\nconst CalendarContainer = ( props ) => {\n\tconst {\n\t\toffset,\n\t\tgotoCurrent,\n\t\tgotoNext,\n\t\tgotoPrev,\n\t\tshowDateNav,\n\t} = useContext( commonContext );\n\n\tconst {\n\t\tdateRangeType,\n\t} = useContext( calendarContext );\n\n\tconst onDummyClick = ( e ) => {\n\t\te.preventDefault();\n\t};\n\n\tconst attributes = props;\n\tconst dateRangeString = getReadableDateRangeString( dateRangeType, offset );\n\tconst dateRangeTypeString = getDateRangeTypeString( dateRangeType );\n\treturn (\n\t\t<SlotFillProvider>\n\t\t\t<div>\n\t\t\t\t<div className=\"wc-bookings-availability-header\">\n\t\t\t\t\t<div className=\"wc-bookings-availability-date\">\n\t\t\t\t\t\t{ dateRangeString }\n\t\t\t\t\t</div>\n\t\t\t\t\t{ ( true === showDateNav || 'true' === showDateNav ) ? (\n\t\t\t\t\t\t<div className=\"wc-bookings-availability-navigation\">\n\t\t\t\t\t\t\t{ /* eslint-disable jsx-a11y/anchor-is-valid */ }\n\t\t\t\t\t\t\t{ ( offset <= 0 ) ? // disable past days/weeks/months.\n\t\t\t\t\t\t\t\t<a href=\"#\" className=\"wc-bookings-availability-navigation-prev wc-bookings-availability-navigation-disabled\" onClick={ onDummyClick }>\n\t\t\t\t\t\t\t\t\t{ <IconTrendingFlat /> }\n\t\t\t\t\t\t\t\t</a> :\n\t\t\t\t\t\t\t\t<a href=\"#\" className=\"wc-bookings-availability-navigation-prev\" onClick={ gotoPrev }> { <IconTrendingFlat /> } </a>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t<a href=\"#\" className=\"wc-bookings-availability-navigation-current\" onClick={ gotoCurrent }>{ dateRangeTypeString }</a>\n\t\t\t\t\t\t\t<a href=\"#\" className=\"wc-bookings-availability-navigation-next\" onClick={ gotoNext }>{ <IconTrendingFlat /> }</a>\n\t\t\t\t\t\t\t{ /* eslint-enable jsx-a11y/anchor-is-valid */ }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : ( '' ) }\n\t\t\t\t</div>\n\t\t\t\t<AvailabilityState>\n\t\t\t\t\t<EventCalendar { ...attributes } />\n\t\t\t\t</AvailabilityState>\n\t\t\t\t{\n\t\t\t\t\t// Popover causes problems with the block picker when the example is rendered.\n\t\t\t\t\tattributes.example ? (\n\t\t\t\t\t\t''\n\t\t\t\t\t) : <Popover.Slot />\n\t\t\t\t}\n\t\t\t</div>\n\t\t</SlotFillProvider>\n\t);\n};\n\nCalendarContainer.propTypes = {\n\tdateRangeType: PropTypes.string,\n};\n\nexport default CalendarContainer;\n","/**\n * External dependencies.\n */\nimport { createContext } from '@wordpress/element';\n\nexport default createContext( {} );\n","/**\n * External dependencies\n */\nimport PropTypes from 'prop-types';\n\n/**\n * External dependencies.\n */\nimport { useState } from '@wordpress/element';\nimport { addQueryArgs } from '@wordpress/url';\nimport apiFetch from '@wordpress/api-fetch';\nimport { pickBy, identity, get, omit, merge, has } from 'lodash';\nimport { localizeDate, CONVERT_DIRECTIONS, addTimeIfToday } from '../../includes/date-utils';\nimport { DEFAULT_PAGE_SIZE } from '../../includes/misc-utils';\n\n/**\n * Internal dependencies.\n */\nimport AvailabilityContext from './context';\n\n/**\n * Returns a string representation of a sorted query object.\n *\n * @param {Object} query Current state\n * @return {String}       Query Key\n */\nconst getJsonString = ( query = {} ) => {\n\treturn JSON.stringify( query, Object.keys( query ).sort() );\n};\n\nconst DEFAULT_PAGE = \"default\";\n\n/**\n * Returns a string representation of the availability query argument.\n *\n * @param {Object} query Current state\n * @return {String}       Query Key\n */\nconst serializeQueryArgs = ( query = {} ) => {\n\treturn getJsonString( omit( query, [ 'page' ] ) );\n};\n\n/*\n * Generate list of days in query range with unavailable days removed.\n */\nconst processAvailability = ( availabilityData ) => {\n\tconst mapper = ( src ) => {\n\t\tsrc.productId = src.product_id;\n\t\tsrc.durationUnit = src.duration_unit;\n\t\tdelete src.product_id;\n\t\tdelete src.duration_unit;\n\t\tsrc.serverDate = src.date;\n\t\tsrc.date = localizeDate( src.date, CONVERT_DIRECTIONS.SERVER_TO_LOCAL );\n\t\treturn src;\n\t};\n\n\treturn availabilityData.map( mapper );\n};\n\nconst AvailabilityState = ( props ) => {\n\tconst [ availability, setAvailability ] = useState( [] );\n\tconst [ availabilityRequesting, setAvailabilityRequesting ] = useState( false );\n\tconst [ availabilityError, setAvailabilityError ] = useState( false );\n\n\tconst requestAvailability = ( query ) => {\n\t\tconst {\n\t\t\tminDate,\n\t\t\tmaxDate,\n\t\t\tpage,\n\t\t\tproductIds,\n\t\t\tcategoryIds,\n\t\t\tresourceIds,\n\t\t\tgetPastTimes,\n\t\t\tpageSize = DEFAULT_PAGE_SIZE,\n\t\t\tshowSoldOut,\n\t\t} = query;\n\n\t\tconst queryArgs = {\n\t\t\tproduct_ids: productIds,\n\t\t\tcategory_ids: categoryIds,\n\t\t\tresource_ids: resourceIds,\n\t\t\tmin_date: minDate ? encodeURIComponent( localizeDate( addTimeIfToday( minDate ), CONVERT_DIRECTIONS.LOCAL_TO_SERVER ) ) : minDate,\n\t\t\tmax_date: maxDate ? encodeURIComponent( localizeDate( maxDate, CONVERT_DIRECTIONS.LOCAL_TO_SERVER ) ) : maxDate,\n\t\t\tpage: page,\n\t\t\tlimit: pageSize,\n\t\t\tget_past_times: ( getPastTimes === false ) ? false : true,\n\t\t\thide_unavailable: ! showSoldOut,\n\t\t};\n\n\t\tconst path = addQueryArgs(\n\t\t\t'/wc-bookings/v1/products/slots',\n\t\t\tpickBy( queryArgs, identity )\n\t\t);\n\n\t\tconst storeAvailability = ( requestedAvailability, count, _query ) => {\n\t\t\tif ( requestAvailability.length === 0 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst queryKey = serializeQueryArgs( _query );\n\t\t\tconst newPage = _query.page === undefined ? DEFAULT_PAGE : _query.page;\n\n\t\t\t// Copy availability to update object reference.\n\t\t\tconst newAvailability = merge( {}, availability );\n\n\t\t\t// Check if we have the key. Add placeholder if not.\n\t\t\tif ( ! has( newAvailability, queryKey ) ) {\n\t\t\t\tnewAvailability[ queryKey ] = {\n\t\t\t\t\tcount,\n\t\t\t\t\tpages: {},\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// Add new page.\n\t\t\tnewAvailability[ queryKey ].pages[ newPage ] = requestedAvailability;\n\n\t\t\t// Store updated availability ( old + new ).\n\t\t\tsetAvailability( newAvailability );\n\t\t};\n\n\t\tsetAvailabilityRequesting( true );\n\t\tapiFetch( { path } ).then(\n\t\t\t( { records, count } ) => {\n\t\t\t\tconst newAvailability = processAvailability( records );\n\t\t\t\tstoreAvailability( newAvailability, count, query );\n\t\t\t\tsetAvailabilityError( false );\n\t\t\t\tsetAvailabilityRequesting( false );\n\t\t\t},\n\t\t\t( error ) => {\n\t\t\t\tsetAvailabilityError( error );\n\t\t\t\tsetAvailabilityRequesting( false );\n\t\t\t}\n\t\t);\n\t};\n\n\tconst getAvailability = ( query ) => {\n\t\tconst data = get( availability, [ serializeQueryArgs( query ) ], false );\n\t\tif ( data === false ) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst records = [];\n\t\tconst pages = Object.keys( data.pages ).sort();\n\n\t\t// Merge pages.\n\t\tpages.map( ( page ) => {\n\t\t\trecords.push( ...data.pages[ page ] );\n\t\t} );\n\n\t\treturn records;\n\t};\n\n\tconst getAvailabilityTotalRecords = ( query ) => {\n\t\treturn get( availability, [ serializeQueryArgs( query ), 'count' ], 0 );\n\t};\n\n\tconst getRemainingRecordsCount = ( query ) => {\n\t\tconst recordsCount = getAvailability( query ).length;\n\t\tconst totalRecordsCount = getAvailabilityTotalRecords( query );\n\t\treturn totalRecordsCount - recordsCount;\n\t};\n\n\tconst getAvailabilityCount = ( query ) => {\n\t\treturn getAvailability( query ).length;\n\t};\n\n\tconst hasResultsForQuery = ( query ) => {\n\t\tconst page = query.page === undefined ? DEFAULT_PAGE : query.page ;\n\t\treturn get( availability, [ serializeQueryArgs( query ), 'pages', page ], false ) === false ? false : true;\n\t};\n\n\tconst highestPageForQuery = ( query ) => {\n\t\tconst data = get( availability, [ serializeQueryArgs( query ) ], false );\n\n\t\tif ( data === false ) {\n\t\t\treturn 1;\n\t\t}\n\n\t\treturn Math.max( ...Object.keys( data.pages ) );\n\t};\n\n\treturn (\n\t\t<AvailabilityContext.Provider value={ {\n\t\t\thasResultsForQuery,\n\t\t\tavailabilityRequesting,\n\t\t\tgetAvailability,\n\t\t\tgetAvailabilityCount,\n\t\t\tgetRemainingRecordsCount,\n\t\t\trequestAvailability,\n\t\t\tavailabilityError,\n\t\t\thighestPageForQuery,\n\t\t} }\n\t\t>\n\t\t\t{ props.children }\n\t\t</AvailabilityContext.Provider>\n\t);\n};\n\nAvailabilityState.propTypes = {\n\tchildren: PropTypes.object,\n};\n\nexport default AvailabilityState;\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useState } from '@wordpress/element';\nimport { PropTypes } from 'prop-types';\nimport apiFetch from '@wordpress/api-fetch';\n\n/**\n * Internal dependencies\n */\nimport { formatDuration, getHumanReadableDate } from '../../includes/date-utils';\n\nconst EventItem = ( props ) => {\n\tconst [ available, setAvailable ] = useState( true );\n\tconst [ loading, setLoading ] = useState( false );\n\n\tconst onClickBook = () => {\n\t\tconst { serverDate, productId, available: availableData } = props.data;\n\t\tconst { product, product: { permalink } } = props;\n\t\tconst isAvailable = availableData && available;\n\t\tconst isBookable = isAvailable && ( ! ( product.has_persons || product.has_resources || 'customer' === product.duration_type ) );\n\n\t\tsetLoading( true );\n\n\t\tif ( ! isBookable ) {\n\t\t\twindow.location.href = permalink;\n\t\t\treturn;\n\t\t}\n\n\t\tapiFetch( {\n\t\t\turl: wc_bookings_availability_args.ajax_url + '=wc_bookings_add_booking_to_cart' + '&product_id=' + productId + '&date=' + encodeURIComponent( serverDate ) + '&security=' + wc_bookings_availability_args.nonces.add_booking_to_cart,\n\t\t} )\n\t\t\t.then( ( data ) => {\n\t\t\t\tif ( data.booked ) {\n\t\t\t\t\twindow.location.href = wc_bookings_availability_args.checkout_url;\n\t\t\t\t} else {\n\t\t\t\t\twindow.location.href = data.link;\n\t\t\t\t}\n\t\t\t} );\n\t};\n\n\tconst { isPreview, addSubheader, product } = props;\n\tconst { name } = product;\n\tconst { date, placeholder, available: availableData } = props.data;\n\tconst priceHtml = product.price_html;\n\tconst isAvailable = availableData && available;\n\tlet listClassName = 'wc-bookings-availability-item';\n\n\tif ( placeholder ) {\n\t\tlistClassName += ' wc-bookings-availability-item-is-placeholder';\n\t}\n\n\tlet buttonText = ( product.has_persons || product.has_resources || 'customer' === product.duration_type ) ? __( 'Select options', 'woocommerce-bookings-availability' ) : __( 'Book now', 'woocommerce-bookings-availability' );\n\n\tlet buttonClassName = 'wp-block-button__link wc-bookings-availability-book-button';\n\n\tif ( ! isAvailable ) {\n\t\tbuttonText = __( 'Sold out', 'woocommerce-bookings-availability' );\n\t\tbuttonClassName += ' wc-bookings-availability-item-sold-out';\n\t}\n\n\treturn (\n\t\t<li className={ listClassName } >\n\t\t\t{ addSubheader &&\n\t\t\t\t<div className=\"wc-bookings-availability-item-subheader\">\n\t\t\t\t\t<span>{ getHumanReadableDate( date ) }</span>\n\t\t\t\t</div>\n\t\t\t}\n\t\t\t<div className=\"wc-bookings-availability-item-body\">\n\t\t\t\t<div className=\"wc-bookings-availability-item-information\" >\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t<a href={ product.permalink }>{ name }</a>\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t<div><span>{ formatDuration( product, date ) }</span></div>\n\t\t\t\t\t\t<div className=\"wc-bookings-availability-item-price\" dangerouslySetInnerHTML={ { __html: priceHtml } } />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"wp-block-button\">\n\t\t\t\t\t{ ( isPreview || ! available ) ? (\n\t\t\t\t\t\t<span className={ buttonClassName }>\n\t\t\t\t\t\t\t{ buttonText }\n\t\t\t\t\t\t</span>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<button onClick={ onClickBook } disabled={ loading } className={ buttonClassName }>\n\t\t\t\t\t\t\t{ buttonText }\n\t\t\t\t\t\t</button>\n\t\t\t\t\t) }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</li>\n\t);\n};\n\nEventItem.propTypes = {\n\t/**\n\t * Availability data from wc_bookings_find_booking_slots ajax endpoint.\n\t */\n\tdata: PropTypes.shape( {\n\t\tbooked: PropTypes.number,\n\t\tavailable: PropTypes.number,\n\t\tresources: PropTypes.object,\n\t\tproductId: PropTypes.number,\n\t\ttitle: PropTypes.string,\n\t\tdate: PropTypes.date,\n\t\tserverDate: PropTypes.string,\n\t\tplaceholder: PropTypes.bool,\n\t\tduration: PropTypes.number,\n\t\tdurationUnit: PropTypes.string,\n\t} ).isRequired,\n\t/**\n\t * Sets up component for in-editor preview if true.\n\t */\n\tisPreview: PropTypes.bool,\n\taddSubheader: PropTypes.bool,\n\tproduct: PropTypes.object.isRequired,\n};\n\nEventItem.defaultProps = {\n\taddSubheader: false,\n};\n\nexport default EventItem;\n","import { getHumanReadableDate, getNoSlotsInRangeMessage } from '../../includes/date-utils';\nimport { PropTypes } from 'prop-types';\n\nconst EmptyEventItem = ( props ) => {\n\tconst { date } = props;\n\n\treturn (\n\t\t<li className=\"wc-bookings-availability-item\">\n\t\t\t<div className=\"wc-bookings-availability-item-subheader\">\n\t\t\t\t<span>{ getHumanReadableDate( date ) } </span>\n\t\t\t</div>\n\t\t\t<div className=\"wc-bookings-availability-item-body\">\n\t\t\t\t<div className=\"wc-bookings-availability-item-empty\">\n\t\t\t\t\t{ getNoSlotsInRangeMessage( 'today' ) }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</li>\n\t);\n};\n\nexport default EmptyEventItem;\n\nEmptyEventItem.propTypes = {\n\tdate: PropTypes.object,\n};\n","/**\n * External dependencies\n */\nimport { __, _n, sprintf } from '@wordpress/i18n';\nimport { Component, createRef } from '@wordpress/element';\nimport { PropTypes } from 'prop-types';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\n\nclass PageLoader extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.onScroll = this.onScroll.bind( this );\n\t\tthis.scrollTriggerRef = createRef();\n\t}\n\n\tcomponentDidMount() {\n\t\twindow.addEventListener( 'scroll', this.onScroll, true );\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tif ( ( true === prevProps.isLoading ) && ( false === this.props.isLoading ) ) {\n\t\t\t// Check if we should ask for the next page. Reuse onScroll utility function.\n\t\t\tthis.onScroll();\n\t\t}\n\t\tif ( ( false === prevProps.infiniteScrollEnabled ) && ( true === this.props.infiniteScrollEnabled ) ) {\n\t\t\t// Merchant has enabled inf scroll. Check if we should load more data.\n\t\t\tthis.onScroll();\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener( 'scroll', this.onScroll, true );\n\t}\n\n\tonScroll() {\n\t\tconst { isLoading, loadMore } = this.props;\n\n\t\tif ( ! isLoading && this.scrollTriggerIsInViewport() ) {\n\t\t\tloadMore();\n\t\t}\n\t}\n\n\t/*\n\t * Determine if scroll trigger div is currently scrolled into viewport.\n\t */\n\tscrollTriggerIsInViewport() {\n\t\tconst scrollTrigger = this.scrollTriggerRef.current;\n\t\tif ( null === scrollTrigger ) {\n\t\t\treturn false;\n\t\t}\n\t\tconst top = scrollTrigger.getBoundingClientRect().top;\n\t\treturn top >= 0 && top <= window.innerHeight;\n\t}\n\n\tloadMoreClick = ( e ) => {\n\t\te.preventDefault();\n\t\tconst { loadMore } = this.props;\n\t\tloadMore();\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tremainingRecords,\n\t\t\tinfiniteScrollEnabled,\n\t\t} = this.props;\n\n\t\tif ( infiniteScrollEnabled ) {\n\t\t\t// When div is in viewport, next page will be loaded.\n\t\t\treturn <div className=\"wc-bookings-availability-scroll-trigger\" ref={ this.scrollTriggerRef } />;\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"wc-bookings-availability-load-more-listings\">\n\t\t\t\t{ sprintf( _n( '%s additional listing.', '%s additional listings.', remainingRecords, 'woocommerce-bookings-availability' ), remainingRecords ) }\n\t\t\t\t&nbsp;\n\t\t\t\t<a onClick={ this.loadMoreClick } href=\"#\"> { /* eslint-disable-line jsx-a11y/anchor-is-valid */ }\n\t\t\t\t\t{ __( 'Load more...', 'woocommerce-bookings-availability' ) }\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nPageLoader.propTypes = {\n\t/**\n\t * Number of remaining records that are unloaded.\n\t */\n\tremainingRecords: PropTypes.number.isRequired,\n\t/**\n\t * Prop to enable infinite scroll.\n\t */\n\tinfiniteScrollEnabled: PropTypes.bool.isRequired,\n\t/**\n\t * Callback function to load more records.\n\t */\n\tloadMore: PropTypes.func.isRequired,\n\n\tisLoading: PropTypes.bool,\n};\n\nPageLoader.defaultProps = {\n\t/**\n\t * Optional value that indicates that the external API fetch is already ongoing.\n\t */\n\tisLoading: false,\n};\n\nexport default PageLoader;\n","/**\n * External dependencies\n */\nimport { Fragment, useState, useContext, useEffect, useLayoutEffect, useRef } from '@wordpress/element';\nimport { PropTypes } from 'prop-types';\nimport { __ } from '@wordpress/i18n';\nimport moment from 'moment';\n\n/**\n * Internal dependencies\n */\nimport EventItem from '../../components/event-item';\nimport EmptyEventItem from '../../components/event-item/empty';\nimport {\n\tgetDateQueryLimits,\n\tisCustom,\n\tgetNoSlotsInRangeMessage,\n\tgetErrorLoadingSlotsInRangeMessage,\n\tgetIsRestrictedDay,\n} from '../../includes/date-utils';\nimport { DEFAULT_PAGE_SIZE } from '../../includes/misc-utils';\nimport PageLoader from '../../components/page-loader';\nimport productContext from '../../blocks/products-context/context';\nimport availabilityContext from '../../blocks/availability-context/context';\nimport scheduleContext from '../../blocks/bookings-schedule/context/context';\nimport calendarContext from '../../blocks/bookings-calendar/context/context';\nimport commonContext from '../../blocks/common-context/context';\n\nconst usePreviousProps = ( dateRangeType, infiniteScrollEnabled, offset, page, slotsPerPage ) => {\n\tconst ref = useRef();\n\n\tuseEffect( () => {\n\t\tref.current = { dateRangeType, infiniteScrollEnabled, offset, page, slotsPerPage };\n\t}, [ dateRangeType, infiniteScrollEnabled, offset, page, slotsPerPage ] );\n\n\treturn ref.current;\n};\n\nconst EventTable = ( props ) => {\n\tconst [ page, setPage ] = useState( 1 );\n\tconst firstRender = useRef( true );\n\tconst pageLoader = useRef( null );\n\n\tconst checkIfNextPageShouldBeFetched = () => {\n\t\tif ( pageLoader.current === null ) {\n\t\t\treturn false;\n\t\t}\n\t\treturn pageLoader.current.scrollTriggerIsInViewport();\n\t};\n\n\tconst {\n\t\trequestProducts,\n\t\tgetProducts,\n\t\tproducts,\n\t\tproductsRequesting,\n\t\tproductsError,\n\t} = useContext( productContext );\n\n\tconst {\n\t\thasResultsForQuery,\n\t\tavailabilityRequesting,\n\t\tgetAvailability,\n\t\trequestAvailability,\n\t\tavailabilityError,\n\t\tgetRemainingRecordsCount,\n\t\thighestPageForQuery,\n\t} = useContext( availabilityContext );\n\n\tconst {\n\t\tdateRangeType,\n\t} = useContext( scheduleContext );\n\n\tconst {\n\t\tshowSoldOut,\n\t} = useContext( calendarContext );\n\n\tconst {\n\t\tresetOffset,\n\t\toffset,\n\t} = useContext( commonContext );\n\n\tlet { minDate, maxDate, forceDateFromProps } = props;\n\tconst { productIds, categoryIds, resourceIds, infiniteScrollEnabled, slotsPerPage, getPastTimes } = props;\n\n\tconst previousProps = usePreviousProps( dateRangeType, infiniteScrollEnabled, offset, page, slotsPerPage );\n\n\tconst productsQuery = {\n\t\tproductIds,\n\t};\n\n\tforceDateFromProps = forceDateFromProps === undefined ? false : forceDateFromProps;\n\tconst forcedDate = forceDateFromProps ? minDate : false;\n\n\tlet currentDate = 1;\n\n\tif ( ! isCustom( dateRangeType ) && ! forceDateFromProps ) {\n\t\tif ( 0 === offset && 'this-month' === dateRangeType ) {\n\t\t\tconst date = new Date();\n\t\t\tcurrentDate = date.getDate();\n\t\t}\n\n\t\tconst dateRange = getDateQueryLimits( dateRangeType, offset, currentDate );\n\t\tminDate = dateRange.minDate;\n\t\tmaxDate = dateRange.maxDate;\n\t}\n\n\tconst availabilityQuery = {\n\t\tminDate,\n\t\tmaxDate,\n\t\tproductIds,\n\t\tcategoryIds,\n\t\tresourceIds,\n\t\tpage,\n\t\tgetPastTimes: getPastTimes,\n\t\tpageSize: infiniteScrollEnabled ? DEFAULT_PAGE_SIZE : slotsPerPage,\n\t\tshowSoldOut: showSoldOut,\n\t};\n\n\tconst isError = productsError || availabilityError;\n\tconst isRequesting = productsRequesting || availabilityRequesting;\n\tconst remainingRecords = getRemainingRecordsCount( availabilityQuery );\n\tconst hasResults = hasResultsForQuery( availabilityQuery );\n\tconst isLastPage = hasResults && ( remainingRecords === 0 );\n\n\t// First run, get initial data.\n\tuseLayoutEffect( () => {\n\t\tif ( ! productsRequesting && getProducts().count === false ) {\n\t\t\trequestProducts( productsQuery );\n\t\t}\n\t\trequestAvailability( availabilityQuery );\n\t}, [] );\n\n\t// Detect a change that requries a new data fetch.\n\tuseLayoutEffect( () => {\n\t\tif ( firstRender.current ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( dateRangeType !== previousProps.dateRangeType ) {\n\t\t\tif ( offset !== 0 ) {\n\t\t\t\tresetOffset();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst newPage = highestPageForQuery( availabilityQuery );\n\t\t\tavailabilityQuery.page = newPage;\n\t\t\tsetPage( newPage );\n\t\t}\n\n\t\tif ( ( slotsPerPage !== previousProps.slotsPerPage ) ||\n\t\t\t( infiniteScrollEnabled === false && previousProps.infiniteScrollEnabled === true ) ||\n\t\t\t( offset !== previousProps.offset ) ) {\n\t\t\tconst newPage = highestPageForQuery( availabilityQuery );\n\t\t\tavailabilityQuery.page = newPage;\n\t\t\tsetPage( newPage );\n\t\t}\n\n\t\tif ( infiniteScrollEnabled === true && previousProps.infiniteScrollEnabled === false ) {\n\t\t\tconst shouldFetch = checkIfNextPageShouldBeFetched();\n\n\t\t\tif ( shouldFetch ) {\n\t\t\t\tconst newPage = highestPageForQuery( availabilityQuery ) + 1;\n\t\t\t\tavailabilityQuery.page = newPage;\n\t\t\t\tsetPage( newPage );\n\t\t\t}\n\t\t}\n\n\t\tif ( ! availabilityRequesting && ! hasResults && ! isLastPage && ! isError ) {\n\t\t\trequestAvailability( availabilityQuery );\n\t\t}\n\t}, [ dateRangeType, infiniteScrollEnabled, offset, page, slotsPerPage, availabilityRequesting, forcedDate ] );\n\n\t// Detect first render.\n\tuseEffect( () => {\n\t\tfirstRender.current = false;\n\t}, [] );\n\n\tconst availability = getAvailability( availabilityQuery );\n\n\tconst loadMoreSlots = () => {\n\t\t/*\n\t\t * availabilityRequesting checks if we are not currently requesting.\n\t\t * We don't want to bump page in that case.\n\t\t * hasResultsForQuery is true only if we have results for previous pages.\n\t\t * This check prevents skipping over a page. If page was increased by accident\n\t\t * twice without request being made we will face a inf loop.\n\t\t */\n\n\t\tif ( availabilityRequesting || ! hasResultsForQuery( availabilityQuery ) ) {\n\t\t\treturn;\n\t\t}\n\t\tsetPage( page + 1 );\n\t};\n\n\tconst tryAgain = () => {\n\t\trequestAvailability( availabilityQuery );\n\t};\n\n\tconst renderEvents = () => {\n\t\tconst {\n\t\t\tisPreview,\n\t\t\tshowEmptyDates,\n\t\t} = props;\n\n\t\tlet previousDate = null;\n\t\tlet shownAvailability = availability;\n\t\tconst placeholderAvailability = availability.slice( 0 );\n\t\tconst eventItems = [];\n\t\tconst placeHolderCount = ( infiniteScrollEnabled || 0 === remainingRecords ) ? DEFAULT_PAGE_SIZE : Math.min( slotsPerPage, remainingRecords );\n\t\tconst placeHolderProduct = {\n\t\t\tname: 'placeholder',\n\t\t\tduration: 1,\n\t\t\tduration_unit: 'day',\n\t\t\tplaceholder: true,\n\t\t};\n\t\tif ( isRequesting ) {\n\t\t\tfor ( let i = 0; i < placeHolderCount; i++ ) {\n\t\t\t\tplaceholderAvailability.push( {\n\t\t\t\t\ttitle: 'placeholder',\n\t\t\t\t\tdate: new Date( minDate ),\n\t\t\t\t\tcost: 0.00,\n\t\t\t\t\tproductId: 0,\n\t\t\t\t\tavailable: 0,\n\t\t\t\t\tplaceholder: true,\n\t\t\t\t} );\n\t\t\t}\n\t\t\tshownAvailability = placeholderAvailability;\n\t\t}\n\n\t\tlet key = 0;\n\t\tshownAvailability.forEach( ( data ) => {\n\t\t\tconst { date } = data;\n\t\t\tconst product = products[ data.productId ] || placeHolderProduct;\n\t\t\tconst momentPreviousDate = moment( previousDate );\n\t\t\tlet addSubHeader = false;\n\t\t\tif ( ! previousDate || momentPreviousDate.isBefore( date, 'day' ) ) {\n\t\t\t\tmomentPreviousDate.add( 1, 'day' );\n\n\t\t\t\twhile ( momentPreviousDate.isBefore( date, 'day' ) ) {\n\t\t\t\t\tif ( showEmptyDates ) {\n\t\t\t\t\t\teventItems.push( <EmptyEventItem key={ key } date={ momentPreviousDate.toDate() } /> );\n\t\t\t\t\t\tkey++;\n\t\t\t\t\t}\n\t\t\t\t\tmomentPreviousDate.add( 1, 'day' );\n\t\t\t\t}\n\t\t\t\taddSubHeader = true;\n\t\t\t}\n\n\t\t\tpreviousDate = date;\n\t\t\tif ( ! getIsRestrictedDay( date, product ) ) {\n\t\t\t\teventItems.push(\n\t\t\t\t\t<EventItem isPreview={ isPreview } key={ key } data={ data } product={ product } addSubheader={ addSubHeader } />\n\t\t\t\t);\n\t\t\t}\n\t\t\tkey++;\n\t\t} );\n\n\t\tconst addEndPaddingItems = ( ! ( page === 1 && isRequesting ) ) && remainingRecords === 0;\n\n\t\tif ( addEndPaddingItems && moment( previousDate ).isBefore( maxDate, 'day' ) ) {\n\t\t\tconst momentPreviousDate = moment( previousDate );\n\t\t\twhile ( momentPreviousDate.isBefore( maxDate, 'day' ) ) {\n\t\t\t\tmomentPreviousDate.add( 1, 'day' );\n\t\t\t\tif ( showEmptyDates ) {\n\t\t\t\t\teventItems.push( <EmptyEventItem key={ key } date={ momentPreviousDate.toDate() } /> );\n\t\t\t\t\tkey++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn (\n\t\t\tshownAvailability.length ? (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<ul className=\"wc-bookings-availability-event-table\">\n\t\t\t\t\t\t{ eventItems }\n\t\t\t\t\t</ul>\n\t\t\t\t\t{ ! isLastPage &&\n\t\t\t\t\t\t<PageLoader ref={ pageLoader } infiniteScrollEnabled={ infiniteScrollEnabled } remainingRecords={ remainingRecords } loadMore={ loadMoreSlots } isLoading={ availabilityRequesting } />\n\t\t\t\t\t}\n\t\t\t\t</Fragment>\n\t\t\t) : (\n\t\t\t\t<div className=\"woocommerce-error notice notice-empty\">\n\t\t\t\t\t{ getNoSlotsInRangeMessage( dateRangeType ) }\n\t\t\t\t</div>\n\t\t\t)\n\t\t);\n\t};\n\n\treturn isError ?\n\t\t(\n\t\t\t<div className=\"woocommerce-error notice notice-error\">\n\t\t\t\t{ getErrorLoadingSlotsInRangeMessage( dateRangeType ) }\n\t\t\t\t{ ' ' }\n\t\t\t\t<a href=\"#\" onClick={ tryAgain }>{ __( 'Try again', 'woocommerce-bookings-availability' ) }</a>{ /* eslint-disable-line jsx-a11y/anchor-is-valid */ }\n\t\t\t</div>\n\t\t) : (\n\t\t\trenderEvents()\n\t\t);\n};\n\nEventTable.defaultProps = {\n\tproductIds: [],\n\tcategoryIds: [],\n\tresourceIds: [],\n\toffset: 0,\n\tgetPastTimes: false,\n};\n\nEventTable.propTypes = {\n\t/**\n\t * Sets up component for in-editor preview if true.\n\t */\n\tisPreview: PropTypes.bool,\n\t/**\n\t * If we should automattically load the next page on scroll.\n\t */\n\tinfiniteScrollEnabled: PropTypes.bool.isRequired,\n\t/**\n\t * Page size.\n\t */\n\tslotsPerPage: PropTypes.number,\n\n\tshowEmptyDates: PropTypes.bool,\n\n\tminDate: PropTypes.string,\n\n\tmaxDate: PropTypes.string,\n\n\tforceDateFromProps: PropTypes.bool,\n\n\toffset: PropTypes.number,\n\n\tproductIds: PropTypes.node,\n\n\tcategoryIds: PropTypes.node,\n\n\tresourceIds: PropTypes.node,\n\n\tgetPastTimes: PropTypes.bool,\n};\n\nexport default EventTable;\n\n// export lower order component to expose it for unit testing.\nexport { EventTable };\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","/**\n * External dependencies\n */\nimport PropTypes from 'prop-types';\n\n/**\n * External dependencies.\n */\nimport { useState } from '@wordpress/element';\n\n/**\n * Internal dependencies.\n */\nimport CommonContext from './context';\n\nconst CommonState = ( props ) => {\n\tlet newProps;\n\n\tif ( 'undefined' !== props.isFrontend && true === props.isFrontend ) {\n\t\tnewProps = props;\n\t} else {\n\t\tnewProps = props.attributes;\n\t}\n\n\t/**\n\t * Offset.\n\t */\n\tconst [ offset, setOffset ] = useState( 0 );\n\n\tconst gotoPrev = ( e ) => {\n\t\te.preventDefault();\n\t\tsetOffset( parseInt( offset, 10 ) - 1 );\n\t};\n\n\tconst gotoNext = ( e ) => {\n\t\te.preventDefault();\n\t\tsetOffset( parseInt( offset, 10 ) + 1 );\n\t};\n\n\tconst gotoCurrent = ( e ) => {\n\t\te.preventDefault();\n\t\tsetOffset( 0 );\n\t};\n\n\tconst resetOffset = () => {\n\t\tsetOffset( 0 );\n\t};\n\n\t/**\n\t * showDateNav.\n\t */\n\tconst onShowDateNavUpdate = () => {\n\t\tprops.setAttributes( { showDateNav: ! newProps.showDateNav } );\n\t};\n\n\t/**\n\t * showEmptyDates.\n\t */\n\tconst onShowEmptyDatesUpdate = () => {\n\t\tprops.setAttributes( { showEmptyDates: ! newProps.showEmptyDates } );\n\t};\n\n\treturn (\n\t\t<CommonContext.Provider value={ {\n\t\t\toffset: offset,\n\t\t\tgotoPrev: gotoPrev,\n\t\t\tgotoNext: gotoNext,\n\t\t\tgotoCurrent: gotoCurrent,\n\t\t\tresetOffset: resetOffset,\n\t\t\tshowDateNav: newProps.showDateNav,\n\t\t\tonShowDateNavUpdate: onShowDateNavUpdate,\n\t\t\tshowEmptyDates: newProps.showEmptyDates,\n\t\t\tonShowEmptyDatesUpdate: onShowEmptyDatesUpdate,\n\t\t} }\n\t\t>\n\t\t\t{ props.children }\n\t\t</CommonContext.Provider>\n\t);\n};\n\nCommonState.propTypes = {\n\tchildren: PropTypes.object,\n\tattributes: PropTypes.object,\n\tsetAttributes: PropTypes.func,\n\tisFrontend: PropTypes.bool,\n};\n\nexport default CommonState;\n","/**\n * External dependencies\n */\nimport PropTypes from 'prop-types';\n\n/**\n * External dependencies.\n */\nimport { useState } from '@wordpress/element';\nimport { addQueryArgs } from '@wordpress/url';\nimport apiFetch from '@wordpress/api-fetch';\nimport { pickBy, identity, reduce } from 'lodash';\n\n/**\n * Internal dependencies.\n */\nimport ProductsContext from './context';\n\n/**\n * Helper function that transforms array of products returned from API\n * to a more convenient Object keyed by products ids.\n *\n * @param {array} products\n */\nconst transformProductsListToObject = ( products ) => {\n\treturn reduce( products, function( obj, product ) {\n\t\tconst id = product.id;\n\t\tdelete product.id;\n\t\tproduct.durationUnit = product.duration_unit;\n\t\tdelete product.duration_unit;\n\t\tobj[ id ] = product;\n\t\treturn obj;\n\t}, {} );\n};\n\nconst ProductsState = ( props ) => {\n\tconst [ products, setProducts ] = useState( { products: {}, count: false, query: {} } );\n\tconst [ productsRequesting, setProductsRequesting ] = useState( false );\n\tconst [ productsError, setProductsError ] = useState( false );\n\n\tconst requestProducts = ( query ) => {\n\t\tquery = query || {};\n\n\t\tconst {\n\t\t\tproductIds = '',\n\t\t} = query;\n\n\t\tconst queryArgs = {\n\t\t\tinclude: productIds,\n\t\t\tper_page: -1,\n\t\t\t_locale: 'user',\n\t\t};\n\n\t\tconst path = addQueryArgs(\n\t\t\t'/wc-bookings/v1/products',\n\t\t\tpickBy( queryArgs, identity )\n\t\t);\n\n\t\tsetProductsRequesting( true );\n\t\tapiFetch( { path } ).then(\n\t\t\t( _products ) => {\n\t\t\t\tconst productsObj = transformProductsListToObject( _products );\n\t\t\t\tsetProducts( { products: productsObj, count: _products.length, query } );\n\t\t\t\tsetProductsError( false );\n\t\t\t\tsetProductsRequesting( false );\n\t\t\t},\n\t\t\t( error ) => {\n\t\t\t\tsetProductsError( error );\n\t\t\t\tsetProductsRequesting( false );\n\t\t\t}\n\t\t);\n\t};\n\n\tconst getProducts = () => {\n\t\treturn products;\n\t};\n\n\treturn (\n\t\t<ProductsContext.Provider value={ {\n\t\t\tproducts: products.products,\n\t\t\tgetProducts,\n\t\t\trequestProducts,\n\t\t\tproductsError,\n\t\t\tproductsRequesting,\n\t\t} }\n\t\t>\n\t\t\t{ props.children }\n\t\t</ProductsContext.Provider>\n\t);\n};\n\nProductsState.propTypes = {\n\tchildren: PropTypes.object,\n\tattributes: PropTypes.object,\n\tsetAttributes: PropTypes.func,\n\tisFrontend: PropTypes.bool,\n};\n\nexport default ProductsState;\n","var content = require(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--6-2!../../../../node_modules/postcss-loader/src/index.js!../../../../node_modules/sass-loader/dist/cjs.js??ref--6-4!./style.scss\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","//! moment-timezone.js\n//! version : 0.5.26\n//! Copyright (c) JS Foundation and other contributors\n//! license : MIT\n//! github.com/moment/moment-timezone\n\n(function (root, factory) {\n\t\"use strict\";\n\n\t/*global define*/\n\tif (typeof module === 'object' && module.exports) {\n\t\tmodule.exports = factory(require('moment')); // Node\n\t} else if (typeof define === 'function' && define.amd) {\n\t\tdefine(['moment'], factory);                 // AMD\n\t} else {\n\t\tfactory(root.moment);                        // Browser\n\t}\n}(this, function (moment) {\n\t\"use strict\";\n\n\t// Do not load moment-timezone a second time.\n\t// if (moment.tz !== undefined) {\n\t// \tlogError('Moment Timezone ' + moment.tz.version + ' was already loaded ' + (moment.tz.dataVersion ? 'with data from ' : 'without any data') + moment.tz.dataVersion);\n\t// \treturn moment;\n\t// }\n\n\tvar VERSION = \"0.5.26\",\n\t\tzones = {},\n\t\tlinks = {},\n\t\tnames = {},\n\t\tguesses = {},\n\t\tcachedGuess;\n\n\tif (!moment || typeof moment.version !== 'string') {\n\t\tlogError('Moment Timezone requires Moment.js. See https://momentjs.com/timezone/docs/#/use-it/browser/');\n\t}\n\n\tvar momentVersion = moment.version.split('.'),\n\t\tmajor = +momentVersion[0],\n\t\tminor = +momentVersion[1];\n\n\t// Moment.js version check\n\tif (major < 2 || (major === 2 && minor < 6)) {\n\t\tlogError('Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js ' + moment.version + '. See momentjs.com');\n\t}\n\n\t/************************************\n\t\tUnpacking\n\t************************************/\n\n\tfunction charCodeToInt(charCode) {\n\t\tif (charCode > 96) {\n\t\t\treturn charCode - 87;\n\t\t} else if (charCode > 64) {\n\t\t\treturn charCode - 29;\n\t\t}\n\t\treturn charCode - 48;\n\t}\n\n\tfunction unpackBase60(string) {\n\t\tvar i = 0,\n\t\t\tparts = string.split('.'),\n\t\t\twhole = parts[0],\n\t\t\tfractional = parts[1] || '',\n\t\t\tmultiplier = 1,\n\t\t\tnum,\n\t\t\tout = 0,\n\t\t\tsign = 1;\n\n\t\t// handle negative numbers\n\t\tif (string.charCodeAt(0) === 45) {\n\t\t\ti = 1;\n\t\t\tsign = -1;\n\t\t}\n\n\t\t// handle digits before the decimal\n\t\tfor (i; i < whole.length; i++) {\n\t\t\tnum = charCodeToInt(whole.charCodeAt(i));\n\t\t\tout = 60 * out + num;\n\t\t}\n\n\t\t// handle digits after the decimal\n\t\tfor (i = 0; i < fractional.length; i++) {\n\t\t\tmultiplier = multiplier / 60;\n\t\t\tnum = charCodeToInt(fractional.charCodeAt(i));\n\t\t\tout += num * multiplier;\n\t\t}\n\n\t\treturn out * sign;\n\t}\n\n\tfunction arrayToInt (array) {\n\t\tfor (var i = 0; i < array.length; i++) {\n\t\t\tarray[i] = unpackBase60(array[i]);\n\t\t}\n\t}\n\n\tfunction intToUntil (array, length) {\n\t\tfor (var i = 0; i < length; i++) {\n\t\t\tarray[i] = Math.round((array[i - 1] || 0) + (array[i] * 60000)); // minutes to milliseconds\n\t\t}\n\n\t\tarray[length - 1] = Infinity;\n\t}\n\n\tfunction mapIndices (source, indices) {\n\t\tvar out = [], i;\n\n\t\tfor (i = 0; i < indices.length; i++) {\n\t\t\tout[i] = source[indices[i]];\n\t\t}\n\n\t\treturn out;\n\t}\n\n\tfunction unpack (string) {\n\t\tvar data = string.split('|'),\n\t\t\toffsets = data[2].split(' '),\n\t\t\tindices = data[3].split(''),\n\t\t\tuntils  = data[4].split(' ');\n\n\t\tarrayToInt(offsets);\n\t\tarrayToInt(indices);\n\t\tarrayToInt(untils);\n\n\t\tintToUntil(untils, indices.length);\n\n\t\treturn {\n\t\t\tname       : data[0],\n\t\t\tabbrs      : mapIndices(data[1].split(' '), indices),\n\t\t\toffsets    : mapIndices(offsets, indices),\n\t\t\tuntils     : untils,\n\t\t\tpopulation : data[5] | 0\n\t\t};\n\t}\n\n\t/************************************\n\t\tZone object\n\t************************************/\n\n\tfunction Zone (packedString) {\n\t\tif (packedString) {\n\t\t\tthis._set(unpack(packedString));\n\t\t}\n\t}\n\n\tZone.prototype = {\n\t\t_set : function (unpacked) {\n\t\t\tthis.name       = unpacked.name;\n\t\t\tthis.abbrs      = unpacked.abbrs;\n\t\t\tthis.untils     = unpacked.untils;\n\t\t\tthis.offsets    = unpacked.offsets;\n\t\t\tthis.population = unpacked.population;\n\t\t},\n\n\t\t_index : function (timestamp) {\n\t\t\tvar target = +timestamp,\n\t\t\t\tuntils = this.untils,\n\t\t\t\ti;\n\n\t\t\tfor (i = 0; i < untils.length; i++) {\n\t\t\t\tif (target < untils[i]) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tparse : function (timestamp) {\n\t\t\tvar target  = +timestamp,\n\t\t\t\toffsets = this.offsets,\n\t\t\t\tuntils  = this.untils,\n\t\t\t\tmax     = untils.length - 1,\n\t\t\t\toffset, offsetNext, offsetPrev, i;\n\n\t\t\tfor (i = 0; i < max; i++) {\n\t\t\t\toffset     = offsets[i];\n\t\t\t\toffsetNext = offsets[i + 1];\n\t\t\t\toffsetPrev = offsets[i ? i - 1 : i];\n\n\t\t\t\tif (offset < offsetNext && tz.moveAmbiguousForward) {\n\t\t\t\t\toffset = offsetNext;\n\t\t\t\t} else if (offset > offsetPrev && tz.moveInvalidForward) {\n\t\t\t\t\toffset = offsetPrev;\n\t\t\t\t}\n\n\t\t\t\tif (target < untils[i] - (offset * 60000)) {\n\t\t\t\t\treturn offsets[i];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn offsets[max];\n\t\t},\n\n\t\tabbr : function (mom) {\n\t\t\treturn this.abbrs[this._index(mom)];\n\t\t},\n\n\t\toffset : function (mom) {\n\t\t\tlogError(\"zone.offset has been deprecated in favor of zone.utcOffset\");\n\t\t\treturn this.offsets[this._index(mom)];\n\t\t},\n\n\t\tutcOffset : function (mom) {\n\t\t\treturn this.offsets[this._index(mom)];\n\t\t}\n\t};\n\n\t/************************************\n\t\tCurrent Timezone\n\t************************************/\n\n\tfunction OffsetAt(at) {\n\t\tvar timeString = at.toTimeString();\n\t\tvar abbr = timeString.match(/\\([a-z ]+\\)/i);\n\t\tif (abbr && abbr[0]) {\n\t\t\t// 17:56:31 GMT-0600 (CST)\n\t\t\t// 17:56:31 GMT-0600 (Central Standard Time)\n\t\t\tabbr = abbr[0].match(/[A-Z]/g);\n\t\t\tabbr = abbr ? abbr.join('') : undefined;\n\t\t} else {\n\t\t\t// 17:56:31 CST\n\t\t\t// 17:56:31 GMT+0800 (台北標準時間)\n\t\t\tabbr = timeString.match(/[A-Z]{3,5}/g);\n\t\t\tabbr = abbr ? abbr[0] : undefined;\n\t\t}\n\n\t\tif (abbr === 'GMT') {\n\t\t\tabbr = undefined;\n\t\t}\n\n\t\tthis.at = +at;\n\t\tthis.abbr = abbr;\n\t\tthis.offset = at.getTimezoneOffset();\n\t}\n\n\tfunction ZoneScore(zone) {\n\t\tthis.zone = zone;\n\t\tthis.offsetScore = 0;\n\t\tthis.abbrScore = 0;\n\t}\n\n\tZoneScore.prototype.scoreOffsetAt = function (offsetAt) {\n\t\tthis.offsetScore += Math.abs(this.zone.utcOffset(offsetAt.at) - offsetAt.offset);\n\t\tif (this.zone.abbr(offsetAt.at).replace(/[^A-Z]/g, '') !== offsetAt.abbr) {\n\t\t\tthis.abbrScore++;\n\t\t}\n\t};\n\n\tfunction findChange(low, high) {\n\t\tvar mid, diff;\n\n\t\twhile ((diff = ((high.at - low.at) / 12e4 | 0) * 6e4)) {\n\t\t\tmid = new OffsetAt(new Date(low.at + diff));\n\t\t\tif (mid.offset === low.offset) {\n\t\t\t\tlow = mid;\n\t\t\t} else {\n\t\t\t\thigh = mid;\n\t\t\t}\n\t\t}\n\n\t\treturn low;\n\t}\n\n\tfunction userOffsets() {\n\t\tvar startYear = new Date().getFullYear() - 2,\n\t\t\tlast = new OffsetAt(new Date(startYear, 0, 1)),\n\t\t\toffsets = [last],\n\t\t\tchange, next, i;\n\n\t\tfor (i = 1; i < 48; i++) {\n\t\t\tnext = new OffsetAt(new Date(startYear, i, 1));\n\t\t\tif (next.offset !== last.offset) {\n\t\t\t\tchange = findChange(last, next);\n\t\t\t\toffsets.push(change);\n\t\t\t\toffsets.push(new OffsetAt(new Date(change.at + 6e4)));\n\t\t\t}\n\t\t\tlast = next;\n\t\t}\n\n\t\tfor (i = 0; i < 4; i++) {\n\t\t\toffsets.push(new OffsetAt(new Date(startYear + i, 0, 1)));\n\t\t\toffsets.push(new OffsetAt(new Date(startYear + i, 6, 1)));\n\t\t}\n\n\t\treturn offsets;\n\t}\n\n\tfunction sortZoneScores (a, b) {\n\t\tif (a.offsetScore !== b.offsetScore) {\n\t\t\treturn a.offsetScore - b.offsetScore;\n\t\t}\n\t\tif (a.abbrScore !== b.abbrScore) {\n\t\t\treturn a.abbrScore - b.abbrScore;\n\t\t}\n\t\tif (a.zone.population !== b.zone.population) {\n\t\t\treturn b.zone.population - a.zone.population;\n\t\t}\n\t\treturn b.zone.name.localeCompare(a.zone.name);\n\t}\n\n\tfunction addToGuesses (name, offsets) {\n\t\tvar i, offset;\n\t\tarrayToInt(offsets);\n\t\tfor (i = 0; i < offsets.length; i++) {\n\t\t\toffset = offsets[i];\n\t\t\tguesses[offset] = guesses[offset] || {};\n\t\t\tguesses[offset][name] = true;\n\t\t}\n\t}\n\n\tfunction guessesForUserOffsets (offsets) {\n\t\tvar offsetsLength = offsets.length,\n\t\t\tfilteredGuesses = {},\n\t\t\tout = [],\n\t\t\ti, j, guessesOffset;\n\n\t\tfor (i = 0; i < offsetsLength; i++) {\n\t\t\tguessesOffset = guesses[offsets[i].offset] || {};\n\t\t\tfor (j in guessesOffset) {\n\t\t\t\tif (guessesOffset.hasOwnProperty(j)) {\n\t\t\t\t\tfilteredGuesses[j] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (i in filteredGuesses) {\n\t\t\tif (filteredGuesses.hasOwnProperty(i)) {\n\t\t\t\tout.push(names[i]);\n\t\t\t}\n\t\t}\n\n\t\treturn out;\n\t}\n\n\tfunction rebuildGuess () {\n\n\t\t// use Intl API when available and returning valid time zone\n\t\ttry {\n\t\t\tvar intlName = Intl.DateTimeFormat().resolvedOptions().timeZone;\n\t\t\tif (intlName && intlName.length > 3) {\n\t\t\t\tvar name = names[normalizeName(intlName)];\n\t\t\t\tif (name) {\n\t\t\t\t\treturn name;\n\t\t\t\t}\n\t\t\t\tlogError(\"Moment Timezone found \" + intlName + \" from the Intl api, but did not have that data loaded.\");\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t// Intl unavailable, fall back to manual guessing.\n\t\t}\n\n\t\tvar offsets = userOffsets(),\n\t\t\toffsetsLength = offsets.length,\n\t\t\tguesses = guessesForUserOffsets(offsets),\n\t\t\tzoneScores = [],\n\t\t\tzoneScore, i, j;\n\n\t\tfor (i = 0; i < guesses.length; i++) {\n\t\t\tzoneScore = new ZoneScore(getZone(guesses[i]), offsetsLength);\n\t\t\tfor (j = 0; j < offsetsLength; j++) {\n\t\t\t\tzoneScore.scoreOffsetAt(offsets[j]);\n\t\t\t}\n\t\t\tzoneScores.push(zoneScore);\n\t\t}\n\n\t\tzoneScores.sort(sortZoneScores);\n\n\t\treturn zoneScores.length > 0 ? zoneScores[0].zone.name : undefined;\n\t}\n\n\tfunction guess (ignoreCache) {\n\t\tif (!cachedGuess || ignoreCache) {\n\t\t\tcachedGuess = rebuildGuess();\n\t\t}\n\t\treturn cachedGuess;\n\t}\n\n\t/************************************\n\t\tGlobal Methods\n\t************************************/\n\n\tfunction normalizeName (name) {\n\t\treturn (name || '').toLowerCase().replace(/\\//g, '_');\n\t}\n\n\tfunction addZone (packed) {\n\t\tvar i, name, split, normalized;\n\n\t\tif (typeof packed === \"string\") {\n\t\t\tpacked = [packed];\n\t\t}\n\n\t\tfor (i = 0; i < packed.length; i++) {\n\t\t\tsplit = packed[i].split('|');\n\t\t\tname = split[0];\n\t\t\tnormalized = normalizeName(name);\n\t\t\tzones[normalized] = packed[i];\n\t\t\tnames[normalized] = name;\n\t\t\taddToGuesses(normalized, split[2].split(' '));\n\t\t}\n\t}\n\n\tfunction getZone (name, caller) {\n\n\t\tname = normalizeName(name);\n\n\t\tvar zone = zones[name];\n\t\tvar link;\n\n\t\tif (zone instanceof Zone) {\n\t\t\treturn zone;\n\t\t}\n\n\t\tif (typeof zone === 'string') {\n\t\t\tzone = new Zone(zone);\n\t\t\tzones[name] = zone;\n\t\t\treturn zone;\n\t\t}\n\n\t\t// Pass getZone to prevent recursion more than 1 level deep\n\t\tif (links[name] && caller !== getZone && (link = getZone(links[name], getZone))) {\n\t\t\tzone = zones[name] = new Zone();\n\t\t\tzone._set(link);\n\t\t\tzone.name = names[name];\n\t\t\treturn zone;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tfunction getNames () {\n\t\tvar i, out = [];\n\n\t\tfor (i in names) {\n\t\t\tif (names.hasOwnProperty(i) && (zones[i] || zones[links[i]]) && names[i]) {\n\t\t\t\tout.push(names[i]);\n\t\t\t}\n\t\t}\n\n\t\treturn out.sort();\n\t}\n\n\tfunction addLink (aliases) {\n\t\tvar i, alias, normal0, normal1;\n\n\t\tif (typeof aliases === \"string\") {\n\t\t\taliases = [aliases];\n\t\t}\n\n\t\tfor (i = 0; i < aliases.length; i++) {\n\t\t\talias = aliases[i].split('|');\n\n\t\t\tnormal0 = normalizeName(alias[0]);\n\t\t\tnormal1 = normalizeName(alias[1]);\n\n\t\t\tlinks[normal0] = normal1;\n\t\t\tnames[normal0] = alias[0];\n\n\t\t\tlinks[normal1] = normal0;\n\t\t\tnames[normal1] = alias[1];\n\t\t}\n\t}\n\n\tfunction loadData (data) {\n\t\taddZone(data.zones);\n\t\taddLink(data.links);\n\t\ttz.dataVersion = data.version;\n\t}\n\n\tfunction zoneExists (name) {\n\t\tif (!zoneExists.didShowError) {\n\t\t\tzoneExists.didShowError = true;\n\t\t\t\tlogError(\"moment.tz.zoneExists('\" + name + \"') has been deprecated in favor of !moment.tz.zone('\" + name + \"')\");\n\t\t}\n\t\treturn !!getZone(name);\n\t}\n\n\tfunction needsOffset (m) {\n\t\tvar isUnixTimestamp = (m._f === 'X' || m._f === 'x');\n\t\treturn !!(m._a && (m._tzm === undefined) && !isUnixTimestamp);\n\t}\n\n\tfunction logError (message) {\n\t\tif (typeof console !== 'undefined' && typeof console.error === 'function') {\n\t\t\tconsole.error(message);\n\t\t}\n\t}\n\n\t/************************************\n\t\tmoment.tz namespace\n\t************************************/\n\n\tfunction tz (input) {\n\t\tvar args = Array.prototype.slice.call(arguments, 0, -1),\n\t\t\tname = arguments[arguments.length - 1],\n\t\t\tzone = getZone(name),\n\t\t\tout  = moment.utc.apply(null, args);\n\n\t\tif (zone && !moment.isMoment(input) && needsOffset(out)) {\n\t\t\tout.add(zone.parse(out), 'minutes');\n\t\t}\n\n\t\tout.tz(name);\n\n\t\treturn out;\n\t}\n\n\ttz.version      = VERSION;\n\ttz.dataVersion  = '';\n\ttz._zones       = zones;\n\ttz._links       = links;\n\ttz._names       = names;\n\ttz.add          = addZone;\n\ttz.link         = addLink;\n\ttz.load         = loadData;\n\ttz.zone         = getZone;\n\ttz.zoneExists   = zoneExists; // deprecated in 0.1.0\n\ttz.guess        = guess;\n\ttz.names        = getNames;\n\ttz.Zone         = Zone;\n\ttz.unpack       = unpack;\n\ttz.unpackBase60 = unpackBase60;\n\ttz.needsOffset  = needsOffset;\n\ttz.moveInvalidForward   = true;\n\ttz.moveAmbiguousForward = false;\n\n\t/************************************\n\t\tInterface with Moment.js\n\t************************************/\n\n\tvar fn = moment.fn;\n\n\tmoment.tz = tz;\n\n\tmoment.defaultZone = null;\n\n\tmoment.updateOffset = function (mom, keepTime) {\n\t\tvar zone = moment.defaultZone,\n\t\t\toffset;\n\n\t\tif (mom._z === undefined) {\n\t\t\tif (zone && needsOffset(mom) && !mom._isUTC) {\n\t\t\t\tmom._d = moment.utc(mom._a)._d;\n\t\t\t\tmom.utc().add(zone.parse(mom), 'minutes');\n\t\t\t}\n\t\t\tmom._z = zone;\n\t\t}\n\t\tif (mom._z) {\n\t\t\toffset = mom._z.utcOffset(mom);\n\t\t\tif (Math.abs(offset) < 16) {\n\t\t\t\toffset = offset / 60;\n\t\t\t}\n\t\t\tif (mom.utcOffset !== undefined) {\n\t\t\t\tvar z = mom._z;\n\t\t\t\tmom.utcOffset(-offset, keepTime);\n\t\t\t\tmom._z = z;\n\t\t\t} else {\n\t\t\t\tmom.zone(offset, keepTime);\n\t\t\t}\n\t\t}\n\t};\n\n\tfn.tz = function (name, keepTime) {\n\t\tif (name) {\n\t\t\tif (typeof name !== 'string') {\n\t\t\t\tthrow new Error('Time zone name must be a string, got ' + name + ' [' + typeof name + ']');\n\t\t\t}\n\t\t\tthis._z = getZone(name);\n\t\t\tif (this._z) {\n\t\t\t\tmoment.updateOffset(this, keepTime);\n\t\t\t} else {\n\t\t\t\tlogError(\"Moment Timezone has no data for \" + name + \". See http://momentjs.com/timezone/docs/#/data-loading/.\");\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\t\tif (this._z) { return this._z.name; }\n\t};\n\n\tfunction abbrWrap (old) {\n\t\treturn function () {\n\t\t\tif (this._z) { return this._z.abbr(this); }\n\t\t\treturn old.call(this);\n\t\t};\n\t}\n\n\tfunction resetZoneWrap (old) {\n\t\treturn function () {\n\t\t\tthis._z = null;\n\t\t\treturn old.apply(this, arguments);\n\t\t};\n\t}\n\n\tfunction resetZoneWrap2 (old) {\n\t\treturn function () {\n\t\t\tif (arguments.length > 0) this._z = null;\n\t\t\treturn old.apply(this, arguments);\n\t\t};\n\t}\n\n\tfn.zoneName  = abbrWrap(fn.zoneName);\n\tfn.zoneAbbr  = abbrWrap(fn.zoneAbbr);\n\tfn.utc       = resetZoneWrap(fn.utc);\n\tfn.local     = resetZoneWrap(fn.local);\n\tfn.utcOffset = resetZoneWrap2(fn.utcOffset);\n\n\tmoment.tz.setDefault = function(name) {\n\t\tif (major < 2 || (major === 2 && minor < 9)) {\n\t\t\tlogError('Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js ' + moment.version + '.');\n\t\t}\n\t\tmoment.defaultZone = name ? getZone(name) : null;\n\t\treturn moment;\n\t};\n\n\t// Cloning a moment should include the _z property.\n\tvar momentProperties = moment.momentProperties;\n\tif (Object.prototype.toString.call(momentProperties) === '[object Array]') {\n\t\t// moment 2.8.1+\n\t\tmomentProperties.push('_z');\n\t\tmomentProperties.push('_a');\n\t} else if (momentProperties) {\n\t\t// moment 2.7.0\n\t\tmomentProperties._z = null;\n\t}\n\n\t// INJECT DATA\n\n\treturn moment;\n}));\n","(function() { module.exports = this[\"wp\"][\"viewport\"]; }());","'use strict';\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar JSON = _interopDefault(require('json-cycle'));\n\nfunction memorizeOne(fn) {\n  const map = new Map();\n  return (...args) => {\n    const argstr = JSON.stringify(args);\n    let result = map.get(argstr);\n\n    if (!result) {\n      result = fn(...args);\n      map.set(argstr, result);\n    }\n\n    return result;\n  };\n}\n\nmodule.exports = memorizeOne;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nmodule.exports = _nonIterableRest;","(function() { module.exports = this[\"moment-timezone\"]; }());","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","var content = require(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--6-2!../../../../node_modules/postcss-loader/src/index.js!../../../../node_modules/sass-loader/dist/cjs.js??ref--6-4!./style.scss\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nmodule.exports = _nonIterableSpread;","//! moment-timezone-utils.js\n//! version : 0.5.26\n//! Copyright (c) JS Foundation and other contributors\n//! license : MIT\n//! github.com/moment/moment-timezone\n\n(function (root, factory) {\n\t\"use strict\";\n\n\t/*global define*/\n    if (typeof module === 'object' && module.exports) {\n        module.exports = factory(require('./'));     // Node\n    } else if (typeof define === 'function' && define.amd) {\n\t\tdefine(['moment'], factory);                 // AMD\n\t} else {\n\t\tfactory(root.moment);                        // Browser\n\t}\n}(this, function (moment) {\n\t\"use strict\";\n\n\tif (!moment.tz) {\n\t\tthrow new Error(\"moment-timezone-utils.js must be loaded after moment-timezone.js\");\n\t}\n\n\t/************************************\n\t\tPack Base 60\n\t************************************/\n\n\tvar BASE60 = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWX',\n\t\tEPSILON = 0.000001; // Used to fix floating point rounding errors\n\n\tfunction packBase60Fraction(fraction, precision) {\n\t\tvar buffer = '.',\n\t\t\toutput = '',\n\t\t\tcurrent;\n\n\t\twhile (precision > 0) {\n\t\t\tprecision  -= 1;\n\t\t\tfraction   *= 60;\n\t\t\tcurrent     = Math.floor(fraction + EPSILON);\n\t\t\tbuffer     += BASE60[current];\n\t\t\tfraction   -= current;\n\n\t\t\t// Only add buffer to output once we have a non-zero value.\n\t\t\t// This makes '.000' output '', and '.100' output '.1'\n\t\t\tif (current) {\n\t\t\t\toutput += buffer;\n\t\t\t\tbuffer  = '';\n\t\t\t}\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tfunction packBase60(number, precision) {\n\t\tvar output = '',\n\t\t\tabsolute = Math.abs(number),\n\t\t\twhole = Math.floor(absolute),\n\t\t\tfraction = packBase60Fraction(absolute - whole, Math.min(~~precision, 10));\n\n\t\twhile (whole > 0) {\n\t\t\toutput = BASE60[whole % 60] + output;\n\t\t\twhole = Math.floor(whole / 60);\n\t\t}\n\n\t\tif (number < 0) {\n\t\t\toutput = '-' + output;\n\t\t}\n\n\t\tif (output && fraction) {\n\t\t\treturn output + fraction;\n\t\t}\n\n\t\tif (!fraction && output === '-') {\n\t\t\treturn '0';\n\t\t}\n\n\t\treturn output || fraction || '0';\n\t}\n\n\t/************************************\n\t\tPack\n\t************************************/\n\n\tfunction packUntils(untils) {\n\t\tvar out = [],\n\t\t\tlast = 0,\n\t\t\ti;\n\n\t\tfor (i = 0; i < untils.length - 1; i++) {\n\t\t\tout[i] = packBase60(Math.round((untils[i] - last) / 1000) / 60, 1);\n\t\t\tlast = untils[i];\n\t\t}\n\n\t\treturn out.join(' ');\n\t}\n\n\tfunction packAbbrsAndOffsets(source) {\n\t\tvar index = 0,\n\t\t\tabbrs = [],\n\t\t\toffsets = [],\n\t\t\tindices = [],\n\t\t\tmap = {},\n\t\t\ti, key;\n\n\t\tfor (i = 0; i < source.abbrs.length; i++) {\n\t\t\tkey = source.abbrs[i] + '|' + source.offsets[i];\n\t\t\tif (map[key] === undefined) {\n\t\t\t\tmap[key] = index;\n\t\t\t\tabbrs[index] = source.abbrs[i];\n\t\t\t\toffsets[index] = packBase60(Math.round(source.offsets[i] * 60) / 60, 1);\n\t\t\t\tindex++;\n\t\t\t}\n\t\t\tindices[i] = packBase60(map[key], 0);\n\t\t}\n\n\t\treturn abbrs.join(' ') + '|' + offsets.join(' ') + '|' + indices.join('');\n\t}\n\n\tfunction packPopulation (number) {\n\t\tif (!number) {\n\t\t\treturn '';\n\t\t}\n\t\tif (number < 1000) {\n\t\t\treturn '|' + number;\n\t\t}\n\t\tvar exponent = String(number | 0).length - 2;\n\t\tvar precision = Math.round(number / Math.pow(10, exponent));\n\t\treturn '|' + precision + 'e' + exponent;\n\t}\n\n\tfunction validatePackData (source) {\n\t\tif (!source.name)    { throw new Error(\"Missing name\"); }\n\t\tif (!source.abbrs)   { throw new Error(\"Missing abbrs\"); }\n\t\tif (!source.untils)  { throw new Error(\"Missing untils\"); }\n\t\tif (!source.offsets) { throw new Error(\"Missing offsets\"); }\n\t\tif (\n\t\t\tsource.offsets.length !== source.untils.length ||\n\t\t\tsource.offsets.length !== source.abbrs.length\n\t\t) {\n\t\t\tthrow new Error(\"Mismatched array lengths\");\n\t\t}\n\t}\n\n\tfunction pack (source) {\n\t\tvalidatePackData(source);\n\t\treturn [\n\t\t\tsource.name,\n\t\t\tpackAbbrsAndOffsets(source),\n\t\t\tpackUntils(source.untils) + packPopulation(source.population)\n\t\t].join('|');\n\t}\n\n\t/************************************\n\t\tCreate Links\n\t************************************/\n\n\tfunction arraysAreEqual(a, b) {\n\t\tvar i;\n\n\t\tif (a.length !== b.length) { return false; }\n\n\t\tfor (i = 0; i < a.length; i++) {\n\t\t\tif (a[i] !== b[i]) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tfunction zonesAreEqual(a, b) {\n\t\treturn arraysAreEqual(a.offsets, b.offsets) && arraysAreEqual(a.abbrs, b.abbrs) && arraysAreEqual(a.untils, b.untils);\n\t}\n\n\tfunction findAndCreateLinks (input, output, links, groupLeaders) {\n\t\tvar i, j, a, b, group, foundGroup, groups = [];\n\n\t\tfor (i = 0; i < input.length; i++) {\n\t\t\tfoundGroup = false;\n\t\t\ta = input[i];\n\n\t\t\tfor (j = 0; j < groups.length; j++) {\n\t\t\t\tgroup = groups[j];\n\t\t\t\tb = group[0];\n\t\t\t\tif (zonesAreEqual(a, b)) {\n\t\t\t\t\tif (a.population > b.population) {\n\t\t\t\t\t\tgroup.unshift(a);\n\t\t\t\t\t} else if (a.population === b.population && groupLeaders && groupLeaders[a.name]) {\n                        group.unshift(a);\n                    } else {\n\t\t\t\t\t\tgroup.push(a);\n\t\t\t\t\t}\n\t\t\t\t\tfoundGroup = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!foundGroup) {\n\t\t\t\tgroups.push([a]);\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < groups.length; i++) {\n\t\t\tgroup = groups[i];\n\t\t\toutput.push(group[0]);\n\t\t\tfor (j = 1; j < group.length; j++) {\n\t\t\t\tlinks.push(group[0].name + '|' + group[j].name);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction createLinks (source, groupLeaders) {\n\t\tvar zones = [],\n\t\t\tlinks = [];\n\n\t\tif (source.links) {\n\t\t\tlinks = source.links.slice();\n\t\t}\n\n\t\tfindAndCreateLinks(source.zones, zones, links, groupLeaders);\n\n\t\treturn {\n\t\t\tversion : source.version,\n\t\t\tzones   : zones,\n\t\t\tlinks   : links.sort()\n\t\t};\n\t}\n\n\t/************************************\n\t\tFilter Years\n\t************************************/\n\n\tfunction findStartAndEndIndex (untils, start, end) {\n\t\tvar startI = 0,\n\t\t\tendI = untils.length + 1,\n\t\t\tuntilYear,\n\t\t\ti;\n\n\t\tif (!end) {\n\t\t\tend = start;\n\t\t}\n\n\t\tif (start > end) {\n\t\t\ti = start;\n\t\t\tstart = end;\n\t\t\tend = i;\n\t\t}\n\n\t\tfor (i = 0; i < untils.length; i++) {\n\t\t\tif (untils[i] == null) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tuntilYear = new Date(untils[i]).getUTCFullYear();\n\t\t\tif (untilYear < start) {\n\t\t\t\tstartI = i + 1;\n\t\t\t}\n\t\t\tif (untilYear > end) {\n\t\t\t\tendI = Math.min(endI, i + 1);\n\t\t\t}\n\t\t}\n\n\t\treturn [startI, endI];\n\t}\n\n\tfunction filterYears (source, start, end) {\n\t\tvar slice     = Array.prototype.slice,\n\t\t\tindices   = findStartAndEndIndex(source.untils, start, end),\n\t\t\tuntils    = slice.apply(source.untils, indices);\n\n\t\tuntils[untils.length - 1] = null;\n\n\t\treturn {\n\t\t\tname       : source.name,\n\t\t\tabbrs      : slice.apply(source.abbrs, indices),\n\t\t\tuntils     : untils,\n\t\t\toffsets    : slice.apply(source.offsets, indices),\n\t\t\tpopulation : source.population\n\t\t};\n\t}\n\n\t/************************************\n\t\tFilter, Link, and Pack\n\t************************************/\n\n\tfunction filterLinkPack (input, start, end, groupLeaders) {\n\t\tvar i,\n\t\t\tinputZones = input.zones,\n\t\t\toutputZones = [],\n\t\t\toutput;\n\n\t\tfor (i = 0; i < inputZones.length; i++) {\n\t\t\toutputZones[i] = filterYears(inputZones[i], start, end);\n\t\t}\n\n\t\toutput = createLinks({\n\t\t\tzones : outputZones,\n\t\t\tlinks : input.links.slice(),\n\t\t\tversion : input.version\n\t\t}, groupLeaders);\n\n\t\tfor (i = 0; i < output.zones.length; i++) {\n\t\t\toutput.zones[i] = pack(output.zones[i]);\n\t\t}\n\n\t\treturn output;\n\t}\n\n\t/************************************\n\t\tExports\n\t************************************/\n\n\tmoment.tz.pack           = pack;\n\tmoment.tz.packBase60     = packBase60;\n\tmoment.tz.createLinks    = createLinks;\n\tmoment.tz.filterYears    = filterYears;\n\tmoment.tz.filterLinkPack = filterLinkPack;\n\n\treturn moment;\n}));\n","var moment = module.exports = require(\"./moment-timezone\");\nmoment.tz.load(require('./data/packed/latest.json'));\n","'use strict';\n\n/*\n cycle.js\n 2015-02-25\n\n Public Domain.\n\n NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.\n\n This code should be minified before deployment.\n See http://javascript.crockford.com/jsmin.html\n\n USE YOUR OWN COPY. IT IS EXTREMELY UNWISE TO LOAD CODE FROM SERVERS YOU DO\n NOT CONTROL.\n */\n\n/*jslint eval, for */\n\n/*property\n $ref, apply, call, decycle, hasOwnProperty, length, prototype, push,\n retrocycle, stringify, test, toString\n */\n\nfunction decycle(object) {\n\n  var objects = [],   // Keep a reference to each unique object or array\n    paths = [];     // Keep the path to each unique object or array\n\n  return (function derez(value, path) {\n\n// The derez recurses through the object, producing the deep copy.\n\n    var i,          // The loop counter\n      name,       // Property name\n      nu;         // The new object or array\n\n    var _value = value && value.toJSON instanceof Function ? value.toJSON() : value;\n// typeof null === 'object', so go on if this value is really an object but not\n// one of the weird builtin objects.\n\n    if (typeof _value === 'object' && _value !== null) {\n\n// If the value is an object or array, look to see if we have already\n// encountered it. If so, return a $ref/path object. This is a hard way,\n// linear search that will get slower as the number of unique objects grows.\n\n      for (i = 0; i < objects.length; i += 1) {\n        if (objects[i] === _value) {\n          return {$ref: paths[i]};\n        }\n      }\n\n// Otherwise, accumulate the unique value and its path.\n\n      objects.push(_value);\n      paths.push(path);\n\n// If it is an array, replicate the array.\n\n      if (Object.prototype.toString.apply(_value) === '[object Array]') {\n        nu = [];\n        for (i = 0; i < _value.length; i += 1) {\n          nu[i] = derez(_value[i], path + '[' + i + ']');\n        }\n      } else {\n\n// If it is an object, replicate the object.\n\n        nu = {};\n        for (name in _value) {\n          if (Object.prototype.hasOwnProperty.call(_value, name)) {\n            nu[name] = derez(_value[name],\n              path + '[' + JSON.stringify(name) + ']');\n          }\n        }\n      }\n      return nu;\n    }\n    return _value;\n  }(object, '$'));\n}\n\nfunction retrocycle($) {\n\n  var px = /^\\$(?:\\[(?:\\d+|\\\"(?:[^\\\\\\\"\\u0000-\\u001f]|\\\\([\\\\\\\"\\/bfnrt]|u[0-9a-zA-Z]{4}))*\\\")\\])*$/;\n\n  (function rez(value) {\n\n// The rez function walks recursively through the object looking for $ref\n// properties. When it finds one that has a value that is a path, then it\n// replaces the $ref object with a reference to the value that is found by\n// the path.\n\n    var i, item, name, path;\n\n    if (value && typeof value === 'object') {\n      if (Object.prototype.toString.apply(value) === '[object Array]') {\n        for (i = 0; i < value.length; i += 1) {\n          item = value[i];\n          if (item && typeof item === 'object') {\n            path = item.$ref;\n            if (typeof path === 'string' && px.test(path)) {\n              value[i] = eval(path);\n            } else {\n              rez(item);\n            }\n          }\n        }\n      } else {\n        for (name in value) {\n          if (typeof value[name] === 'object') {\n            item = value[name];\n            if (item) {\n              path = item.$ref;\n              if (typeof path === 'string' && px.test(path)) {\n                value[name] = eval(path);\n              } else {\n                rez(item);\n              }\n            }\n          }\n        }\n      }\n    }\n  }($));\n  return $;\n}\n\nmodule.exports = {\n  stringify: function stringifyJC(object, replacer, space) {\n    return JSON.stringify(decycle(object), replacer, space)\n  },\n\n  parse: function parseJC($, reviver) {\n    return retrocycle(JSON.parse($, reviver))\n  },\n\n  decycle: decycle,\n  retrocycle: retrocycle,\n};\n","var content = require(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--6-2!../../../../node_modules/postcss-loader/src/index.js!../../../../node_modules/sass-loader/dist/cjs.js??ref--6-4!./style.scss\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","/**\n * External dependencies\n */\nimport PropTypes from 'prop-types';\n\n/**\n * Internal dependencies.\n */\nimport CalendarContext from './context';\n\nconst CalendarState = ( props ) => {\n\tlet newProps;\n\n\tif ( 'undefined' !== props.isFrontend && true === props.isFrontend ) {\n\t\tnewProps = props;\n\t} else {\n\t\tnewProps = props.attributes;\n\t}\n\n\t/**\n\t * dateRangeType.\n\t */\n\tconst onTimeRangeUpdate = ( dateRangeType ) => {\n\t\tprops.setAttributes( { dateRangeType } );\n\t};\n\n\t/**\n\t * showSoldOut.\n\t */\n\tconst onShowSoldOutTimesUpdate = () => {\n\t\tprops.setAttributes( { showSoldOut: ! newProps.showSoldOut } );\n\t};\n\n\treturn (\n\t\t<CalendarContext.Provider value={ {\n\t\t\tdateRangeType: newProps.dateRangeType,\n\t\t\tonTimeRangeUpdate: onTimeRangeUpdate,\n\t\t\tonShowSoldOutTimesUpdate: onShowSoldOutTimesUpdate,\n\t\t\tshowSoldOut: newProps.showSoldOut,\n\t\t} }\n\t\t>\n\t\t\t{ props.children }\n\t\t</CalendarContext.Provider>\n\t);\n};\n\nCalendarState.propTypes = {\n\tchildren: PropTypes.object,\n\tattributes: PropTypes.object,\n\tsetAttributes: PropTypes.func,\n\tisFrontend: PropTypes.bool,\n};\n\nexport default CalendarState;\n","var content = require(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--6-2!../../../../node_modules/postcss-loader/src/index.js!../../../../node_modules/sass-loader/dist/cjs.js??ref--6-4!./style.scss\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","/**\n * External dependencies\n */\nimport { render } from '@wordpress/element';\nimport './style.scss';\n\n/**\n * Internal dependencies\n */\nimport CalendarContainer from '../../components/event-calendar/container';\nimport { decodeAttributesFor } from '../../includes/misc-utils';\nimport ProductsState from '../products-context/products-state';\nimport CommonState from '../common-context/common-state';\nimport CalendarState from './context/calendar-state';\n\nconst bookingsContainersHTML = document.getElementsByClassName( 'wc-bookings-availability-main-calendar-container' );\n\nfor ( const bookingsContainerHTML of bookingsContainersHTML ) {\n\tconst attributes = decodeAttributesFor( 'calendar', bookingsContainerHTML.dataset );\n\trender(\n\t\t<CommonState isFrontend={ true } { ...attributes }>\n\t\t\t<ProductsState>\n\t\t\t\t<CalendarState isFrontend={ true } { ...attributes }>\n\t\t\t\t\t<CalendarContainer { ...attributes } />\n\t\t\t\t</CalendarState>\n\t\t\t</ProductsState>\n\t\t</CommonState>,\n\t\tbookingsContainerHTML\n\t);\n}\n"],"sourceRoot":""}