this["wc-bookings-availability"]=this["wc-bookings-availability"]||{},this["wc-bookings-availability"]["bookings-schedule-frontend"]=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=85)}([function(e,t){!function(){e.exports=this.wp.element}()},function(e,t,n){e.exports=n(42)()},function(e,t){!function(){e.exports=this.wp.i18n}()},function(e,t){!function(){e.exports=this.moment}()},function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"a",function(){return c}),n.d(t,"d",function(){return u}),n.d(t,"e",function(){return l}),n.d(t,"b",function(){return d}),n.d(t,"f",function(){return f}),n.d(t,"s",function(){return p}),n.d(t,"r",function(){return m}),n.d(t,"l",function(){return v}),n.d(t,"k",function(){return y}),n.d(t,"h",function(){return g}),n.d(t,"m",function(){return h}),n.d(t,"j",function(){return O}),n.d(t,"o",function(){return w}),n.d(t,"i",function(){return _}),n.d(t,"q",function(){return j}),n.d(t,"n",function(){return E}),n.d(t,"g",function(){return T}),n.d(t,"t",function(){return k}),n.d(t,"p",function(){return D});var r=n(3),o=n.n(r),a=(n(47),n(2)),i={TODAY:"today",THIS_WEEK:"this-week",THIS_MONTH:"this-month",CUSTOM:"custom"},c={LOCAL_TO_SERVER:"LOCAL_TO_SERVER",SERVER_TO_LOCAL:"SERVER_TO_LOCAL"},s={TODAY:Object(a.__)("Today","woocommerce-bookings-availability"),THIS_WEEK:Object(a.__)("This week","woocommerce-bookings-availability"),THIS_MONTH:Object(a.__)("This month","woocommerce-bookings-availability")},u=[{value:i.TODAY,label:s.TODAY},{value:i.THIS_WEEK,label:s.THIS_WEEK},{value:i.THIS_MONTH,label:s.THIS_MONTH}],l=[{value:i.THIS_WEEK,label:s.THIS_WEEK},{value:i.THIS_MONTH,label:s.THIS_MONTH}],d="YYYY-MM-DD[T]HH:mm:ss";function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=o()().startOf("day").toDate(),a=o()().startOf("day").toDate(),c=1;i.THIS_MONTH===e&&((r=o()(r).add(t,"months").toDate()).setDate(n),a=o()(r).endOf("month").toDate());var s=r;if(i.THIS_WEEK===e){c=7;var u=parseInt(wc_bookings_availability_args.start_of_week,10),l=o()().day(c*t+u).startOf("day");r<l&&(r=l.toDate()),a=o()(r).endOf("week").toDate(),s=o()(r).startOf("week").toDate()}if(i.TODAY===e){var d=c*t,b=c*(t+1)-1;r.setDate(r.getDate()+d),a.setDate(a.getDate()+b)}return{minDisplayDate:s,minDate:r,maxDate:a}}function f(e){return e&&o()(e).isSame(o()(),"day")?o()().format(d):e}function p(e){return i.CUSTOM===e}function m(e){var t=b(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),n=t.minDisplayDate,r=t.minDate,a=t.maxDate;return i.THIS_MONTH===e?o()(r).format("MMMM YYYY"):r.getTime()===a.getTime()?o()(r).format("MMM DD, YYYY"):o()(n).format("MMM DD - ")+o()(a).format("MMM DD, YYYY")}function v(e){switch(e){case i.TODAY:return s.TODAY;case i.THIS_MONTH:return s.THIS_MONTH;case i.THIS_WEEK:default:return s.THIS_WEEK}}function y(e){var t=b(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1);return g(t.minDate,t.maxDate)}function g(e,t){return{minDate:o()(e).format(d),maxDate:o()(t).endOf("day").format(d)}}function h(e){return o()().day(e).format("ddd")}function O(e,t){switch(e){case i.THIS_WEEK:return function(e){var t=o()(new Date).add(7*e,"day"),n=t.isoWeekday(),r=parseInt(wc_bookings_availability_args.start_of_week,10),a=0===r?7:r,i=null;i=n>a?o()(t).subtract(n-a,"day"):n<a?o()(t).subtract(7-(a-n),"day"):t;var c=o()(i).add(6,"day");return{minDate:i.startOf("day"),maxDate:c.endOf("day")}}(t);case i.THIS_MONTH:default:return function(e){var t=o()(new Date).add(e,"month"),n=parseInt(wc_bookings_availability_args.start_of_week,10),r=0===n?7:n,a=t.startOf("month"),i=(7+(a.isoWeekday()-r)%7)%7,c=o()(a).subtract(i,"day"),s=t.endOf("month"),u=(7+(s.isoWeekday()-r)%7)%7,l=o()(s).add(6-u,"day");return{minDate:c.startOf("day"),maxDate:l.endOf("day"),currentMonth:t}}(t)}}function w(e){return o()(e).format("dddd, MMMM DD")}function _(e,t){var n,r,i,c=e.duration,s=e.durationUnit,u=o()(t),l=u.format("Do"),d=u.format("MMMM"),b=wc_bookings_availability_args.time_format_moment;switch(s){case"minute":n=o()(t).add(c,s),r="".concat(u.format(b),"-").concat(n.format(b)," (").concat(S(t),")");break;case"hour":n=o()(t).add(c,s),i=Object(a.__)(" to ","woocommerce-bookings-availability"),r="".concat(u.format(b)," ").concat(i," ").concat(n.format(b)," (").concat(S(t),")");break;case"night":case"day":var f=(n=o()(t).add(c-1,s)).format("Do"),p=n.format("MMMM"),m=Object(a.sprintf)(Object(a._n)("%d ".concat(s),"%d ".concat(s,"s"),c*e.min_duration,"woocommerce-bookings-availability"),c*e.min_duration);if("customer"===e.duration_type&&e.min_duration!==e.max_duration){m=Object(a.sprintf)(Object(a.__)("%d-%d ".concat(s,"s"),"woocommerce-bookings-availability"),c*e.min_duration,c*e.max_duration),r="".concat(m);break}switch(p=d!==p?"".concat(p," "):"",i="",c){case 1:i=p=f="";break;case 2:i=Object(a.__)(" and ","woocommerce-bookings-availability");break;default:i=" - "}r="".concat(m,", ").concat(d," ").concat(l," ").concat(i," ").concat(p).concat(f," ");break;case"month":n=o()(t).add(c,s);var v=Object(a.sprintf)(Object(a._n)("%d month","%d months",c,"woocommerce-bookings-availability"),c),y=u.startOf("month"),g=n.endOf("month");r=1===c?"".concat(v,", ").concat(y.format("MMMM D")," - ").concat(g.format("D")):"".concat(v,", ").concat(y.format("MMMM D")," - ").concat(g.format("MMMM D"))}return r}function j(e){switch(e){case i.THIS_WEEK:return Object(a.__)("No available times this week.","woocommerce-bookings-availability");case i.THIS_MONTH:return Object(a.__)("No available times this month.","woocommerce-bookings-availability");case i.TODAY:default:return Object(a.__)("No available times this day.","woocommerce-bookings-availability")}}function E(e){switch(e){case i.THIS_WEEK:return Object(a.__)("We weren't able to load times for this week.","woocommerce-bookings-availability");case i.THIS_MONTH:return Object(a.__)("We weren't able to load times for this month.","woocommerce-bookings-availability");case i.TODAY:default:return Object(a.__)("We weren't able to load times for this day.","woocommerce-bookings-availability")}}function T(e,t){var n=function(e){if(!wc_bookings_availability_args.timezone_conversion)return 0;var t=o()(e,d),n=t.utcOffset();t.tz(wc_bookings_availability_args.server_timezone);var r=t.utcOffset();return(n-r)/60}(e),r=o.a.tz(e,d,wc_bookings_availability_args.server_timezone);switch(t){case c.SERVER_TO_LOCAL:r.add(n,"hours");break;case c.LOCAL_TO_SERVER:r.subtract(n,"hours");break;default:throw"Invalid convertDirection option."}return r}function k(e,t){return wc_bookings_availability_args.timezone_conversion?T(e,t).format(d):e}function S(e){return wc_bookings_availability_args.timezone_conversion?o.a.tz(e,d,o.a.tz.guess()).format("z"):o.a.tz(e,d,wc_bookings_availability_args.server_timezone).format("z")}function D(e,t){if(!t.has_restricted_days||!t.restricted_days)return!1;var n=o()(e).day();return void 0===t.restricted_days[n]}},function(e,t){!function(){e.exports=this.wp.components}()},function(e,t){!function(){e.exports=this.lodash}()},function(e,t,n){var r=n(44),o=n(45),a=n(46);e.exports=function(e,t){return r(e)||o(e,t)||a()}},function(e,t,n){"use strict";var r=n(0),o=n(5),a=function(){return Object(r.createElement)(o.Icon,{icon:Object(r.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Object(r.createElement)("path",{d:"M19 5v14H5V5h14m1.1-2H3.9c-.5 0-.9.4-.9.9v16.2c0 .4.4.9.9.9h16.2c.4 0 .9-.5.9-.9V3.9c0-.5-.5-.9-.9-.9zM11 7h6v2h-6V7zm0 4h6v2h-6v-2zm0 4h6v2h-6zM7 7h2v2H7zm0 4h2v2H7zm0 4h2v2H7z"}),Object(r.createElement)("path",{fill:"none",d:"M0 0h24v24H0z"}))})},i=function(){return Object(r.createElement)(o.Icon,{icon:Object(r.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Object(r.createElement)("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"}),Object(r.createElement)("path",{fill:"none",d:"M0 0h24v24H0z"}))})},c=function(){return Object(r.createElement)(o.Icon,{icon:Object(r.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Object(r.createElement)("path",{fill:"#1E8CBE",d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}))})},s=function(){return Object(r.createElement)(o.Icon,{icon:Object(r.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Object(r.createElement)("path",{fill:"#6C7781",d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}))})},u=function(){return Object(r.createElement)(o.Icon,{icon:Object(r.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Object(r.createElement)("path",{fill:"#1E8CBE",d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}))})},l=function(){return Object(r.createElement)(o.Icon,{icon:Object(r.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Object(r.createElement)("path",{fill:"#6C7781",d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}))})},d=function(){return Object(r.createElement)(o.Icon,{icon:Object(r.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Object(r.createElement)("path",{d:"M22 12l-4-4v3H3v2h15v3z"}),Object(r.createElement)("path",{d:"M0 0h24v24H0z",fill:"none"}))})},b=function(){return Object(r.createElement)(o.Icon,{icon:Object(r.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Object(r.createElement)("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),Object(r.createElement)("path",{fill:"none",d:"M0 0h24v24H0V0z"}))})};n.d(t,"e",function(){return a}),n.d(t,"a",function(){return i}),n.d(t,"b",function(){return c}),n.d(t,"c",function(){return s}),n.d(t,"f",function(){return u}),n.d(t,"g",function(){return l}),n.d(t,"h",function(){return d}),n.d(t,"d",function(){return b})},function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"e",function(){return u}),n.d(t,"a",function(){return l}),n.d(t,"d",function(){return b}),n.d(t,"c",function(){return f});var r=n(13),o=n.n(r),a=n(2),i=n(4);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var s={ALL_PRODUCTS:"all-products",PRODUCTS_SCREEN:"products-screen",CATEGORIES_SCREEN:"categories-screen",RESOURCES_SCREEN:"resources-screen"},u=[{value:s.ALL_PRODUCTS,label:Object(a.__)("All bookable products","woocommerce-bookings-availability")},{value:s.PRODUCTS_SCREEN,label:Object(a.__)("Specific bookable products","woocommerce-bookings-availability")},{value:s.CATEGORIES_SCREEN,label:Object(a.__)("Specific categories","woocommerce-bookings-availability")},{value:s.RESOURCES_SCREEN,label:Object(a.__)("Specific resources","woocommerce-bookings-availability")}],l=8,d={common:{categoryIds:{type:"string",default:"",source:"attribute",selector:".wc-bookings-availability-main-container",attribute:"data-category-ids"},currentScreen:{type:"string",default:""},productIds:{type:"string",default:"",source:"attribute",selector:".wc-bookings-availability-main-container",attribute:"data-product-ids"},resourceIds:{type:"string",default:"",source:"attribute",selector:".wc-bookings-availability-main-container",attribute:"data-resource-ids"},showDateNav:{type:"boolean",default:!0,attribute:"data-show-date-nav"}},calendar:{dateRangeType:{type:"string",default:i.c.THIS_MONTH,attribute:"data-date-range-type"},showSoldOut:{type:"boolean",default:!0,attribute:"data-show-sold-out"},example:{type:"boolean",default:!1}},schedule:{dateRangeType:{type:"string",default:i.c.TODAY,attribute:"data-date-range-type"},infiniteScrollEnabled:{type:"boolean",default:!0,attribute:"data-infinite-scroll-enabled"},maxDate:{type:"date",default:null,source:"attribute",selector:".wc-bookings-availability-container",attribute:"data-max-date"},minDate:{type:"date",default:null,source:"attribute",selector:".wc-bookings-availability-container",attribute:"data-min-date"},slotsPerPage:{type:"number",default:l,attribute:"data-slots-per-page"},showEmptyDates:{type:"boolean",default:!0,attribute:"data-show-empty-dates"}}};function b(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(n,!0).forEach(function(t){o()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},d.common,{},d[e])}function f(e,t){for(var n=b(e),r={},o=0,a=Object.keys(n);o<a.length;o++){var i=a[o],c=n[i].type,s=t.hasOwnProperty(i)?t[i]:n[i].default;switch(c){case"boolean":r[i]="true"===s||!0===s;break;case"number":r[i]=parseInt(s);break;default:r[i]=s}}return r}},function(e,t){!function(){e.exports=this.wp.apiFetch}()},function(e,t,n){"use strict";var r=n(0);t.a=Object(r.createContext)({})},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n.apply(this,arguments)}e.exports=n},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";var r=n(0);t.a=Object(r.createContext)({})},function(e,t){!function(){e.exports=this.wp.url}()},function(e,t,n){"use strict";var r=n(0);t.a=Object(r.createContext)({})},function(e,t,n){var r=n(53),o=n(54),a=n(55);e.exports=function(e){return r(e)||o(e)||a()}},,function(e,t,n){"use strict";var r=n(0);t.a=Object(r.createContext)({})},,function(e,t,n){"use strict";var r,o={},a=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}();function c(e,t){for(var n=[],r={},o=0;o<e.length;o++){var a=e[o],i=t.base?a[0]+t.base:a[0],c={css:a[1],media:a[2],sourceMap:a[3]};r[i]?r[i].parts.push(c):n.push(r[i]={id:i,parts:[c]})}return n}function s(e,t){for(var n=0;n<e.length;n++){var r=e[n],a=o[r.id],i=0;if(a){for(a.refs++;i<a.parts.length;i++)a.parts[i](r.parts[i]);for(;i<r.parts.length;i++)a.parts.push(m(r.parts[i],t))}else{for(var c=[];i<r.parts.length;i++)c.push(m(r.parts[i],t));o[r.id]={id:r.id,refs:1,parts:c}}}}function u(e){var t=document.createElement("style");if(void 0===e.attributes.nonce){var r=n.nc;r&&(e.attributes.nonce=r)}if(Object.keys(e.attributes).forEach(function(n){t.setAttribute(n,e.attributes[n])}),"function"==typeof e.insert)e.insert(t);else{var o=i(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var l,d=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function b(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=d(t,o);else{var a=document.createTextNode(o),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(a,i[t]):e.appendChild(a)}}var f=null,p=0;function m(e,t){var n,r,o;if(t.singleton){var a=p++;n=f||(f=u(t)),r=b.bind(null,n,a,!1),o=b.bind(null,n,a,!0)}else n=u(t),r=function(e,t,n){var r=n.css,o=n.media,a=n.sourceMap;if(o&&e.setAttribute("media",o),a&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}.bind(null,n,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).attributes="object"==typeof t.attributes?t.attributes:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a());var n=c(e,t);return s(n,t),function(e){for(var r=[],a=0;a<n.length;a++){var i=n[a],u=o[i.id];u&&(u.refs--,r.push(u))}e&&s(c(e,t),t);for(var l=0;l<r.length;l++){var d=r[l];if(0===d.refs){for(var b=0;b<d.parts.length;b++)d.parts[b]();delete o[d.id]}}}}},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},,function(e,t,n){"use strict";var r=n(12),o=n.n(r),a=n(0),i=n(1),c=n.n(i),s=n(28),u=(n(38),n(8)),l=n(4),d=n(11),b=n(27),f=function(e){var t=Object(a.useContext)(d.a),n=t.offset,r=t.gotoCurrent,i=t.gotoNext,c=t.gotoPrev,f=t.showDateNav,p=t.showEmptyDates,m=e.dateRangeType,v=Object(l.r)(m,n),y=Object(l.l)(m);return Object(a.createElement)("div",null,Object(a.createElement)("div",{className:"wc-bookings-availability-header"},Object(a.createElement)("div",{className:"wc-bookings-availability-date"},v),!0===f||"true"===f?Object(a.createElement)("div",{className:"wc-bookings-availability-navigation"},n<=0?Object(a.createElement)("a",{href:"#",className:"wc-bookings-availability-navigation-prev wc-bookings-availability-navigation-disabled",onClick:function(e){e.preventDefault()}},Object(a.createElement)(u.h,null)):Object(a.createElement)("a",{href:"#",className:"wc-bookings-availability-navigation-prev",onClick:c}," ",Object(a.createElement)(u.h,null)," "),Object(a.createElement)("a",{href:"#",className:"wc-bookings-availability-navigation-current",onClick:r},y),Object(a.createElement)("a",{href:"#",className:"wc-bookings-availability-navigation-next",onClick:i},Object(a.createElement)(u.h,null))):""),Object(a.createElement)(b.a,e,Object(a.createElement)(s.b,o()({},e,{showEmptyDates:p}))))};f.propTypes={dateRangeType:c.a.string,showDateNav:c.a.bool},t.a=f},,function(e,t,n){"use strict";var r=n(0);t.a=Object(r.createContext)({})},function(e,t,n){"use strict";var r=n(17),o=n.n(r),a=n(7),i=n.n(a),c=n(0),s=n(1),u=n.n(s),l=n(15),d=n(10),b=n.n(d),f=n(6),p=n(4),m=n(9),v=n(19),y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return JSON.stringify(e,Object.keys(e).sort())},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y(Object(f.omit)(e,["page"]))},h=function(e){var t=Object(c.useState)([]),n=i()(t,2),r=n[0],a=n[1],s=Object(c.useState)(!1),u=i()(s,2),d=u[0],y=u[1],h=Object(c.useState)(!1),O=i()(h,2),w=O[0],_=O[1],j=function(e){var t=Object(f.get)(r,[g(e)],!1);if(!1===t)return[];var n=[];return Object.keys(t.pages).sort().map(function(e){n.push.apply(n,o()(t.pages[e]))}),n};return Object(c.createElement)(v.a.Provider,{value:{hasResultsForQuery:function(e){var t=void 0===e.page?"default":e.page;return!1!==Object(f.get)(r,[g(e),"pages",t],!1)},availabilityRequesting:d,getAvailability:j,getAvailabilityCount:function(e){return j(e).length},getRemainingRecordsCount:function(e){var t=j(e).length;return function(e){return Object(f.get)(r,[g(e),"count"],0)}(e)-t},requestAvailability:function e(t){var n=t.minDate,o=t.maxDate,i=t.page,c=t.productIds,s=t.categoryIds,u=t.resourceIds,d=t.getPastTimes,v=t.pageSize,h=void 0===v?m.a:v,O=t.showSoldOut,w={product_ids:c,category_ids:s,resource_ids:u,min_date:n?encodeURIComponent(Object(p.t)(Object(p.f)(n),p.a.LOCAL_TO_SERVER)):n,max_date:o?encodeURIComponent(Object(p.t)(o,p.a.LOCAL_TO_SERVER)):o,page:i,limit:h,get_past_times:!1!==d,hide_unavailable:!O},j=Object(l.addQueryArgs)("/wc-bookings/v1/products/slots",Object(f.pickBy)(w,f.identity));y(!0),b()({path:j}).then(function(n){var o=n.records,i=n.count;!function(t,n,o){if(0!==e.length){var i=g(o),c=void 0===o.page?"default":o.page,s=Object(f.merge)({},r);Object(f.has)(s,i)||(s[i]={count:n,pages:{}}),s[i].pages[c]=t,a(s)}}(o.map(function(e){return e.productId=e.product_id,e.durationUnit=e.duration_unit,delete e.product_id,delete e.duration_unit,e.serverDate=e.date,e.date=Object(p.t)(e.date,p.a.SERVER_TO_LOCAL),e}),i,t),_(!1),y(!1)},function(e){_(e),y(!1)})},availabilityError:w,highestPageForQuery:function(e){var t=Object(f.get)(r,[g(e)],!1);return!1===t?1:Math.max.apply(Math,o()(Object.keys(t.pages)))}}},e.children)};h.propTypes={children:u.a.object},t.a=h},function(e,t,n){"use strict";var r=n(7),o=n.n(r),a=n(0),i=n(1),c=n(2),s=n(3),u=n.n(s),l=n(10),d=n.n(l),b=n(4),f=function(e){var t=Object(a.useState)(!0),n=o()(t,2),r=n[0],i=(n[1],Object(a.useState)(!1)),s=o()(i,2),u=s[0],l=s[1],f=e.isPreview,p=e.addSubheader,m=e.product,v=m.name,y=e.data,g=y.date,h=y.placeholder,O=y.available,w=m.price_html,_=O&&r,j="wc-bookings-availability-item";h&&(j+=" wc-bookings-availability-item-is-placeholder");var E=m.has_persons||m.has_resources||"customer"===m.duration_type?Object(c.__)("Select options","woocommerce-bookings-availability"):Object(c.__)("Book now","woocommerce-bookings-availability"),T="wp-block-button__link wc-bookings-availability-book-button";return _||(E=Object(c.__)("Sold out","woocommerce-bookings-availability"),T+=" wc-bookings-availability-item-sold-out"),Object(a.createElement)("li",{className:j},p&&Object(a.createElement)("div",{className:"wc-bookings-availability-item-subheader"},Object(a.createElement)("span",null,Object(b.o)(g))),Object(a.createElement)("div",{className:"wc-bookings-availability-item-body"},Object(a.createElement)("div",{className:"wc-bookings-availability-item-information"},Object(a.createElement)("div",null,Object(a.createElement)("h3",null,Object(a.createElement)("a",{href:m.permalink},v)),Object(a.createElement)("div",null,Object(a.createElement)("span",null,Object(b.i)(m,g))),Object(a.createElement)("div",{className:"wc-bookings-availability-item-price",dangerouslySetInnerHTML:{__html:w}}))),Object(a.createElement)("div",{className:"wp-block-button"},f||!r?Object(a.createElement)("span",{className:T},E):Object(a.createElement)("button",{onClick:function(){var t=e.data,n=t.serverDate,o=t.productId,a=t.available,i=e.product,c=e.product.permalink,s=a&&r&&!(i.has_persons||i.has_resources||"customer"===i.duration_type);l(!0),s?d()({url:wc_bookings_availability_args.ajax_url+"=wc_bookings_add_booking_to_cart&product_id="+o+"&date="+encodeURIComponent(n)+"&security="+wc_bookings_availability_args.nonces.add_booking_to_cart}).then(function(e){e.booked?window.location.href=wc_bookings_availability_args.checkout_url:window.location.href=e.link}):window.location.href=c},disabled:u,className:T},E))))};f.propTypes={data:i.PropTypes.shape({booked:i.PropTypes.number,available:i.PropTypes.number,resources:i.PropTypes.object,productId:i.PropTypes.number,title:i.PropTypes.string,date:i.PropTypes.date,serverDate:i.PropTypes.string,placeholder:i.PropTypes.bool,duration:i.PropTypes.number,durationUnit:i.PropTypes.string}).isRequired,isPreview:i.PropTypes.bool,addSubheader:i.PropTypes.bool,product:i.PropTypes.object.isRequired},f.defaultProps={addSubheader:!1};var p=f,m=function(e){var t=e.date;return Object(a.createElement)("li",{className:"wc-bookings-availability-item"},Object(a.createElement)("div",{className:"wc-bookings-availability-item-subheader"},Object(a.createElement)("span",null,Object(b.o)(t)," ")),Object(a.createElement)("div",{className:"wc-bookings-availability-item-body"},Object(a.createElement)("div",{className:"wc-bookings-availability-item-empty"},Object(b.q)("today"))))},v=m;m.propTypes={date:i.PropTypes.object};var y=n(9),g=n(31),h=n.n(g),O=n(32),w=n.n(O),_=n(33),j=n.n(_),E=n(34),T=n.n(E),k=n(22),S=n.n(k),D=n(35),x=n.n(D),P=n(13),M=n.n(P),I=(n(50),function(e){function t(){var e;return h()(this,t),e=j()(this,T()(t).apply(this,arguments)),M()(S()(e),"loadMoreClick",function(t){t.preventDefault(),(0,e.props.loadMore)()}),e.onScroll=e.onScroll.bind(S()(e)),e.scrollTriggerRef=Object(a.createRef)(),e}return x()(t,e),w()(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.onScroll,!0)}},{key:"componentDidUpdate",value:function(e){!0===e.isLoading&&!1===this.props.isLoading&&this.onScroll(),!1===e.infiniteScrollEnabled&&!0===this.props.infiniteScrollEnabled&&this.onScroll()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.onScroll,!0)}},{key:"onScroll",value:function(){var e=this.props,t=e.isLoading,n=e.loadMore;!t&&this.scrollTriggerIsInViewport()&&n()}},{key:"scrollTriggerIsInViewport",value:function(){var e=this.scrollTriggerRef.current;if(null===e)return!1;var t=e.getBoundingClientRect().top;return t>=0&&t<=window.innerHeight}},{key:"render",value:function(){var e=this.props,t=e.remainingRecords;return e.infiniteScrollEnabled?Object(a.createElement)("div",{className:"wc-bookings-availability-scroll-trigger",ref:this.scrollTriggerRef}):Object(a.createElement)("div",{className:"wc-bookings-availability-load-more-listings"},Object(c.sprintf)(Object(c._n)("%s additional listing.","%s additional listings.",t,"woocommerce-bookings-availability"),t)," ",Object(a.createElement)("a",{onClick:this.loadMoreClick,href:"#"}," ",Object(c.__)("Load more...","woocommerce-bookings-availability")))}}]),t}(a.Component));I.propTypes={remainingRecords:i.PropTypes.number.isRequired,infiniteScrollEnabled:i.PropTypes.bool.isRequired,loadMore:i.PropTypes.func.isRequired,isLoading:i.PropTypes.bool},I.defaultProps={isLoading:!1};var R=I,C=n(16),N=n(19),H=n(26),A=n(14),L=n(11);n.d(t,"a",function(){return z});var z=function(e){var t=Object(a.useState)(1),n=o()(t,2),r=n[0],i=n[1],s=Object(a.useRef)(!0),l=Object(a.useRef)(null),d=Object(a.useContext)(C.a),f=d.requestProducts,m=d.getProducts,g=d.products,h=d.productsRequesting,O=d.productsError,w=Object(a.useContext)(N.a),_=w.hasResultsForQuery,j=w.availabilityRequesting,E=w.getAvailability,T=w.requestAvailability,k=w.availabilityError,S=w.getRemainingRecordsCount,D=w.highestPageForQuery,x=Object(a.useContext)(H.a).dateRangeType,P=Object(a.useContext)(A.a).showSoldOut,M=Object(a.useContext)(L.a),I=M.resetOffset,z=M.offset,Y=e.minDate,U=e.maxDate,V=e.forceDateFromProps,B=e.productIds,W=e.categoryIds,q=e.resourceIds,F=e.infiniteScrollEnabled,K=e.slotsPerPage,Q=e.getPastTimes,G=function(e,t,n,r,o){var i=Object(a.useRef)();return Object(a.useEffect)(function(){i.current={dateRangeType:e,infiniteScrollEnabled:t,offset:n,page:r,slotsPerPage:o}},[e,t,n,r,o]),i.current}(x,F,z,r,K),J={productIds:B},X=!!(V=void 0!==V&&V)&&Y,Z=1;if(!Object(b.s)(x)&&!V){if(0===z&&"this-month"===x)Z=(new Date).getDate();var $=Object(b.k)(x,z,Z);Y=$.minDate,U=$.maxDate}var ee={minDate:Y,maxDate:U,productIds:B,categoryIds:W,resourceIds:q,page:r,getPastTimes:Q,pageSize:F?y.a:K,showSoldOut:P},te=O||k,ne=h||j,re=S(ee),oe=_(ee),ae=oe&&0===re;Object(a.useLayoutEffect)(function(){h||!1!==m().count||f(J),T(ee)},[]),Object(a.useLayoutEffect)(function(){if(!s.current){if(x!==G.dateRangeType){if(0!==z)return void I();var e=D(ee);ee.page=e,i(e)}if(K!==G.slotsPerPage||!1===F&&!0===G.infiniteScrollEnabled||z!==G.offset){var t=D(ee);ee.page=t,i(t)}if(!0===F&&!1===G.infiniteScrollEnabled)if(null!==l.current&&l.current.scrollTriggerIsInViewport()){var n=D(ee)+1;ee.page=n,i(n)}j||oe||ae||te||T(ee)}},[x,F,z,r,K,j,X]),Object(a.useEffect)(function(){s.current=!1},[]);var ie=E(ee),ce=function(){!j&&_(ee)&&i(r+1)};return te?Object(a.createElement)("div",{className:"woocommerce-error notice notice-error"},Object(b.n)(x)," ",Object(a.createElement)("a",{href:"#",onClick:function(){T(ee)}},Object(c.__)("Try again","woocommerce-bookings-availability"))):function(){var t=e.isPreview,n=e.showEmptyDates,o=null,i=ie,c=ie.slice(0),s=[],d=F||0===re?y.a:Math.min(K,re),f={name:"placeholder",duration:1,duration_unit:"day",placeholder:!0};if(ne){for(var m=0;m<d;m++)c.push({title:"placeholder",date:new Date(Y),cost:0,productId:0,available:0,placeholder:!0});i=c}var h=0;if(i.forEach(function(e){var r=e.date,i=g[e.productId]||f,c=u()(o),l=!1;if(!o||c.isBefore(r,"day")){for(c.add(1,"day");c.isBefore(r,"day");)n&&(s.push(Object(a.createElement)(v,{key:h,date:c.toDate()})),h++),c.add(1,"day");l=!0}o=r,Object(b.p)(r,i)||s.push(Object(a.createElement)(p,{isPreview:t,key:h,data:e,product:i,addSubheader:l})),h++}),!(1===r&&ne)&&0===re&&u()(o).isBefore(U,"day"))for(var O=u()(o);O.isBefore(U,"day");)O.add(1,"day"),n&&(s.push(Object(a.createElement)(v,{key:h,date:O.toDate()})),h++);return i.length?Object(a.createElement)(a.Fragment,null,Object(a.createElement)("ul",{className:"wc-bookings-availability-event-table"},s),!ae&&Object(a.createElement)(R,{ref:l,infiniteScrollEnabled:F,remainingRecords:re,loadMore:ce,isLoading:j})):Object(a.createElement)("div",{className:"woocommerce-error notice notice-empty"},Object(b.q)(x))}()};z.defaultProps={productIds:[],categoryIds:[],resourceIds:[],offset:0,getPastTimes:!1},z.propTypes={isPreview:i.PropTypes.bool,infiniteScrollEnabled:i.PropTypes.bool.isRequired,slotsPerPage:i.PropTypes.number,showEmptyDates:i.PropTypes.bool,minDate:i.PropTypes.string,maxDate:i.PropTypes.string,forceDateFromProps:i.PropTypes.bool,offset:i.PropTypes.number,productIds:i.PropTypes.node,categoryIds:i.PropTypes.node,resourceIds:i.PropTypes.node,getPastTimes:i.PropTypes.bool};t.b=z},,,function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){var r=n(48),o=n(22);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?o(e):t}},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t,n){var r=n(49);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e,t,n){"use strict";var r=n(7),o=n.n(r),a=n(0),i=n(1),c=n.n(i),s=n(11),u=function(e){var t;t="undefined"!==e.isFrontend&&!0===e.isFrontend?e:e.attributes;var n=Object(a.useState)(0),r=o()(n,2),i=r[0],c=r[1];return Object(a.createElement)(s.a.Provider,{value:{offset:i,gotoPrev:function(e){e.preventDefault(),c(parseInt(i,10)-1)},gotoNext:function(e){e.preventDefault(),c(parseInt(i,10)+1)},gotoCurrent:function(e){e.preventDefault(),c(0)},resetOffset:function(){c(0)},showDateNav:t.showDateNav,onShowDateNavUpdate:function(){e.setAttributes({showDateNav:!t.showDateNav})},showEmptyDates:t.showEmptyDates,onShowEmptyDatesUpdate:function(){e.setAttributes({showEmptyDates:!t.showEmptyDates})}}},e.children)};u.propTypes={children:c.a.object,attributes:c.a.object,setAttributes:c.a.func,isFrontend:c.a.bool},t.a=u},function(e,t,n){"use strict";var r=n(7),o=n.n(r),a=n(0),i=n(1),c=n.n(i),s=n(15),u=n(10),l=n.n(u),d=n(6),b=n(16),f=function(e){var t=Object(a.useState)({products:{},count:!1,query:{}}),n=o()(t,2),r=n[0],i=n[1],c=Object(a.useState)(!1),u=o()(c,2),f=u[0],p=u[1],m=Object(a.useState)(!1),v=o()(m,2),y=v[0],g=v[1];return Object(a.createElement)(b.a.Provider,{value:{products:r.products,getProducts:function(){return r},requestProducts:function(e){var t=(e=e||{}).productIds,n={include:void 0===t?"":t,per_page:-1,_locale:"user"},r=Object(s.addQueryArgs)("/wc-bookings/v1/products",Object(d.pickBy)(n,d.identity));p(!0),l()({path:r}).then(function(t){var n=function(e){return Object(d.reduce)(e,function(e,t){var n=t.id;return delete t.id,t.durationUnit=t.duration_unit,delete t.duration_unit,e[n]=t,e},{})}(t);i({products:n,count:t.length,query:e}),g(!1),p(!1)},function(e){g(e),p(!1)})},productsError:y,productsRequesting:f}},e.children)};f.propTypes={children:c.a.object,attributes:c.a.object,setAttributes:c.a.func,isFrontend:c.a.bool},t.a=f},function(e,t,n){var r=n(52);"string"==typeof r&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};n(21)(r,o);r.locals&&(e.exports=r.locals)},,,,function(e,t,n){"use strict";var r=n(43);function o(){}function a(){}a.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,a,i){if(i!==r){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:o};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(e,t){!function(){e.exports=this["moment-timezone"]}()},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=r=function(e){return n(e)}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},r(t)}e.exports=r},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},function(e,t,n){var r=n(51);"string"==typeof r&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};n(21)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){},function(e,t,n){},function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}},function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},,,,,,,,,,,,function(e,t,n){"use strict";var r=n(0),o=n(1),a=n.n(o),i=n(26),c=function(e){var t;t="undefined"!==e.isFrontend&&!0===e.isFrontend?e:e.attributes;return Object(r.createElement)(i.a.Provider,{value:{dateRangeType:t.dateRangeType,onTimeRangeUpdate:function(t){e.setAttributes({dateRangeType:t})}}},e.children)};c.propTypes={children:a.a.object,attributes:a.a.object,setAttributes:a.a.func,isFrontend:a.a.bool},t.a=c},,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(86)},function(e,t,n){"use strict";n.r(t);var r=n(12),o=n.n(r),a=n(0),i=n(24),c=n(9),s=n(36),u=n(37),l=n(67),d=document.getElementsByClassName("wc-bookings-availability-main-events-container"),b=!0,f=!1,p=void 0;try{for(var m,v=d[Symbol.iterator]();!(b=(m=v.next()).done);b=!0){var y=m.value,g=Object(c.c)("schedule",y.dataset);Object(a.render)(Object(a.createElement)(s.a,o()({isFrontend:!0},g),Object(a.createElement)(u.a,{isFrontend:!0},Object(a.createElement)(l.a,o()({isFrontend:!0},g),Object(a.createElement)(i.a,g)))),y)}}catch(e){f=!0,p=e}finally{try{b||null==v.return||v.return()}finally{if(f)throw p}}}]);
//# sourceMappingURL=bookings-schedule-frontend.js.map